{"version":3,"sources":["components/userProfile/UserData/UserData.module.css","components/recipe/AddRecipeModal/AddRecipeModal.module.css","components/home/Cities/Cities.module.css","components/restaurant/CreateRestaurant/CreateRestaurant.module.css","components/comment/AddCommentForm/AddCommentForm.module.css","components/comment/EditCommentForm/EditCommentForm.module.css","components/auth/Register/RegisterModal.module.css","components/comment/Comment/Comment.module.css","components/layout/Footer/Footer.module.css","components/home/Kitchens/Kitchens.module.css","components/auth/Login/LoginModal.module.css","components/order/OrderModal/OrderModal.module.css","components/restaurant/RestaurantHeader/RestaurantHeader.module.css","components/shoppingCart/CheckoutForm/CheckoutForm.module.css","components/shoppingCart/ShoppingCart/ShoppingCart.module.css","components/restaurant/RestaurantCard/RestaurantCard.module.css","components/UI/Notification/Notification.module.css","components/layout/Navigation/Navigation.module.css","components/recipe/Recipe/Recipe.module.css","components/home/Benefits/Benefits.module.css","components/UI/HorizontalNav/HorizontalNav.module.css","components/comment/CommentsModal/CommentsModal.module.css","components/userProfile/UserPopup/UserPopup.module.css","components/home/Hero/Hero.module.css","components/UI/Paginator/Paginator.module.css","components/shoppingCart/ShoppingCartListItem/ShoppingCartListItem.module.css","components/UI/MultiChoiceSelect/MultiChoiceSelect.module.css","components/restaurant/DeleteRestaurantModal/DeleteRestaurantModal.module.css","components/order/OrdersListItem/OrdersListItem.module.css","components/recipe/DeleteRecipeModal/DeleteRecipeModal.module.css","components/restaurant/Statistics/CategoriesChart/CategoriesChart.module.css","components/restaurant/Statistics/SalesChart/SalesChart.module.css","components/UI/Modal/Modal.module.css","components/UI/Spinner/Spinner.module.css","components/order/OrdersList/OrdersList.module.css","components/UI/ScrollToTopBtn/ScrollToTopBtn.module.css","components/userProfile/UserIcon/UserIcon.module.css","components/UI/SortRestaurants/SortRestaurants.module.css","components/restaurant/RestaurantList/RestaurantList.module.css","components/restaurant/RestaurantCategoryList/RestaurantCategoryList.module.css","components/UI/ImageSuspense/ImageSuspense.module.css","components/restaurant/MyRestaurants/MyRestaurants.module.css","components/restaurant/RestaurantCategories/RestaurantCategories.module.css","components/restaurant/Statistics/Statistics.module.css","hooks/reduxHooks.tsx","store/auth.tsx","store/cart.tsx","store/modal.tsx","store/notification.tsx","hooks/useHttp.tsx","utils/loadFontAwesome.tsx","store/app.tsx","components/UI/Notification/Notification.tsx","components/UI/ScrollToTopBtn/ScrollToTopBtn.tsx","components/layout/Footer/Footer.tsx","hooks/usePreventScrolling.tsx","components/UI/Modal/Modal.tsx","hooks/useUserInput.tsx","validators/index.tsx","validators/isEmail.tsx","validators/minLength.tsx","validators/stringMatch.tsx","validators/minStringCount.tsx","validators/workTime.tsx","validators/isPhone.tsx","utils/userOptions.tsx","components/UI/Spinner/Spinner.tsx","components/auth/Login/LoginModal.tsx","components/auth/Register/RegisterModal.tsx","store/checkout.tsx","components/userProfile/UserPopup/UserPopup.tsx","components/userProfile/UserIcon/UserIcon.tsx","components/layout/Navigation/Navigation.tsx","components/layout/Layout/Layout.tsx","components/home/Benefits/Benefits.tsx","components/home/Cities/Cities.tsx","components/home/Hero/Hero.tsx","components/home/Kitchens/Kitchens.tsx","pages/Home/Home.tsx","store/restaurant.tsx","utils/getCities.tsx","utils/restaurantOptions.tsx","components/UI/MultiChoiceSelect/MultiChoiceSelect.tsx","components/restaurant/CreateRestaurant/CreateRestaurant.tsx","components/UI/HorizontalNav/HorizontalNav.tsx","components/userProfile/UserData/UserData.tsx","utils/queryHelper.tsx","components/UI/SortRestaurants/SortRestaurants.tsx","components/restaurant/DeleteRestaurantModal/DeleteRestaurantModal.tsx","components/UI/ImageSuspense/ImageSuspense.tsx","components/restaurant/RestaurantCard/RestaurantCard.tsx","components/restaurant/RestaurantList/RestaurantList.tsx","components/UI/Paginator/Paginator.tsx","components/restaurant/MyRestaurants/MyRestaurants.tsx","utils/orderOptions.tsx","utils/formatDate.tsx","components/order/OrderModal/OrderModal.tsx","components/order/OrdersListItem/OrdersListItem.tsx","components/order/OrdersList/OrdersList.tsx","components/restaurant/FavoriteRestaurants/FavoriteRestaurants.tsx","pages/UserProfile/UserProfile.tsx","utils/recipeOptions.tsx","components/recipe/AddRecipeModal/AddRecipeModal.tsx","components/recipe/DeleteRecipeModal/DeleteRecipeModal.tsx","components/recipe/Recipe/Recipe.tsx","components/restaurant/RestaurantCategoryList/RestaurantCategoryList.tsx","components/restaurant/RestaurantCategories/RestaurantCategories.tsx","components/restaurant/Statistics/CategoriesChart/CategoriesChart.tsx","components/restaurant/Statistics/SalesChart/SalesChart.tsx","components/restaurant/Statistics/Statistics.tsx","components/restaurant/RestaurantDashboard/RestaurantDashboard.tsx","components/comment/AddCommentForm/AddCommentForm.tsx","components/comment/EditCommentForm/EditCommentForm.tsx","components/comment/Comment/Comment.tsx","components/comment/CommentsModal/CommentsModal.tsx","components/restaurant/RestaurantHeader/RestaurantHeader.tsx","utils/isOpen.tsx","components/shoppingCart/CheckoutForm/CheckoutForm.tsx","components/shoppingCart/ShoppingCartListItem/ShoppingCartListItem.tsx","components/shoppingCart/ShoppingCart/ShoppingCart.tsx","guards/IsOwner.tsx","pages/RestaurantDetails/RestaurantDetails.tsx","pages/City/City.tsx","pages/MainTheme/MainTheme.tsx","guards/UserProfileGuard.tsx","App.tsx","reportWebVitals.ts","store/index.tsx","index.tsx"],"names":["module","exports","useAppDispatch","useDispatch","useAppSelector","useSelector","authSlice","createSlice","name","initialState","email","isAdmin","_id","phone","firstName","lastName","city","address","favorites","reducers","login","state","action","payload","logout","addToFavorites","push","localStorage","setItem","JSON","stringify","removeFromFavorites","index","indexOf","splice","autoLoadFavorites","getItem","parse","authActions","actions","cartSlice","restaurants","addToCart","restaurant","find","x","restaurantId","recipe","recipes","quantity","removeFromCart","recipeToRemove","autoLoadCart","cart","clearCartOrder","cartActions","modalSlice","isOpen","overlayName","open","close","changeOverlay","modalActions","notificationSlice","type","text","show","notificationActions","useHttp","dispatch","useState","isLoading","setIsLoading","error","setError","notificationState","notification","sendRequest","useCallback","requestConfig","applyData","a","fetch","url","method","credentials","headers","body","response","json","data","ok","Error","message","errorMessage","useEffect","loadFontAwesome","library","add","faHeart","faChevronUp","faChevronDown","faHeartSolid","faEdit","faTools","faTrash","faComment","faHamburger","faShoppingCart","faFacebookSquare","faInstagramSquare","faTwitterSquare","faPlus","faStar","faUtensils","faUserCircle","faMinus","faEnvelope","faUnlockAlt","faEye","faEyeSlash","faExclamationCircle","faTimesCircle","faCheckCircle","appSlice","isInitializing","initDone","appActions","Notification","setShow","nodeRef","useRef","length","closeNotificationHandler","setTimeout","textClasses","classes","greenIconClasses","icon","redIconClasses","closeIconClasses","ReactDOM","createPortal","Transition","timeout","in","mountOnEnter","animateClasses","entering","exiting","className","onClick","document","getElementById","ScrollToTopBtn","isScrolled","setIsScrolled","handleScroll","window","scrollY","addEventListener","removeEventListener","scroll","top","left","behavior","Footer","footer","to","social","href","target","rel","end","usePreventScrolling","isPreventing","setScroll","documentElement","style","setProperty","getPropertyValue","position","scrollTo","parseInt","Backdrop","closeHandler","backdrop","Modal","children","modalState","modal","modalClasses","useUserInput","validator","inputValue","setInputValue","isTouched","setIsTouched","valueIsValid","value","isValid","hasError","setValue","valueChangeHandler","e","inputBlurHandler","reset","validators","isEmail","Boolean","match","minLength","expectedLength","stringMatch","minStringCount","expectedCount","split","map","trim","filter","workTime","isPhone","REACT_APP_BASE_URL","process","userOptions","password","register","rePassword","verify","Spinner","props","size","small","medium","LoginModal","passwordIsHidden","setPasswordIsHidden","emailValue","emailIsValid","emailHasError","emailChangeHandler","emailBlurHandler","resetEmail","bind","passwordValue","passwordIsValid","passwordHasError","passwordChangeHandler","passwordBlurHandler","resetPassword","formIsValid","processResponse","togglePasswordVisibility","oldState","onSubmit","preventDefault","col","htmlFor","placeholder","id","disabled","onChange","onBlur","invite","RegisterModal","rePasswordIsHidden","setRePasswordIsHidden","rePasswordValue","rePasswordIsValid","rePasswordHasError","rePasswordChangeHandler","rePasswordBlurHandler","resetRePassword","toggleRePasswordVisibility","checkoutSlice","save","clear","checkoutActions","UserPopup","user","auth","isMounted","setIsMounted","history","useHistory","resHandler","logoutHandler","popup","inner","link","btn","UserIcon","popupIsOpen","setPopupIsOpen","containerRef","imgRef","handleOutsideClick","current","contains","handleInsideClick","nodeName","container","ref","Navigation","header","Layout","Benefits","benefits","src","alt","Cities","cities","list","Hero","hero","Kitchens","kitchens","kitchen","Home","restaurantSlice","categories","image","object_id","mainTheme","owner","workDays","workHours","rating","ratingsCount","setRestaurant","updateRating","clearRestaurant","restaurantActions","getCities","restaurantOptions","edit","deleteRestaurant","getById","getByOwner","query","getByCity","getByTheme","theme","getFavorites","addComment","comment","deleteComment","commentId","getComments","page","editComment","MultiChoiceSelect","isVisible","setIsVisible","textRef","isInvalid","selected","outsideClickHandler","element","capture","select","oldValue","join","inputStrings","selectedString","isPresent","isPresentIndex","setStateHandler","newSelected","slice","old","onSelectHandler","checked","y","CreateRestaurant","selectedCities","setSelectedCities","selectedFile","setSelectedFile","fileIsValid","setFileIsValid","nameValue","nameIsValid","nameHasError","nameChangeHandler","nameBlurHandler","nameReset","setNameValue","mainThemeValue","mainThemeIsValid","mainThemeHasError","mainThemeChangeHandler","mainThemeBlurHandler","mainThemeReset","setMainThemeValue","categoriesValue","categoriesIsValid","categoriesHasError","categoriesChangeHandler","categoriesBlurHandler","categoriesReset","setCategoriesValue","workTimeValue","workTimeIsValid","workTimeHasError","workTimeChangeHandler","workTimeBlurHandler","workTimeReset","setWorkTimeValue","replace","formData","FormData","append","options","files","HorizontalNav","links","isSticky","setIsSticky","leftScroll","setLeftScroll","rightScroll","setRightScroll","navRef","ulRef","handleYScroll","navBar","ul","styles","getComputedStyle","distance","Number","substring","getBoundingClientRect","init","scrollWidth","clientWidth","scrollLeft","listen","nav","onScroll","activeClassName","active","exact","uuidv4","UserData","isEditMode","setIsEditMode","firstNameValue","firstNameHasError","firstNameIsValid","firstNameBlurHandler","firstNameChangeHandler","setFirstNameValue","firstNameReset","lastNameValue","lastNameHasError","lastNameIsValid","lastNameBlurHandler","lastNameChangeHandler","setLastNameValue","lastNameReset","setEmailValue","emailReset","phoneValue","phoneHasError","phoneIsValid","phoneBlurHandler","phoneChangeHandler","setPhoneValue","phoneReset","cityValue","cityHasError","cityIsValid","cityBlurHandler","cityChangeHandler","setCityValue","cityReset","addressValue","addressHasError","addressIsValid","addressBlurHandler","addressChangeHandler","setAddressValue","addressReset","fillForm","toString","editClickHandler","userData","constructNewQuery","Object","entries","k","v","extractQueryObject","search","reduce","acc","curr","queryName","SortRestaurants","location","sort","currentTarget","pathname","DeleteRestaurantModal","ImageSuspense","cacheImage","imageSrc","Promise","resolve","reject","img","Image","onload","onerror","loadImage","RestaurantCard","isOwner","description","RestaurantList","Paginator","totalCount","shownCount","setQuery","lastPage","Math","ceil","navigate","newQuery","paginator","currentPage","MyRestaurants","useLocation","setRestaurants","setTotalCount","setPage","res","count","title","orderOptions","orderData","getOrders","status","deleteOrder","orderId","getOrdersCountByCategoryAndPeriod","period","getSalesByPeriod","getOrdersByOwner","formatDate","date","newDate","Date","day","getDate","month","getMonth","year","getFullYear","OrderModal","order","onSuccessDelete","onSuccessChangeStatus","promptAction","setPromptAction","formattedDate","price","items","delivery","totalPrice","toFixed","item","weight","newStatus","OrdersListItem","tagName","OrdersList","orders","setOrders","fetchOrders","FavoriteRestaurants","UserProfile","path","recipeOptions","recipeId","deleteRecipe","AddRecipeModal","ingredientsValue","ingredientsHasError","ingredientsIsValid","ingredientsBlurHandler","ingredientsChangeHandler","setIngredientsValue","priceValue","priceHasError","priceIsValid","priceBlurHandler","priceChangeHandler","setPriceValue","weightValue","weightHasError","weightIsValid","weightBlurHandler","weightChangeHandler","setWeightValue","categoryValue","categoryIsValid","categoryHasError","categoryBlurHandler","categoryChangeHandler","setCategoryValue","ingredients","category","hidden","DeleteRecipeModal","Recipe","RestaurantCategoryList","memo","categoryRecipes","RestaurantCategories","prevProps","nextProps","Chart","registerables","CategoriesChart","canvasRef","setPeriod","dataLabels","setDataLabels","categoriesCount","setCategoriesCount","labels","counts","forEach","myChart","datasets","label","backgroundColor","borderColor","borderWidth","plugins","legend","display","destroy","chart","selectedOptions","SalesChart","Statistics","statistics","RestaurantDashboard","AddCommentForm","cancelClickHandler","addCommentSubmitHandler","setFormIsLoading","commentValue","commentHasError","commentIsValid","commentChangeHandler","commentBlurHandler","form","get","rows","controls","EditCommentForm","editCommentHandler","setCommentValue","defaultChecked","Comment","commentObj","deleteCommentHandler","isDeleteMode","setIsDeleteMode","delete","CommentsModal","comments","setComments","totalCommentsCount","setTotalCommentsCount","showAddComment","setShowAddComment","formIsLoading","resId","concat","tokenExpired","observer","lastCommentElementRef","node","disconnect","IntersectionObserver","isIntersecting","oldPage","observe","newComments","i","RestaurantHeader","userIsOwner","restaurantIsInFavorites","includes","scoring","icons","workHoursStartHours","workHoursStartMinutes","workHoursEndHours","workHoursEndMinutes","workHoursStart","setHours","workHoursEnd","time","now","CheckoutForm","cartRecipes","checkoutState","checkout","nameRef","addressRef","cityRef","phoneRef","some","toLocaleLowerCase","citiesString","ShoppingCartListItem","ShoppingCart","setIsOpen","totalQuantity","backDropClickHandler","expanding","shrinking","IsOwner","app","RestaurantDetails","useParams","restaurantIsInCart","City","cityName","MainTheme","UserProfileGuard","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","render","StrictMode"],"mappings":"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","file":"static/js/main.2205b556.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"create-restaurant\":\"UserData_create-restaurant__2cSHB\",\"create-restaurant-form\":\"UserData_create-restaurant-form__iYRuf\",\"col\":\"UserData_col__fI2Hz\",\"create-restaurant-form-input\":\"UserData_create-restaurant-form-input__9VLAT\",\"placeholder\":\"UserData_placeholder__1mtIE\",\"file-btn\":\"UserData_file-btn__1A0i5\",\"file-label\":\"UserData_file-label__3d7B1\",\"file-label--invalid\":\"UserData_file-label--invalid__3ARLa\",\"input--invalid\":\"UserData_input--invalid__1rqHw\",\"input-notification\":\"UserData_input-notification__31Vjm\",\"btn-container\":\"UserData_btn-container__3RlH0\",\"btn-container-btn\":\"UserData_btn-container-btn__gYxoT\",\"btn-container-btn--cancel\":\"UserData_btn-container-btn--cancel__2Mx5y\",\"spinner-container\":\"UserData_spinner-container__2qaDI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"add-recipe\":\"AddRecipeModal_add-recipe__mWH8x\",\"col\":\"AddRecipeModal_col__cBsGW\",\"create-restaurant-form-input\":\"AddRecipeModal_create-restaurant-form-input__3TrJz\",\"placeholder\":\"AddRecipeModal_placeholder__3nBsy\",\"file-btn\":\"AddRecipeModal_file-btn__VnuCR\",\"file-label\":\"AddRecipeModal_file-label__8NiOC\",\"file-label--invalid\":\"AddRecipeModal_file-label--invalid__1kYMK\",\"input--invalid\":\"AddRecipeModal_input--invalid__1pJ4U\",\"input-notification\":\"AddRecipeModal_input-notification__1UsrQ\",\"select\":\"AddRecipeModal_select__H7Uv0\",\"opt\":\"AddRecipeModal_opt__2JQWy\",\"btn-flex\":\"AddRecipeModal_btn-flex__367BG\",\"spinner-container\":\"AddRecipeModal_spinner-container__x7b9V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cities\":\"Cities_cities__3RG0h\",\"benefits\":\"Cities_benefits__xsgtU\",\"kitchens\":\"Cities_kitchens__1Ly75\",\"cities-title\":\"Cities_cities-title__3gV_k\",\"kitchens-title\":\"Cities_kitchens-title__3iTUJ\",\"city\":\"Cities_city__2rK1D\",\"kitchen\":\"Cities_kitchen__3HblG\",\"city-name\":\"Cities_city-name__R8NJF\",\"kitchen-name\":\"Cities_kitchen-name__3uowo\",\"list\":\"Cities_list__34Gf5\",\"list-item\":\"Cities_list-item__3qyOl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"create-restaurant\":\"CreateRestaurant_create-restaurant__3bb5F\",\"create-restaurant-form\":\"CreateRestaurant_create-restaurant-form__1q2gQ\",\"col\":\"CreateRestaurant_col__1Ddvg\",\"create-restaurant-form-input\":\"CreateRestaurant_create-restaurant-form-input__3Ev0V\",\"placeholder\":\"CreateRestaurant_placeholder__2CWmk\",\"file-btn\":\"CreateRestaurant_file-btn__1wRap\",\"file-label\":\"CreateRestaurant_file-label__3dn-U\",\"file-label--invalid\":\"CreateRestaurant_file-label--invalid__1BvO1\",\"input--invalid\":\"CreateRestaurant_input--invalid__1V92H\",\"input-notification\":\"CreateRestaurant_input-notification__1aOCJ\",\"create-restaurant-btn\":\"CreateRestaurant_create-restaurant-btn__3CafE\",\"spinner-container\":\"CreateRestaurant_spinner-container__1lWW3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"AddCommentForm_form__kkAmX\",\"background\":\"AddCommentForm_background__1Qn-W\",\"col\":\"AddCommentForm_col__1bl4w\",\"placeholder\":\"AddCommentForm_placeholder__TugKE\",\"input-invalid\":\"AddCommentForm_input-invalid__29_P_\",\"input-notification\":\"AddCommentForm_input-notification__12m0U\",\"textarea\":\"AddCommentForm_textarea__37QNR\",\"rating\":\"AddCommentForm_rating__3D4yP\",\"icon\":\"AddCommentForm_icon__3MFwY\",\"controls\":\"AddCommentForm_controls__17NfT\",\"controls-btn\":\"AddCommentForm_controls-btn__2XJ_S\",\"controls-btn--danger\":\"AddCommentForm_controls-btn--danger__u4DTO\",\"error\":\"AddCommentForm_error__Vxo_Q\",\"controls-btns\":\"AddCommentForm_controls-btns__3qGO0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"EditCommentForm_form__VIGyh\",\"background\":\"EditCommentForm_background__W4Kza\",\"col\":\"EditCommentForm_col__3ot7N\",\"placeholder\":\"EditCommentForm_placeholder__21FFY\",\"input-invalid\":\"EditCommentForm_input-invalid__1fvd8\",\"input-notification\":\"EditCommentForm_input-notification__2gBnh\",\"textarea\":\"EditCommentForm_textarea__11qS4\",\"rating\":\"EditCommentForm_rating__wCJBt\",\"icon\":\"EditCommentForm_icon__1L_P3\",\"controls\":\"EditCommentForm_controls__2id9G\",\"controls-btn\":\"EditCommentForm_controls-btn__32gKl\",\"controls-btn--danger\":\"EditCommentForm_controls-btn--danger__lduEt\",\"error\":\"EditCommentForm_error__g7AGC\",\"controls-btns\":\"EditCommentForm_controls-btns__2Yatr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"register\":\"RegisterModal_register__kJbu5\",\"register-title\":\"RegisterModal_register-title__3YEr2\",\"register-form\":\"RegisterModal_register-form__3QNBW\",\"col\":\"RegisterModal_col__3R1EH\",\"placeholder\":\"RegisterModal_placeholder__14OAt\",\"input-invalid\":\"RegisterModal_input-invalid__2d3GN\",\"input-notification\":\"RegisterModal_input-notification__3dBmm\",\"error\":\"RegisterModal_error__S17Wx\",\"invite\":\"RegisterModal_invite__2gagw\",\"spinner-container\":\"RegisterModal_spinner-container__T6Zqi\",\"main-btn\":\"RegisterModal_main-btn__3q8dW\",\"icon\":\"RegisterModal_icon__CoDRJ\",\"eye\":\"RegisterModal_eye___VBjQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comment\":\"Comment_comment__2Tey_\",\"comment-header\":\"Comment_comment-header__10DPe\",\"comment-header-title\":\"Comment_comment-header-title__5aLIN\",\"rating\":\"Comment_rating__29kHZ\",\"icon\":\"Comment_icon__3UgSa\",\"icon--gray\":\"Comment_icon--gray__2f87-\",\"comment-date\":\"Comment_comment-date__14hRG\",\"comment-text\":\"Comment_comment-text__2k4Ua\",\"comment-edit-btn\":\"Comment_comment-edit-btn__2V9x4\",\"comment-delete-btn\":\"Comment_comment-delete-btn__2qsYE\",\"comment-delete-btn--red\":\"Comment_comment-delete-btn--red__10hrm\",\"delete\":\"Comment_delete__28DLz\",\"delete-title\":\"Comment_delete-title__tIGS2\",\"background\":\"Comment_background__ycVGv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__27SxS\",\"footer-list\":\"Footer_footer-list__QwNgz\",\"footer-list-item\":\"Footer_footer-list-item__-bt1R\",\"footer-list-item-link\":\"Footer_footer-list-item-link__3Rs0e\",\"end\":\"Footer_end__10zwd\",\"social\":\"Footer_social__279pX\",\"footer-wrapper\":\"Footer_footer-wrapper__wulpw\",\"footer-icon\":\"Footer_footer-icon__KRejp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"kitchens\":\"Kitchens_kitchens__2rTWi\",\"kitchens-title\":\"Kitchens_kitchens-title__25CQF\",\"kitchen\":\"Kitchens_kitchen__7KckW\",\"kitchen-name\":\"Kitchens_kitchen-name__3U50v\",\"list\":\"Kitchens_list__2qXZh\",\"list-item\":\"Kitchens_list-item__LcLS1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"LoginModal_login__3sctA\",\"login-title\":\"LoginModal_login-title__1xNJC\",\"login-form\":\"LoginModal_login-form__3aDvX\",\"col\":\"LoginModal_col__2gtji\",\"placeholder\":\"LoginModal_placeholder__1371X\",\"input-invalid\":\"LoginModal_input-invalid__vVny_\",\"input-notification\":\"LoginModal_input-notification__1fdQD\",\"error\":\"LoginModal_error__2sL9k\",\"invite\":\"LoginModal_invite__bD70N\",\"spinner-container\":\"LoginModal_spinner-container__1ZnIm\",\"main-btn\":\"LoginModal_main-btn__2SG4F\",\"icon\":\"LoginModal_icon__-KZnZ\",\"eye\":\"LoginModal_eye__352AR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"OrderModal_modal__1CYg1\",\"order-title\":\"OrderModal_order-title__2TAHE\",\"order-date\":\"OrderModal_order-date__2FSZU\",\"order-price\":\"OrderModal_order-price__2_ECq\",\"order-link\":\"OrderModal_order-link__2nrh7\",\"order-list\":\"OrderModal_order-list__1snpQ\",\"order-list-item\":\"OrderModal_order-list-item__3jsIo\",\"order-list-item-text\":\"OrderModal_order-list-item-text__2VhwW\",\"order-summary\":\"OrderModal_order-summary__1C2Zl\",\"status\":\"OrderModal_status__28um3\",\"status-red\":\"OrderModal_status-red__R74fc\",\"admin-controls\":\"OrderModal_admin-controls__3QTdW\",\"admin-controls-control\":\"OrderModal_admin-controls-control__2zH4S\",\"admin-controls-control--red\":\"OrderModal_admin-controls-control--red__avCiF\",\"delete\":\"OrderModal_delete__3F6aG\",\"delete-title\":\"OrderModal_delete-title__2VM9p\",\"loader-container\":\"OrderModal_loader-container__2Tw-T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"restaurant-content\":\"RestaurantHeader_restaurant-content__2GhPV\",\"restaurant-img\":\"RestaurantHeader_restaurant-img__2IBKf\",\"icons\":\"RestaurantHeader_icons__2ndtO\",\"scoring\":\"RestaurantHeader_scoring__Pd3Bm\",\"restaurant-content-subtitle\":\"RestaurantHeader_restaurant-content-subtitle__20Djl\",\"restaurant-content-title\":\"RestaurantHeader_restaurant-content-title__3M5Wf\",\"icon\":\"RestaurantHeader_icon__2pdiA\",\"icon--red\":\"RestaurantHeader_icon--red__3ka4F\",\"icon--blue\":\"RestaurantHeader_icon--blue__27D6V\",\"icon--gray\":\"RestaurantHeader_icon--gray__3k1g9\",\"icon--after\":\"RestaurantHeader_icon--after__3k592\",\"restaurant-content-title-wrapper\":\"RestaurantHeader_restaurant-content-title-wrapper__3330b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-title\":\"CheckoutForm_form-title__1zp5U\",\"col\":\"CheckoutForm_col__3V1z6\",\"placeholder\":\"CheckoutForm_placeholder__1xVHM\",\"form\":\"CheckoutForm_form__3dyF3\",\"input-invalid\":\"CheckoutForm_input-invalid__U918i\",\"input-notification\":\"CheckoutForm_input-notification__1nlh_\",\"main-btn\":\"CheckoutForm_main-btn__1Wz9I\",\"spinner-container\":\"CheckoutForm_spinner-container__hGHts\",\"error\":\"CheckoutForm_error__2slp9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart\":\"ShoppingCart_cart__zpX17\",\"scroll-disabled\":\"ShoppingCart_scroll-disabled__3mM5K\",\"show-header\":\"ShoppingCart_show-header__1RH0f\",\"showHeader\":\"ShoppingCart_showHeader__tQKKP\",\"expanding\":\"ShoppingCart_expanding__cl1Yi\",\"showExpanded\":\"ShoppingCart_showExpanded__29Sd4\",\"shrinking\":\"ShoppingCart_shrinking__26QIQ\",\"hideExpanded\":\"ShoppingCart_hideExpanded__31B15\",\"cart-header\":\"ShoppingCart_cart-header__wPVn4\",\"cart-header-img-wrapper\":\"ShoppingCart_cart-header-img-wrapper__3eCkM\",\"cart-header-img-wrapper-icon\":\"ShoppingCart_cart-header-img-wrapper-icon__1cjfZ\",\"cart-header-img-quantity\":\"ShoppingCart_cart-header-img-quantity__2T_7v\",\"cart-header-text\":\"ShoppingCart_cart-header-text__3TFhl\",\"cart-content\":\"ShoppingCart_cart-content__2Ev3F\",\"cart-content-recipes\":\"ShoppingCart_cart-content-recipes__13mDI\",\"cart-content-checkout\":\"ShoppingCart_cart-content-checkout__3YrUl\",\"cart-content-recipes-list\":\"ShoppingCart_cart-content-recipes-list__2-y4g\",\"cart-content-summary\":\"ShoppingCart_cart-content-summary__yTEIQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"restaurant\":\"RestaurantCard_restaurant__2JMy-\",\"restaurant-image-wrapper\":\"RestaurantCard_restaurant-image-wrapper__3Cpjp\",\"restaurant-img-wrapper-img\":\"RestaurantCard_restaurant-img-wrapper-img__Qya-6\",\"restaurant-title-wrapper\":\"RestaurantCard_restaurant-title-wrapper__L0KVS\",\"restaurant-title\":\"RestaurantCard_restaurant-title__3Yww1\",\"description\":\"RestaurantCard_description__QAlD0\",\"restaurant-score\":\"RestaurantCard_restaurant-score__2wwqV\",\"restaurant-score-icon\":\"RestaurantCard_restaurant-score-icon__2nkQw\",\"restaurant-score-icon--gray\":\"RestaurantCard_restaurant-score-icon--gray__3PAbQ\",\"restaurant-text-wrapper\":\"RestaurantCard_restaurant-text-wrapper__2YSQA\",\"icon\":\"RestaurantCard_icon__2y1q9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notification\":\"Notification_notification__1pJAJ\",\"notification-text\":\"Notification_notification-text__3Qcva\",\"notification-text--red\":\"Notification_notification-text--red__3TjWk\",\"icon\":\"Notification_icon__2zOdA\",\"icon--red\":\"Notification_icon--red__JrQGt\",\"icon--close\":\"Notification_icon--close__1Qdnu\",\"entering\":\"Notification_entering__s6Fdi\",\"showNotification\":\"Notification_showNotification__bEBK3\",\"exiting\":\"Notification_exiting__2HSQb\",\"hideNotification\":\"Notification_hideNotification__1bTM4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Navigation_header__3QyMU\",\"container\":\"Navigation_container__2Ip_f\",\"icon\":\"Navigation_icon__2yZRd\",\"navigation-wrapper\":\"Navigation_navigation-wrapper__2mAAJ\",\"nav-list\":\"Navigation_nav-list__18kn0\",\"nav-list-item\":\"Navigation_nav-list-item__2b7yn\",\"logo-link\":\"Navigation_logo-link__1349S\",\"user-icon\":\"Navigation_user-icon__1dWv0\",\"logo-link-short\":\"Navigation_logo-link-short__PF8Ct\",\"logo-link-long\":\"Navigation_logo-link-long__1v1Jf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"recipe\":\"Recipe_recipe__ND3vb\",\"recipe-img-wrapper\":\"Recipe_recipe-img-wrapper__37_PQ\",\"recipe-content\":\"Recipe_recipe-content__EZcz_\",\"recipe-content-text\":\"Recipe_recipe-content-text__2va3a\",\"recipe-icon-wrapper\":\"Recipe_recipe-icon-wrapper__kwtci\",\"recipe-admin-icons-wrapper\":\"Recipe_recipe-admin-icons-wrapper__3DCmX\",\"recipe-icon\":\"Recipe_recipe-icon__3bMFc\",\"recipe-content-weight\":\"Recipe_recipe-content-weight__2pJaB\",\"recipe-content-title\":\"Recipe_recipe-content-title__3u1-A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"benefits\":\"Benefits_benefits__2sJw3\",\"benefits-img\":\"Benefits_benefits-img__2BX0x\",\"benefits-content\":\"Benefits_benefits-content__344X_\",\"benefits-content-title\":\"Benefits_benefits-content-title__16P1y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"HorizontalNav_nav__37TwV\",\"nav--scrolled\":\"HorizontalNav_nav--scrolled__1HS42\",\"list\":\"HorizontalNav_list__1N1wy\",\"list-item\":\"HorizontalNav_list-item__1HGTg\",\"active\":\"HorizontalNav_active__2Ac5x\",\"btn-wrapper\":\"HorizontalNav_btn-wrapper__226dE\",\"btn-wrapper--right\":\"HorizontalNav_btn-wrapper--right__3Rd3K\",\"left-arrow\":\"HorizontalNav_left-arrow__1-GKM\",\"right-arrow\":\"HorizontalNav_right-arrow__VyBKd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comments\":\"CommentsModal_comments__dubot\",\"comments-title\":\"CommentsModal_comments-title__781yh\",\"comments-score\":\"CommentsModal_comments-score__r46cF\",\"comments-score-title\":\"CommentsModal_comments-score-title__3pyV6\",\"comments-score-icon\":\"CommentsModal_comments-score-icon__26h2g\",\"comments-score-icon--gray\":\"CommentsModal_comments-score-icon--gray__2c6zl\",\"comments-list\":\"CommentsModal_comments-list__2Lez8\",\"comments-list-item\":\"CommentsModal_comments-list-item__8Mj9e\",\"comments-btn\":\"CommentsModal_comments-btn__2aFGf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"UserPopup_popup__1gSEA\",\"inner\":\"UserPopup_inner__17dAK\",\"link\":\"UserPopup_link__1fFIa\",\"btn\":\"UserPopup_btn__1u2vn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hero\":\"Hero_hero__rVHf0\",\"hero-img\":\"Hero_hero-img__3iFGl\",\"hero-content\":\"Hero_hero-content__3eq5m\",\"hero-content-title\":\"Hero_hero-content-title__3LA2c\",\"hero-content-subtitle\":\"Hero_hero-content-subtitle__3L3t5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__1Ifp0\",\"paginator-page\":\"Paginator_paginator-page__1an1C\",\"paginator-btn\":\"Paginator_paginator-btn__27ajC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-item\":\"ShoppingCartListItem_cart-item__2WTuz\",\"cart-item-controls\":\"ShoppingCartListItem_cart-item-controls__1X6rw\",\"cart-item-icons\":\"ShoppingCartListItem_cart-item-icons__3BusN\",\"cart-item-text\":\"ShoppingCartListItem_cart-item-text__9vMB8\",\"icon--red\":\"ShoppingCartListItem_icon--red__3EdfM\",\"icon--green\":\"ShoppingCartListItem_icon--green__sI9E5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select\":\"MultiChoiceSelect_select__26y1F\",\"select--invalid\":\"MultiChoiceSelect_select--invalid__3ra7k\",\"list\":\"MultiChoiceSelect_list__1f1F6\",\"text\":\"MultiChoiceSelect_text__3X189\",\"input-notification\":\"MultiChoiceSelect_input-notification__1aCFU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"delete-restaurant\":\"DeleteRestaurantModal_delete-restaurant__3DS_G\",\"delete-restaurant-title\":\"DeleteRestaurantModal_delete-restaurant-title__1sIFF\",\"delete-restaurant-btn\":\"DeleteRestaurantModal_delete-restaurant-btn__2JofT\",\"delete-restaurant-btn--danger\":\"DeleteRestaurantModal_delete-restaurant-btn--danger__13Mj4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"OrdersListItem_order__3Cojh\",\"order-title\":\"OrdersListItem_order-title__2JSY4\",\"order-date\":\"OrdersListItem_order-date__2jKTr\",\"order-price\":\"OrdersListItem_order-price__bqFMz\",\"order-link\":\"OrdersListItem_order-link__12d5-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"delete-recipe\":\"DeleteRecipeModal_delete-recipe__Ed2ur\",\"delete-recipe-title\":\"DeleteRecipeModal_delete-recipe-title__3AaiN\",\"delete-recipe-btn\":\"DeleteRecipeModal_delete-recipe-btn__2c09N\",\"delete-recipe-btn--danger\":\"DeleteRecipeModal_delete-recipe-btn--danger__342VY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chart\":\"CategoriesChart_chart__3mgBD\",\"chart-title\":\"CategoriesChart_chart-title__8XmpL\",\"chart-select\":\"CategoriesChart_chart-select__3G9Qv\",\"hide\":\"CategoriesChart_hide__ZUjWo\",\"canvas\":\"CategoriesChart_canvas__kseIe\",\"no-data\":\"CategoriesChart_no-data__2-RRz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chart\":\"SalesChart_chart__1RVhp\",\"chart-title\":\"SalesChart_chart-title__18kKr\",\"chart-select\":\"SalesChart_chart-select__1HZYd\",\"hide\":\"SalesChart_hide__1z1W0\",\"canvas\":\"SalesChart_canvas__1uEds\",\"no-data\":\"SalesChart_no-data__1FNDD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__2NPG6\",\"modal\":\"Modal_modal__2ZZ73\",\"entering\":\"Modal_entering__1QYzX\",\"showModal\":\"Modal_showModal__242Hj\",\"exiting\":\"Modal_exiting__3ZYj_\",\"hideModal\":\"Modal_hideModal__1vXIw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lds-dual-ring\":\"Spinner_lds-dual-ring__6HBEi\",\"small\":\"Spinner_small__2dzd6\",\"medium\":\"Spinner_medium__N-f44\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"OrdersList_list__Zduol\",\"list-item\":\"OrdersList_list-item__2NlNg\",\"no-orders-title\":\"OrdersList_no-orders-title__3n0K3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll-btn\":\"ScrollToTopBtn_scroll-btn__1_Lag\",\"scroll-btn-icon\":\"ScrollToTopBtn_scroll-btn-icon__ovAGB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user-icon\":\"UserIcon_user-icon__2Nm-m\",\"container\":\"UserIcon_container__NqWvg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sort\":\"SortRestaurants_sort__3sZA3\",\"sort-select\":\"SortRestaurants_sort-select__3mUX3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"RestaurantList_list__3fMr7\",\"list-item\":\"RestaurantList_list-item__39XXd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"category\":\"RestaurantCategoryList_category__1wG_A\",\"category-title\":\"RestaurantCategoryList_category-title__2o2U9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader-container\":\"ImageSuspense_loader-container__G-U7j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"MyRestaurants_title__1EBHN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"category-title\":\"RestaurantCategories_category-title__144u_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statistics\":\"Statistics_statistics__2y7wH\"};","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport type { RootState, AppDispatch } from '../store';\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport IAuthState from \"../interfaces/IAuthState\";\r\n\r\nconst initialState: IAuthState = {\r\n    email: null,\r\n    isAdmin: false,\r\n    _id: null,\r\n    phone: null,\r\n    firstName: null,\r\n    lastName: null,\r\n    city: null,\r\n    address: null,\r\n    favorites: []\r\n}\r\n\r\nconst authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    reducers: {\r\n        login(state, action: PayloadAction<IAuthState>) {\r\n            state.email = action.payload.email;\r\n            state._id = action.payload._id;\r\n            state.isAdmin = action.payload.isAdmin;\r\n            state.firstName = action.payload.firstName;\r\n            state.lastName = action.payload.lastName;\r\n            state.phone = action.payload.phone;\r\n            state.city = action.payload.city;\r\n            state.address = action.payload.address;\r\n        },\r\n        logout(state) {\r\n            state.email = null;\r\n            state._id = null;\r\n            state.isAdmin = false;\r\n            state.phone = null;\r\n            state.firstName = null;\r\n            state.lastName = null;\r\n            state.city = null;\r\n            state.address = null;\r\n        },\r\n        addToFavorites(state, action: PayloadAction<{ _id: string }>) {\r\n            state.favorites.push(action.payload._id);\r\n            localStorage.setItem('favorites', JSON.stringify(state.favorites));\r\n        },\r\n        removeFromFavorites(state, action: PayloadAction<{ _id: string }>) {\r\n            const index = state.favorites.indexOf(action.payload._id);\r\n            state.favorites.splice(index, 1);\r\n            localStorage.setItem('favorites', JSON.stringify(state.favorites));\r\n        },\r\n        autoLoadFavorites(state) {\r\n            const favorites = localStorage.getItem('favorites');\r\n            if (favorites) {\r\n                state.favorites = JSON.parse(favorites);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nexport const authActions = authSlice.actions;\r\n\r\nexport default authSlice.reducer;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport ICartState from \"../interfaces/ICartState\";\r\nimport IRecipe from \"../interfaces/IRecipe\";\r\n\r\n\r\nconst initialState: ICartState = {\r\n    restaurants: []\r\n}\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState,\r\n    reducers: {\r\n        addToCart(state, action: PayloadAction<{ restaurantId: string; recipe: IRecipe }>) {\r\n            const restaurant = state.restaurants.find(x => x.restaurantId === action.payload.restaurantId);\r\n            if (restaurant) {\r\n                const recipe = restaurant.recipes.find(x => x.recipe._id === action.payload.recipe._id);\r\n                if (recipe) {\r\n                    recipe.quantity++;\r\n                } else {\r\n                    restaurant.recipes.push({ recipe: action.payload.recipe, quantity: 1 });\r\n                }\r\n            } else {\r\n                state.restaurants.push({\r\n                    restaurantId: action.payload.restaurantId,\r\n                    recipes: [{ recipe: action.payload.recipe, quantity: 1 }]\r\n                });\r\n            }\r\n            localStorage.setItem('cart', JSON.stringify(state));\r\n        },\r\n        removeFromCart(state, action: PayloadAction<{ restaurantId: string; recipe: IRecipe }>) {\r\n            const restaurant = state.restaurants.find(x => x.restaurantId === action.payload.restaurantId);\r\n            const recipeToRemove = restaurant?.recipes.find(x => x.recipe._id === action.payload.recipe._id);\r\n            if (recipeToRemove?.quantity === 1) {\r\n                const index = restaurant?.recipes.indexOf(recipeToRemove!);\r\n                restaurant?.recipes.splice(index!, 1);\r\n            } else {\r\n                recipeToRemove!.quantity--;\r\n            }\r\n            localStorage.setItem('cart', JSON.stringify(state));\r\n        },\r\n        autoLoadCart(state) {\r\n            const cart = localStorage.getItem('cart');\r\n            if (cart) {\r\n                state.restaurants = JSON.parse(cart).restaurants;\r\n            }\r\n        },\r\n        clearCartOrder(state, action: PayloadAction<{ restaurantId: string }>) {\r\n            const restaurant = state.restaurants.find(x => x.restaurantId === action.payload.restaurantId);\r\n            const index = state.restaurants.indexOf(restaurant!);\r\n            state.restaurants.splice(index, 1);\r\n            localStorage.setItem('cart', JSON.stringify(state));\r\n        }\r\n    }\r\n});\r\n\r\nexport const cartActions = cartSlice.actions;\r\n\r\nexport default cartSlice.reducer;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { IModalState } from \"../interfaces/IModalState\";\r\n\r\n\r\n\r\nconst initialState: IModalState = {\r\n    isOpen: false,\r\n    overlayName: ''\r\n}\r\n\r\nconst modalSlice = createSlice({\r\n    name: 'modal',\r\n    initialState,\r\n    reducers: {\r\n        open(state, action: PayloadAction<string>) {\r\n            state.isOpen = true;\r\n            state.overlayName = action.payload;\r\n        },\r\n        close(state) {\r\n            state.isOpen = false;\r\n            state.overlayName = '';\r\n        },\r\n        changeOverlay(state, action: PayloadAction<string>) {\r\n            state.overlayName = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nexport const modalActions = modalSlice.actions;\r\n\r\nexport default modalSlice.reducer;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport INotification from \"../interfaces/INotification\";\r\n\r\nconst initialState: INotification = {\r\n    type: '',\r\n    text: ''\r\n}\r\n\r\nconst notificationSlice = createSlice({\r\n    name: 'notification',\r\n    initialState,\r\n    reducers: {\r\n        show(state, action: PayloadAction<INotification>) {\r\n            state.type = action.payload.type || 'error';\r\n            state.text = action.payload.text || 'Something went wrong. Please try again later.';\r\n        },\r\n        close(state) {\r\n            state.type = '';\r\n            state.text = '';\r\n        }\r\n    }\r\n});\r\n\r\nexport const notificationActions = notificationSlice.actions;\r\n\r\nexport default notificationSlice.reducer;","import { useState, useCallback, useEffect } from 'react';\r\n\r\nimport { authActions } from '../store/auth';\r\nimport { modalActions } from '../store/modal';\r\nimport { notificationActions } from '../store/notification';\r\nimport { useAppDispatch, useAppSelector } from './reduxHooks';\r\n\r\ntype reqConfig = {\r\n    url: string;\r\n    method?: string;\r\n    headers?: {};\r\n    body?: any;\r\n}\r\n\r\nconst useHttp = () => {\r\n    const dispatch = useAppDispatch();\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const notificationState = useAppSelector(state => state.notification);\r\n\r\n    const sendRequest = useCallback(async (requestConfig: reqConfig, applyData) => {\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await fetch(requestConfig.url, {\r\n                method: requestConfig.method || 'GET',\r\n                credentials: 'include',\r\n                headers: requestConfig.headers || {},\r\n                body: requestConfig.body || null\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) { throw new Error(data.message); }\r\n\r\n            setIsLoading(false);\r\n            applyData(data);\r\n        } catch (err) {\r\n            let errorMessage = (err as Error).message;\r\n            if (errorMessage === 'Failed to fetch' || errorMessage === '') {\r\n                errorMessage = 'Something went wrong. Please try again later.'\r\n            }\r\n\r\n            if (errorMessage === 'Please log in') {\r\n                dispatch(authActions.logout());\r\n                dispatch(modalActions.open('login'));\r\n            }\r\n            setError(errorMessage);\r\n            setIsLoading(false);\r\n        }\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (error) {\r\n            dispatch(notificationActions.show({ type: 'error', text: error }));\r\n        }\r\n        if (notificationState.text === '') {\r\n            setError(null);\r\n        }\r\n    }, [dispatch, error, notificationState.text]);\r\n\r\n    return {\r\n        isLoading,\r\n        error,\r\n        setError,\r\n        sendRequest,\r\n    };\r\n};\r\n\r\nexport default useHttp;","import { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport {\r\n\tfaHeart as faHeartSolid,\r\n\tfaEdit,\r\n\tfaTools,\r\n\tfaTrash,\r\n\tfaHamburger,\r\n\tfaShoppingCart,\r\n\tfaChevronDown,\r\n\tfaChevronUp,\r\n\tfaPlus,\r\n\tfaStar,\r\n\tfaUtensils,\r\n\tfaMinus,\r\n\tfaUnlockAlt,\r\n    faExclamationCircle,\r\n    faTimesCircle,\r\n    faCheckCircle,\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport {\r\n\tfaHeart,\r\n\tfaComment,\r\n\tfaUserCircle,\r\n\tfaEnvelope,\r\n\tfaEye,\r\n\tfaEyeSlash,\r\n} from '@fortawesome/free-regular-svg-icons';\r\nimport { faFacebookSquare, faInstagramSquare, faTwitterSquare } from '@fortawesome/free-brands-svg-icons';\r\n\r\nconst loadFontAwesome = () => {\r\n    library.add(faHeart,\r\n        faChevronUp,\r\n        faChevronDown,\r\n        faHeartSolid,\r\n        faEdit,\r\n        faTools,\r\n        faTrash,\r\n        faComment,\r\n        faHamburger,\r\n        faShoppingCart,\r\n        faFacebookSquare,\r\n        faInstagramSquare,\r\n        faTwitterSquare,\r\n        faPlus,\r\n        faStar,\r\n        faUtensils,\r\n        faUserCircle,\r\n        faMinus,\r\n        faEnvelope,\r\n        faUnlockAlt,\r\n        faEye,\r\n        faEyeSlash,\r\n        faExclamationCircle,\r\n        faTimesCircle,\r\n        faCheckCircle,\r\n    );\r\n};\r\n\r\nexport default loadFontAwesome;","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\n\r\nconst initialState = {\r\n    isInitializing: true\r\n}\r\n\r\nconst appSlice = createSlice({\r\n    name: 'app',\r\n    initialState,\r\n    reducers: {\r\n        initDone(state) {\r\n            state.isInitializing = false;\r\n        },\r\n    }\r\n});\r\n\r\nexport const appActions = appSlice.actions;\r\n\r\nexport default appSlice.reducer;","import { useEffect, useRef, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport { notificationActions } from '../../../store/notification';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Transition } from 'react-transition-group';\r\n\r\n\r\nimport classes from './Notification.module.css';\r\n\r\nconst Notification: React.FC = () => {\r\n    const [show, setShow] = useState(false);\r\n    const dispatch = useAppDispatch();\r\n    const notificationState = useAppSelector(state => state.notification);\r\n    const nodeRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (notificationState.text.length > 0) {\r\n            setShow(true);\r\n        }\r\n    }, [notificationState.text]);\r\n\r\n    const closeNotificationHandler = () => {\r\n        setShow(false);\r\n        setTimeout(() => {\r\n            dispatch(notificationActions.close());\r\n        }, 300);\r\n    };\r\n\r\n    const text = notificationState.text;\r\n    const textClasses = `${classes['notification-text']} ${notificationState.type === 'error' ? classes['notification-text--red'] : ''}`;\r\n    const greenIconClasses = `${classes.icon}`;\r\n    const redIconClasses = `${classes.icon} ${classes['icon--red']}`;\r\n    const closeIconClasses = `${classes.icon} ${classes['icon--red']} ${classes['icon--close']}`;\r\n\r\n    return (\r\n        <>\r\n            {ReactDOM.createPortal(\r\n                <>\r\n                    {notificationState.text && <Transition timeout={300} in={show} mountOnEnter nodeRef={nodeRef}>\r\n                        {state => {\r\n                            let animateClasses = '';\r\n\r\n                            if (state === 'entering' || state === 'entered') {\r\n                                animateClasses = `${classes.entering}`;\r\n                            }\r\n\r\n                            if (state === 'exiting' || state === 'exited') {\r\n                                animateClasses = `${classes.exiting}`;\r\n                            }\r\n\r\n                            return (\r\n                                <div className={`${classes.notification} ${animateClasses}`}>\r\n                                    {notificationState.type === 'success' ?\r\n                                        <FontAwesomeIcon className={greenIconClasses} icon={['fas', 'check-circle']} /> :\r\n                                        <FontAwesomeIcon className={redIconClasses} icon={['fas', 'exclamation-circle']} />}\r\n                                    <p className={textClasses}>{text}</p>\r\n                                    <FontAwesomeIcon onClick={closeNotificationHandler} className={closeIconClasses} icon={['fas', 'times-circle']} />\r\n                                </div>\r\n                            )\r\n                        }}\r\n                    </Transition>}\r\n                </>,\r\n                document.getElementById('notification')!\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Notification;","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\n\r\nimport classes from './ScrollToTopBtn.module.css';\r\n\r\nconst ScrollToTopBtn: React.FC = () => {\r\n    const [isScrolled, setIsScrolled] = useState(false);\r\n\r\n    const handleScroll = useCallback(() => {\r\n        setIsScrolled(window.scrollY > 50);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => {\r\n            window.removeEventListener('scroll', handleScroll);\r\n        }\r\n    }, [handleScroll]);\r\n\r\n    const btnClickHandler = () => window.scroll({ top: 0, left: 0, behavior: 'smooth' });\r\n\r\n    return (\r\n        <>\r\n            {isScrolled ?\r\n                <div onClick={btnClickHandler} className={classes['scroll-btn']}>\r\n                    <FontAwesomeIcon className={classes['scroll-btn-icon']} icon={['fas', 'chevron-up']} />\r\n                </div>\r\n                : null\r\n            }\r\n        </>\r\n    )\r\n};\r\n\r\nexport default ScrollToTopBtn;","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport classes from './Footer.module.css';\r\n\r\nconst Footer: React.FC = () => {\r\n    return (\r\n        <footer className={classes.footer}>\r\n            <section className={classes['footer-wrapper']}>\r\n                <ul className={classes['footer-list']}>\r\n                    <li className={classes['footer-list-item']}>\r\n                        <Link className={classes['footer-list-item-link']} to=\"/contacts\">Contacts</Link>\r\n                    </li>\r\n                    <li className={classes['footer-list-item']}>\r\n                        <Link className={classes['footer-list-item-link']} to=\"/about-us\">About us</Link>\r\n                    </li>\r\n                    <li className={classes['footer-list-item']}>\r\n                        <Link className={classes['footer-list-item-link']} to=\"/terms-and-condition\">Terms and conditions</Link>\r\n                    </li>\r\n                </ul>\r\n                <ul className={`${classes.social} ${classes['footer-list']}`}>\r\n                    <li className={classes['footer-list-item']}>\r\n                        <a className={classes['footer-list-item-link']} href=\"http://facebook.com\" target=\"_blank\" rel=\"noreferrer\">\r\n                            <FontAwesomeIcon icon={['fab', 'facebook-square']} className={classes['footer-icon']} />\r\n                        </a>\r\n                    </li>\r\n                    <li className={classes['footer-list-item']}>\r\n                        <a className={classes['footer-list-item-link']} href=\"http://instagram.com\" target=\"_blank\" rel=\"noreferrer\">\r\n                            <FontAwesomeIcon icon={['fab', 'instagram-square']} className={classes['footer-icon']} />\r\n                        </a>\r\n                    </li>\r\n                    <li className={classes['footer-list-item']}>\r\n                        <a className={classes['footer-list-item-link']} href=\"http://twitter.com\" target=\"_blank\" rel=\"noreferrer\">\r\n                        <FontAwesomeIcon icon={['fab', 'twitter-square']} className={classes['footer-icon']} />\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n                <p className={classes.end}>&copy; This site is made with educational purpose only! No rights reserved!</p>\r\n            </section>\r\n        </footer >\r\n    );\r\n};\r\n\r\nexport default Footer;","import { useEffect } from \"react\";\r\n\r\nconst usePreventScrolling = (isPreventing: boolean) => {\r\n    const setScroll = () => {\r\n        document.documentElement.style.setProperty('--scroll-y', `${window.scrollY}px`);\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', setScroll);\r\n        if (isPreventing) {\r\n            const scrollY = document.documentElement.style.getPropertyValue('--scroll-y');\r\n            document.body.style.position = 'fixed';\r\n            document.body.style.top = `-${scrollY}`;\r\n        }\r\n\r\n        return () => {\r\n            const scrollY = document.body.style.top;\r\n            document.body.style.position = '';\r\n            document.body.style.top = '';\r\n            window.scrollTo(0, parseInt(scrollY || '0') * -1);\r\n            window.removeEventListener('scroll', setScroll);\r\n        }\r\n    }, [isPreventing]);\r\n};\r\n\r\nexport default usePreventScrolling;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { useAppDispatch, useAppSelector } from \"../../../hooks/reduxHooks\";\r\nimport { modalActions } from \"../../../store/modal\";\r\n\r\nimport { Transition } from \"react-transition-group\";\r\n\r\n\r\nimport classes from './Modal.module.css';\r\n\r\n\r\ntype BackdropProps = JSX.IntrinsicElements['div'] & {\r\n    closeHandler: () => void;\r\n}\r\n\r\nexport const Backdrop: React.FC<BackdropProps> = ({ closeHandler }) => {\r\n    return <div className={classes.backdrop} onClick={closeHandler}></div>;\r\n}\r\n\r\nconst Modal: React.FC = ({ children }) => {\r\n    const [show, setShow] = useState(false);\r\n    const nodeRef = useRef(null);\r\n    const dispatch = useAppDispatch();\r\n    const modalState = useAppSelector(state => state.modal);\r\n\r\n\r\n    useEffect(() => {\r\n        if (modalState.isOpen) {\r\n            setShow(true);\r\n        }\r\n    }, [modalState.isOpen]);\r\n\r\n    const closeHandler = () => {\r\n        setShow(false);\r\n        setTimeout(() => {\r\n            dispatch(modalActions.close());\r\n        }, 300);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!modalState.isOpen && null}\r\n            {modalState.isOpen && <Transition timeout={300} in={show} mountOnEnter nodeRef={nodeRef}>\r\n                {state => {\r\n                    let modalClasses = '';\r\n\r\n                    if (state === 'entering' || state === 'entered') {\r\n                        modalClasses = `${classes.entering}`;\r\n                    }\r\n\r\n                    if (state === 'exiting' || state === 'exited') {\r\n                        modalClasses = `${classes.exiting}`;\r\n                    }\r\n\r\n                    return (\r\n                        <>\r\n                            {state === 'exited' ?\r\n                                null :\r\n                                ReactDOM.createPortal(\r\n                                    <Backdrop closeHandler={closeHandler} />,\r\n                                    document.getElementById('backdrop-root')!\r\n                                )}\r\n                            {ReactDOM.createPortal(\r\n                                <div className={`${classes.modal} ${modalClasses}`}>\r\n                                    {children}\r\n                                </div>,\r\n                                document.getElementById('overlay-root')!\r\n                            )}\r\n                        </>\r\n                    )\r\n                }}\r\n            </Transition>}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Modal;","import React, { useState } from \"react\";\r\n\r\nconst useUserInput = (validator: (value: string) => {}) => {\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [isTouched, setIsTouched] = useState(false);\r\n\r\n    const valueIsValid = validator(inputValue);\r\n    const hasError = !valueIsValid && isTouched;\r\n\r\n    const valueChangeHandler = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\r\n        setInputValue(e.target.value);\r\n    };\r\n\r\n    const inputBlurHandler = (e: React.FocusEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\r\n        setIsTouched(true);\r\n    };\r\n\r\n    const reset = () => {\r\n        setInputValue('');\r\n        setIsTouched(false);\r\n    };\r\n\r\n    return {\r\n        value: inputValue,\r\n        isValid: valueIsValid,\r\n        hasError,\r\n        setValue: setInputValue,\r\n        valueChangeHandler,\r\n        inputBlurHandler,\r\n        reset\r\n    };\r\n};\r\n\r\nexport default useUserInput;","import { isEmail } from \"./isEmail\";\r\nimport { minLength } from \"./minLength\";\r\nimport { stringMatch } from \"./stringMatch\";\r\nimport { minStringCount } from \"./minStringCount\";\r\nimport { workTime } from \"./workTime\";\r\nimport { isPhone } from \"./isPhone\";\r\n\r\nconst validators = {\r\n    isEmail,\r\n    minLength,\r\n    stringMatch,\r\n    minStringCount,\r\n    workTime,\r\n    isPhone\r\n}\r\n\r\nexport default validators;","// eslint-disable-next-line\r\nexport const isEmail = (value: string) => Boolean(value.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/));","export const minLength = (expectedLength: number, value: string) => value.length >= expectedLength;","export const stringMatch = (value: string, match: string) => value === match;","export const minStringCount = (expectedCount: number, value: string) => {\r\n    const stringArr = value.split(',').map(x => x.trim());\r\n    return stringArr.filter(x => x !== '').length >= expectedCount;\r\n};","// eslint-disable-next-line\r\nexport const workTime = (value: string) => Boolean(value.match(/^[A-Z]{1}[a-z]+-[A-Z]{1}[a-z]+ [0-9]{1,2}:[0-9]{2}-[0-9]{2}:[0-9]{2}$/));","// eslint-disable-next-line\r\nexport const isPhone = (value: string) => Boolean(value.match(/^(\\+359|0)\\d{9}$/));","const { REACT_APP_BASE_URL } = process.env;\r\n\r\nconst login = (email: string, password: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/user/login`,\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            email: email,\r\n            password: password\r\n        })\r\n    }\r\n};\r\n\r\nconst register = (email: string, password: string, rePassword: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/user/register`,\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            email,\r\n            password,\r\n            rePassword\r\n        })\r\n    }\r\n};\r\n\r\nconst logout = () => {\r\n    return { url: `${REACT_APP_BASE_URL}/user/logout` };\r\n};\r\n\r\nconst verify = () => {\r\n    return { url: `${REACT_APP_BASE_URL}/user/verify` }\r\n}\r\n\r\nconst userOptions = {\r\n    login,\r\n    register,\r\n    logout,\r\n    verify\r\n}\r\n\r\nexport default userOptions;","import classes from './Spinner.module.css';\r\n\r\ntype SpinnerProps = JSX.IntrinsicElements['div'] & {\r\n    size?: string\r\n}\r\n\r\nconst Spinner: React.FC<SpinnerProps> = (props) => {\r\n    return (\r\n        <div className={`\r\n            ${classes['lds-dual-ring']}\r\n            ${props.size === 'small' ? classes.small : ''}\r\n            ${props.size === 'medium' ? classes.medium : ''}`}\r\n        >\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spinner;","import { FormEvent, useEffect, useState } from 'react';\r\n\r\nimport { authActions } from '../../../store/auth';\r\nimport { modalActions } from '../../../store/modal';\r\nimport { useAppDispatch } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport useUserInput from '../../../hooks/useUserInput';\r\nimport validators from '../../../validators';\r\nimport IAuthState from '../../../interfaces/IAuthState';\r\nimport userOptions from '../../../utils/userOptions';\r\nimport { notificationActions } from '../../../store/notification';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './LoginModal.module.css';\r\n\r\nconst LoginModal: React.FC = () => {\r\n    const dispatch = useAppDispatch();\r\n    const { isLoading, sendRequest } = useHttp();\r\n    const [passwordIsHidden, setPasswordIsHidden] = useState(true);\r\n    const {\r\n        value: emailValue,\r\n        isValid: emailIsValid,\r\n        hasError: emailHasError,\r\n        valueChangeHandler: emailChangeHandler,\r\n        inputBlurHandler: emailBlurHandler,\r\n        reset: resetEmail\r\n    } = useUserInput(validators.isEmail);\r\n    const {\r\n        value: passwordValue,\r\n        isValid: passwordIsValid,\r\n        hasError: passwordHasError,\r\n        valueChangeHandler: passwordChangeHandler,\r\n        inputBlurHandler: passwordBlurHandler,\r\n        reset: resetPassword\r\n    } = useUserInput(validators.minLength.bind(null, 6));\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(notificationActions.close());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    let formIsValid = false;\r\n\r\n    if (emailIsValid && passwordIsValid) {\r\n        formIsValid = true;\r\n    }\r\n\r\n    const processResponse = (response: IAuthState) => {\r\n        resetEmail();\r\n        resetPassword();\r\n        dispatch(modalActions.close());\r\n        dispatch(authActions.login(response));\r\n    }\r\n\r\n    const submitHandler = (e: FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!formIsValid) { return; }\r\n\r\n        sendRequest(userOptions.login(emailValue, passwordValue), processResponse);\r\n    }\r\n\r\n    const switchToRegister = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        dispatch(modalActions.changeOverlay('register'));\r\n    }\r\n\r\n    const togglePasswordVisibility = () => {\r\n        setPasswordIsHidden(oldState => !oldState);\r\n    };\r\n\r\n    return (\r\n        <section className={classes.login}>\r\n            <h3 className={classes['login-title']}>Sign in into Food Delivery Network</h3>\r\n            <form className={classes['login-form']} onSubmit={submitHandler}>\r\n                <div className={classes.col}>\r\n                    <label htmlFor=\"email\">\r\n                        <FontAwesomeIcon icon={['far', 'envelope']} className={classes['icon']} />\r\n                    </label>\r\n                    <input\r\n                        className={emailHasError ? classes['input-invalid'] : ''}\r\n                        placeholder=\" \"\r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        id=\"email\"\r\n                        disabled={isLoading}\r\n                        value={emailValue}\r\n                        onChange={emailChangeHandler}\r\n                        onBlur={emailBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Email</span>\r\n                    {emailHasError && <p className={classes['input-notification']}>Please enter a valid email</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <label htmlFor=\"password\">\r\n                        <FontAwesomeIcon icon={['fas', 'unlock-alt']} className={classes['icon']} />\r\n                    </label>\r\n                    <input\r\n                        className={passwordHasError ? classes['input-invalid'] : ''}\r\n                        placeholder=\" \"\r\n                        type={passwordIsHidden ? 'password' : 'text'}\r\n                        name=\"password\"\r\n                        id=\"password\"\r\n                        disabled={isLoading}\r\n                        value={passwordValue}\r\n                        onChange={passwordChangeHandler}\r\n                        onBlur={passwordBlurHandler}\r\n                    />\r\n                    {passwordIsHidden\r\n                        ? <FontAwesomeIcon icon={['far', 'eye-slash']} className={`${classes['icon']} ${classes['eye']}`} onClick={togglePasswordVisibility} />\r\n                        : <FontAwesomeIcon icon={['far', 'eye']} className={`${classes['icon']} ${classes['eye']}`} onClick={togglePasswordVisibility} />\r\n                    }\r\n                    <span className={classes.placeholder}>Password</span>\r\n                    {passwordHasError && <p className={classes['input-notification']}>At least 6 characters</p>}\r\n                </div>\r\n                <button\r\n                    className={`main-btn ${classes['main-btn']}`}\r\n                    disabled={!formIsValid || isLoading}\r\n                >\r\n                    Sign in\r\n                    {isLoading && <span className={classes['spinner-container']}><Spinner size=\"small\" /></span>}\r\n                </button>\r\n                <p className={classes.invite}>You don't have registration? <a href=\"/register\" onClick={switchToRegister}>Sign up now!</a></p>\r\n            </form>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default LoginModal;","import { FormEvent, useEffect, useState } from 'react';\r\n\r\nimport { authActions } from '../../../store/auth';\r\nimport { modalActions } from '../../../store/modal';\r\nimport { notificationActions } from '../../../store/notification';\r\nimport { useAppDispatch } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport useUserInput from '../../../hooks/useUserInput';\r\nimport validators from '../../../validators';\r\nimport IAuthState from '../../../interfaces/IAuthState';\r\nimport userOptions from '../../../utils/userOptions';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\n\r\nimport classes from './RegisterModal.module.css';\r\n\r\nconst RegisterModal: React.FC = () => {\r\n    const dispatch = useAppDispatch();\r\n    const { isLoading, sendRequest } = useHttp();\r\n    const [passwordIsHidden, setPasswordIsHidden] = useState(true);\r\n    const [rePasswordIsHidden, setRePasswordIsHidden] = useState(true);\r\n    const {\r\n        value: emailValue,\r\n        isValid: emailIsValid,\r\n        hasError: emailHasError,\r\n        valueChangeHandler: emailChangeHandler,\r\n        inputBlurHandler: emailBlurHandler,\r\n        reset: resetEmail\r\n    } = useUserInput(validators.isEmail);\r\n    const {\r\n        value: passwordValue,\r\n        isValid: passwordIsValid,\r\n        hasError: passwordHasError,\r\n        valueChangeHandler: passwordChangeHandler,\r\n        inputBlurHandler: passwordBlurHandler,\r\n        reset: resetPassword\r\n    } = useUserInput(validators.minLength.bind(null, 6));\r\n    const {\r\n        value: rePasswordValue,\r\n        isValid: rePasswordIsValid,\r\n        hasError: rePasswordHasError,\r\n        valueChangeHandler: rePasswordChangeHandler,\r\n        inputBlurHandler: rePasswordBlurHandler,\r\n        reset: resetRePassword\r\n    } = useUserInput(validators.stringMatch.bind(null, passwordValue));\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(notificationActions.close());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    let formIsValid = false;\r\n\r\n    if (emailIsValid && passwordIsValid && rePasswordIsValid && passwordValue === rePasswordValue) {\r\n        formIsValid = true;\r\n    }\r\n\r\n    const processResponse = (response: IAuthState) => {\r\n        resetEmail();\r\n        resetPassword();\r\n        resetRePassword();\r\n        dispatch(modalActions.close());\r\n        dispatch(authActions.login(response));\r\n    };\r\n\r\n    const submitHandler = (e: FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!formIsValid) { return; }\r\n\r\n        sendRequest(userOptions.register(emailValue, passwordValue, rePasswordValue), processResponse);\r\n    }\r\n\r\n    const switchToLogin = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        dispatch(modalActions.changeOverlay('login'));\r\n    }\r\n\r\n    const togglePasswordVisibility = () => {\r\n        setPasswordIsHidden(oldState => !oldState);\r\n    };\r\n\r\n    const toggleRePasswordVisibility = () => {\r\n        setRePasswordIsHidden(oldState => !oldState);\r\n    };\r\n\r\n    return (\r\n        <section className={classes.register}>\r\n            <h3 className={classes['register-title']}>Sign up into Food Delivery Network</h3>\r\n            <form className={classes['register-form']} onSubmit={submitHandler}>\r\n                <div className={classes.col}>\r\n                    <label htmlFor=\"email\">\r\n                        <FontAwesomeIcon icon={['far', 'envelope']} className={classes['icon']} />\r\n                    </label>\r\n                    <input\r\n                        className={emailHasError ? classes['input-invalid'] : ''}\r\n                        type=\"email\"\r\n                        placeholder=\" \"\r\n                        name=\"email\"\r\n                        id=\"email\"\r\n                        disabled={isLoading}\r\n                        value={emailValue}\r\n                        onChange={emailChangeHandler}\r\n                        onBlur={emailBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Email</span>\r\n                    {emailHasError && <p className={classes['input-notification']}>Please enter a valid email</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <label htmlFor=\"password\">\r\n                        <FontAwesomeIcon icon={['fas', 'unlock-alt']} className={classes['icon']} />\r\n                    </label>\r\n                    <input\r\n                        className={passwordHasError ? classes['input-invalid'] : ''}\r\n                        type={passwordIsHidden ? 'password' : 'text'}\r\n                        placeholder=\" \"\r\n                        name=\"password\"\r\n                        id=\"password\"\r\n                        value={passwordValue}\r\n                        onChange={passwordChangeHandler}\r\n                        onBlur={passwordBlurHandler}\r\n                    />\r\n                    {passwordIsHidden\r\n                        ? <FontAwesomeIcon icon={['far', 'eye-slash']} className={`${classes['icon']} ${classes['eye']}`} onClick={togglePasswordVisibility} />\r\n                        : <FontAwesomeIcon icon={['far', 'eye']} className={`${classes['icon']} ${classes['eye']}`} onClick={togglePasswordVisibility} />\r\n                    }\r\n                    <span className={classes.placeholder}>Password</span>\r\n                    {passwordHasError && <p className={classes['input-notification']}>At least 6 characters</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <label htmlFor=\"re-password\">\r\n                        <FontAwesomeIcon icon={['fas', 'unlock-alt']} className={classes['icon']} />\r\n                    </label>\r\n                    <input\r\n                        className={rePasswordHasError ? classes['input-invalid'] : ''}\r\n                        type={rePasswordIsHidden ? 'password' : 'text'}\r\n                        placeholder=\" \"\r\n                        name=\"re-password\"\r\n                        id=\"re-password\"\r\n                        value={rePasswordValue}\r\n                        onChange={rePasswordChangeHandler}\r\n                        onBlur={rePasswordBlurHandler}\r\n                    />\r\n                    {rePasswordIsHidden\r\n                        ? <FontAwesomeIcon icon={['far', 'eye-slash']} className={`${classes['icon']} ${classes['eye']}`} onClick={toggleRePasswordVisibility} />\r\n                        : <FontAwesomeIcon icon={['far', 'eye']} className={`${classes['icon']} ${classes['eye']}`} onClick={toggleRePasswordVisibility} />\r\n                    }\r\n                    <span className={classes.placeholder}>Re-password</span>\r\n                    {rePasswordHasError && <p className={classes['input-notification']}>Passwords must match</p>}\r\n                </div>\r\n                <button\r\n                    className={`main-btn ${classes['main-btn']}`}\r\n                    disabled={!formIsValid || isLoading}\r\n                >\r\n                    Sign up\r\n                    {isLoading && <span className={classes['spinner-container']}><Spinner size=\"small\" /></span>}\r\n                </button>\r\n                <p className={classes.invite}>You already have registration? <a href=\"/login\" onClick={switchToLogin}>Sign in now!</a></p>\r\n            </form>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default RegisterModal;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport ICheckout from \"../interfaces/ICheckout\";\r\n\r\nconst initialState: ICheckout = {\r\n    phone: null,\r\n    name: null,\r\n    city: null,\r\n    address: null,\r\n}\r\n\r\nconst checkoutSlice = createSlice({\r\n    name: 'checkout',\r\n    initialState,\r\n    reducers: {\r\n        save(state, action: PayloadAction<ICheckout>) {\r\n            state.phone = action.payload.phone;\r\n            state.name = action.payload.name;\r\n            state.city = action.payload.city;\r\n            state.address = action.payload.address;\r\n        },\r\n        clear(state) {\r\n            state.phone = null;\r\n            state.name = null;\r\n            state.city = null;\r\n            state.address = null;\r\n        }\r\n    }\r\n});\r\n\r\nexport const checkoutActions = checkoutSlice.actions;\r\n\r\nexport default checkoutSlice.reducer;","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport { authActions } from '../../../store/auth';\r\nimport { checkoutActions } from '../../../store/checkout';\r\nimport userOptions from '../../../utils/userOptions';\r\n\r\n\r\nimport classes from './UserPopup.module.css';\r\n\r\n\r\nconst UserPopup: React.FC = () => {\r\n    const user = useAppSelector(state => state.auth);\r\n    const [isMounted, setIsMounted] = useState(false);\r\n    const history = useHistory();\r\n    const dispatch = useAppDispatch();\r\n    const { sendRequest } = useHttp();\r\n\r\n    const resHandler = useCallback(() => null, []);\r\n\r\n    const logoutHandler = useCallback(() => {\r\n        sendRequest(userOptions.logout(), resHandler);\r\n        dispatch(authActions.logout());\r\n        dispatch(checkoutActions.clear());\r\n        history.push('/');\r\n    }, [dispatch, history, sendRequest, resHandler]);\r\n\r\n    useEffect(() => {\r\n        setIsMounted(true);\r\n        return () => setIsMounted(false);\r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.popup}>\r\n            <div className={classes.inner}>\r\n                <NavLink to={`/profile/${user._id}`} className={classes.link}>Profile</NavLink>\r\n                <NavLink to={`/profile/${user._id}/orders?page=1`} className={classes.link}>Orders</NavLink>\r\n                <NavLink to={`/profile/${user._id}/restaurants?sort=rating-desc&page=1`} className={classes.link}>My restaurants</NavLink>\r\n                {isMounted && <button className={classes.btn} onClick={logoutHandler}>Sign out</button>}\r\n                {!isMounted && <button className={classes.btn}>Sign out</button>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserPopup;","import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport UserPopup from \"../UserPopup/UserPopup\";\r\n\r\n\r\nimport classes from './UserIcon.module.css';\r\n\r\nconst UserIcon: React.FC = () => {\r\n    const [popupIsOpen, setPopupIsOpen] = useState(false);\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const imgRef = useRef<HTMLImageElement>(null);\r\n\r\n    const handleOutsideClick = (e: MouseEvent) => {\r\n        if (!containerRef.current?.contains(e.target as Node)) {\r\n            setPopupIsOpen(false);\r\n        }\r\n    }\r\n\r\n    const handleInsideClick = useCallback((e: React.MouseEvent) => {\r\n        if ((e.target as Node).nodeName === 'path' || (e.target as Node).nodeName === 'svg') {\r\n            setPopupIsOpen(oldState => !oldState);\r\n        } else if ((e.target as Node).nodeName === 'A' || (e.target as Node).nodeName === 'BUTTON') {\r\n            setPopupIsOpen(false);\r\n        } else {\r\n            setPopupIsOpen(true);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('mousedown', handleOutsideClick);\r\n        return () => document.removeEventListener('mousedown', handleOutsideClick);\r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.container} ref={containerRef} onClick={handleInsideClick}>\r\n            <span ref={imgRef}>\r\n                <FontAwesomeIcon icon={['far', 'user-circle']} className={classes['user-icon']} />\r\n            </span>\r\n            {popupIsOpen && <UserPopup />}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserIcon;","import { NavLink } from 'react-router-dom';\r\n\r\nimport { modalActions } from '../../../store/modal';\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport usePreventScrolling from '../../../hooks/usePreventScrolling';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport Modal from '../../UI/Modal/Modal';\r\nimport LoginModal from '../../auth/Login/LoginModal';\r\nimport RegisterModal from '../../auth/Register/RegisterModal';\r\nimport UserIcon from '../../userProfile/UserIcon/UserIcon';\r\n\r\n\r\nimport classes from './Navigation.module.css';\r\n\r\nconst Navigation: React.FC = () => {\r\n    const modalState = useAppSelector(state => state.modal);\r\n    const user = useAppSelector(state => state.auth);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const onLoginClick = () => {\r\n        dispatch(modalActions.open('login'));\r\n    };\r\n\r\n    usePreventScrolling(modalState.isOpen);\r\n\r\n    return (\r\n        <header className={classes.header}>\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === 'login' &&\r\n                <Modal>\r\n                    <LoginModal />\r\n                </Modal>\r\n            }\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === 'register' &&\r\n                <Modal>\r\n                    <RegisterModal />\r\n                </Modal>\r\n            }\r\n            <div className={classes.container}>\r\n                <NavLink to=\"/\" className={classes['logo-link']}>\r\n                    <FontAwesomeIcon icon={['fas', 'utensils']} className={classes.icon} />\r\n                    <h2 className={classes['logo-link-long']}>Food Delivery Network</h2>\r\n                    <h2 className={classes['logo-link-short']}>FDN</h2>\r\n                </NavLink>\r\n                <nav>\r\n                    <ul className={classes['nav-list']}>\r\n                        <li className={classes['nav-list-item']}>\r\n                            <NavLink to={user._id ? `/profile/${user._id}/favorites` : '/favorites'}>\r\n                                <FontAwesomeIcon icon={['far', 'heart']} className={classes['user-icon']} />\r\n                            </NavLink>\r\n                        </li>\r\n                        <li className={classes['nav-list-item']}>\r\n                            {user.email ?\r\n                                <UserIcon /> :\r\n                                <FontAwesomeIcon icon={['far', 'user-circle']} onClick={onLoginClick} className={classes['user-icon']} />\r\n                            }\r\n                        </li>\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Navigation;","import Notification from \"../../UI/Notification/Notification\";\r\nimport ScrollToTopBtn from \"../../UI/ScrollToTopBtn/ScrollToTopBtn\";\r\nimport Footer from \"../Footer/Footer\";\r\nimport Navigation from \"../Navigation/Navigation\";\r\n\r\nconst Layout: React.FC = (props) => {\r\n\r\n    return (\r\n        <>\r\n            <Notification />\r\n            <ScrollToTopBtn />\r\n            <Navigation />\r\n            <main>{props.children}</main>\r\n            <Footer />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Layout;","import classes from './Benefits.module.css';\r\n\r\nconst Benefits = () => {\r\n    return (\r\n        <section className={`${classes.benefits} container`}>\r\n            <article className={classes['benefits-img']}>\r\n                <img src=\"/images/firmbee-com-SpVHcbuKi6E-unsplash.jpg\" alt=\"all-devices\" />\r\n            </article>\r\n            <article className={classes['benefits-content']}>\r\n                <h1 className={classes['benefits-content-title']}>Experience our app on all your devices</h1>\r\n                <p className={classes['benefits-content-subtitle']}>Separate design for computer, tablet and phones</p>\r\n                <p className={classes['benefits-content-subtitle']}>You can find the best food near you with click of your finger</p>\r\n                <h1 className={classes['benefits-content-title']}>Fast delivery</h1>\r\n                <p className={classes['benefits-content-subtitle']}>Delivery is made at your most convenient time</p>\r\n                <h1 className={classes['benefits-content-title']}>Multiple types of payment</h1>\r\n                <p className={classes['benefits-content-subtitle']}>Pay with card, on delivery or even setup your own budget</p>\r\n            </article>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Benefits;","import { NavLink } from 'react-router-dom';\r\n\r\n\r\nimport classes from './Cities.module.css';\r\n\r\nconst Cities = () => {\r\n    return (\r\n        <section className={`${classes.cities} container`}>\r\n            <h2 className={classes['cities-title']}>Select your city</h2>\r\n            <ul className={classes.list}>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Sofia?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Sofia</p>\r\n                            <img src=\"/images/Sofia.jpg\" alt=\"sofia-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Varna?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Varna</p>\r\n                            <img src=\"/images/Varna.jpg\" alt=\"varna-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Plovdiv?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Plovdiv</p>\r\n                            <img src=\"/images/Plovdiv.jpg\" alt=\"plovdiv-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Burgas?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Burgas</p>\r\n                            <img src=\"/images/Burgas.jpg\" alt=\"burgas-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Stara-Zagora?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Stara Zagora</p>\r\n                            <img src=\"/images/Stara-zagora.jpg\" alt=\"stara-zagora-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Veliko-Tarnovo?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Veliko Tarnovo</p>\r\n                            <img src=\"/images/Veliko-tarnovo.jpg\" alt=\"veliko-tarnovo-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Pleven?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Pleven</p>\r\n                            <img src=\"/images/Pleven.jpg\" alt=\"pleven-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Blagoevgrad?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Blagoevgrad</p>\r\n                            <img src=\"/images/Blagoevgrad.jpg\" alt=\"blagoevgrad-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Ruse?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Ruse</p>\r\n                            <img src=\"/images/Ruse.jpg\" alt=\"ruse-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <article className={classes['city']}>\r\n                        <NavLink to=\"/city/Shumen?sort=rating-desc\">\r\n                            <p className={classes['city-name']}>Shumen</p>\r\n                            <img src=\"/images/Shumen.jpg\" alt=\"shumen-img\" />\r\n                        </NavLink>\r\n                    </article>\r\n                </li>\r\n            </ul>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Cities;","import classes from './Hero.module.css';\r\n\r\nconst Hero: React.FC = () => {\r\n    return(\r\n        <section className={`${classes.hero} container`}>\r\n        <article className={classes['hero-content']}>\r\n            <h1 className={classes['hero-content-title']}>Order your favorite food</h1>\r\n            <p className={classes['hero-content-subtitle']}>Enjoy fast delivery to your address or take it yourself from the restaurant\r\n            </p>\r\n            <p className={classes['hero-content-subtitle']}>Choose from the richest catalog out in the internet</p>\r\n        </article>\r\n        <article className={classes['hero-img']}>\r\n            <img src=\"/images/mahyar-motebassem-pGA4zHvpo5E-unsplash.jpg\" alt=\"food\" />\r\n        </article>\r\n    </section>\r\n    );\r\n}\r\n\r\nexport default Hero;","import { NavLink } from 'react-router-dom';\r\nimport classes from './Kitchens.module.css';\r\n\r\nconst Kitchens = () => {\r\n    return (\r\n        <section className={`${classes.kitchens} container`}>\r\n            <h2 className={classes['kitchens-title']}>Popular categories</h2>\r\n            <ul className={classes.list}>\r\n                <li className={classes['list-item']}>\r\n                    <NavLink to=\"/main-theme/Bulgarian\" className={classes.kitchen}>\r\n                        <p className={classes['kitchen-name']}>Bulgarian</p>\r\n                        <img src=\"images/bulgarian.jpg\" alt=\"bulgarian-kitchen\" />\r\n                    </NavLink >\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <NavLink to=\"/main-theme/Italian\" className={classes.kitchen}>\r\n                        <p className={classes['kitchen-name']}>Italian</p>\r\n                        <img src=\"images/kitchen-italian.jpg\" alt=\"italian-kitchen\" />\r\n                    </NavLink>\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <NavLink to=\"/main-theme/French\" className={classes.kitchen}>\r\n                        <p className={classes['kitchen-name']}>French</p>\r\n                        <img src=\"images/kitchen-french.jpg\" alt=\"french-kitchen\" />\r\n                    </NavLink>\r\n\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <NavLink to=\"/main-theme/Chinese\" className={classes.kitchen}>\r\n                        <p className={classes['kitchen-name']}>Chinese</p>\r\n                        <img src=\"images/kitchen-chinese.jpg\" alt=\"chinese-kitchen\" />\r\n                    </NavLink>\r\n\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <NavLink to=\"/main-theme/Fast Food\" className={classes.kitchen}>\r\n                        <p className={classes['kitchen-name']}>Fast Food</p>\r\n                        <img src=\"images/fast-food.jpg\" alt=\"fast-food\" />\r\n                    </NavLink>\r\n\r\n                </li>\r\n                <li className={classes['list-item']}>\r\n                    <NavLink to=\"/main-theme/Vegetarian\" className={classes.kitchen}>\r\n                        <p className={classes['kitchen-name']}>Vegetarian</p>\r\n                        <img src=\"images/vegetarian.jpg\" alt=\"vegetarian-kitchen\" />\r\n                    </NavLink>\r\n\r\n                </li>\r\n            </ul>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Kitchens;","import Benefits from '../../components/home/Benefits/Benefits';\r\nimport Cities from '../../components/home/Cities/Cities';\r\nimport Hero from '../../components/home/Hero/Hero';\r\nimport Kitchens from '../../components/home/Kitchens/Kitchens';\r\n\r\nconst Home: React.FC = () => {\r\n    return (\r\n        <>\r\n            <Hero />\r\n            <Cities />\r\n            <Benefits />\r\n            <Kitchens />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Home;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport IRestaurant from \"../interfaces/IRestaurant\";\r\n\r\nconst initialState: IRestaurant = {\r\n    _id: '',\r\n    categories: [],\r\n    cities: [],\r\n    image: {\r\n        url: '',\r\n        object_id: ''\r\n    },\r\n    mainTheme: '',\r\n    name: '',\r\n    owner: '',\r\n    workDays: [],\r\n    workHours: [],\r\n    rating: 0,\r\n    ratingsCount: 0,\r\n    recipes: []\r\n};\r\n\r\nconst restaurantSlice = createSlice({\r\n    name: 'restaurant',\r\n    initialState,\r\n    reducers: {\r\n        setRestaurant(state, action: PayloadAction<IRestaurant>) {\r\n            state._id = action.payload._id;\r\n            state.categories = action.payload.categories;\r\n            state.cities = action.payload.cities;\r\n            state.image = action.payload.image;\r\n            state.mainTheme = action.payload.mainTheme;\r\n            state.name = action.payload.name;\r\n            state.owner = action.payload.owner;\r\n            state.workDays = action.payload.workDays;\r\n            state.workHours = action.payload.workHours;\r\n            state.rating = action.payload.rating;\r\n            state.ratingsCount = action.payload.ratingsCount;\r\n            state.recipes = action.payload.recipes;\r\n        },\r\n        updateRating(state, action: PayloadAction<{ rating: number, ratingsCount: number}>) {\r\n            state.ratingsCount = action.payload.ratingsCount;\r\n            state.rating = action.payload.rating;\r\n        },\r\n        clearRestaurant(state) {\r\n            state._id = '';\r\n            state.categories = [];\r\n            state.cities = [];\r\n            state.image = { url: '', object_id: '' };\r\n            state.mainTheme = '';\r\n            state.name = '';\r\n            state.owner = '';\r\n            state.workDays = [];\r\n            state.workHours = [];\r\n            state.rating = 0;\r\n            state.ratingsCount = 0;\r\n            state.recipes = [];\r\n        }\r\n    }\r\n});\r\n\r\nexport const restaurantActions = restaurantSlice.actions;\r\n\r\nexport default restaurantSlice.reducer;","const getCities = () => {\r\n    return [\r\n        { name: 'Sofia', _id: 0 },\r\n        { name: 'Varna', _id: 1 },\r\n        { name: 'Burgas', _id: 2 },\r\n        { name: 'Plovdiv', _id: 3 },\r\n        { name: 'Shumen', _id: 4 },\r\n        { name: 'Stara-Zagora', _id: 5 },\r\n        { name: 'Blagoevgrad', _id: 6 },\r\n        { name: 'Veliko-Tarnovo', _id: 7 },\r\n        { name: 'Pleven', _id: 8 },\r\n        { name: 'Ruse', _id: 9 },\r\n    ]\r\n};\r\n\r\nexport default getCities;","const { REACT_APP_BASE_URL } = process.env;\r\n\r\nconst add = (data: FormData) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/create`,\r\n        method: 'POST',\r\n        body: data\r\n    }\r\n};\r\n\r\nconst edit = (restaurantId: string, data: FormData) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/${restaurantId}`,\r\n        method: 'PUT',\r\n        body: data\r\n    }\r\n};\r\n\r\nconst getById = (id: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/${id}`\r\n    }\r\n};\r\n\r\nconst getByOwner = (query: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/by-owner?${query}`\r\n    }\r\n};\r\n\r\nconst getByCity = (city: string, query: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant?city=${city}&${query}`\r\n    }\r\n};\r\n\r\nconst getByTheme = (theme: string, query: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant?mainTheme=${theme}&${query}`\r\n    }\r\n};\r\n\r\nconst getFavorites = (query: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/favorites?${query}`\r\n    }\r\n};\r\n\r\nconst deleteRestaurant = (restaurantId: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/${restaurantId}`,\r\n        method: 'DELETE'\r\n    }\r\n};\r\n\r\nconst addComment = (restaurantId: string, name: string, comment: string, rating: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/${restaurantId}/comment`,\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ name, comment, rating })\r\n    }\r\n};\r\n\r\nconst deleteComment = (restaurantId: string, commentId: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/${restaurantId}/comment/${commentId}`,\r\n        method: 'DELETE'\r\n    }\r\n};\r\n\r\nconst getComments = (restaurantId: string, page: number) => {\r\n    return { url: `${REACT_APP_BASE_URL}/restaurant/${restaurantId}/comment?page=${page}` }\r\n};\r\n\r\nconst editComment = (restaurantId: string, commentId: string, name: string, comment: string, rating: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/restaurant/${restaurantId}/comment/${commentId}`,\r\n        method: 'PUT',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ name, comment, rating })\r\n    }\r\n};\r\n\r\nconst restaurantOptions = {\r\n    add,\r\n    edit,\r\n    deleteRestaurant,\r\n    getById,\r\n    getByOwner,\r\n    getByCity,\r\n    getByTheme,\r\n    getFavorites,\r\n    addComment,\r\n    deleteComment,\r\n    getComments,\r\n    editComment,\r\n}\r\n\r\nexport default restaurantOptions;","import React, { Dispatch, SetStateAction, useCallback, useEffect, useRef, useState } from 'react';\r\n\r\n\r\nimport classes from './MultiChoiceSelect.module.css';\r\n\r\ntype MultiChoiceSelectProps = JSX.IntrinsicElements['div'] & {\r\n    text: string;\r\n    inputStrings: { name: string; _id: number }[];\r\n    setStateHandler: Dispatch<SetStateAction<InputStringType[]>>;\r\n    selected: InputStringType[];\r\n    disabled: boolean;\r\n}\r\n\r\nexport type InputStringType = {\r\n    name: string;\r\n    _id: number;\r\n}\r\n\r\nconst MultiChoiceSelect: React.FC<MultiChoiceSelectProps> = (props) => {\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [isTouched, setIsTouched] = useState(false);\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const textRef = useRef<HTMLDivElement>(null);\r\n    const isInvalid = isTouched && props.selected.length === 0;\r\n\r\n    const onContainerClick = (e: React.MouseEvent<HTMLElement>) => {\r\n        const element = e.target as HTMLElement;\r\n        if (element === containerRef.current || element === textRef.current) {\r\n            setIsVisible(oldValue => !oldValue);\r\n            setIsTouched(true);\r\n        }\r\n    };\r\n\r\n    const outsideClickHandler = useCallback((e: Event) => {\r\n        const element = e.target as HTMLElement;\r\n\r\n        if (!containerRef.current?.contains(element)) {\r\n            setIsVisible(false)\r\n        }\r\n    }, []);\r\n\r\n    const onSelectHandler = (_id: number) => {\r\n        const selectedString = props.inputStrings.find(x => x._id === _id) as InputStringType;\r\n        const isPresent = props.selected.find(x => x._id === _id) as InputStringType;\r\n        const isPresentIndex = props.selected.indexOf(isPresent);\r\n\r\n        if (isPresentIndex !== -1) {\r\n            props.setStateHandler(oldValue => {\r\n                const newSelected = oldValue.slice();\r\n                newSelected.splice(isPresentIndex, 1);\r\n                return newSelected;\r\n            });\r\n        } else {\r\n            props.setStateHandler(old => [selectedString, ...old]);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('click', outsideClickHandler, { capture: true });\r\n        return () => document.removeEventListener('click', outsideClickHandler, { capture: true });\r\n    }, [outsideClickHandler]);\r\n\r\n    return (\r\n        <div ref={containerRef} className={`${classes.select} ${isInvalid ? classes['select--invalid'] : ''}`} onClick={onContainerClick}>\r\n            <div ref={textRef} className={classes.text}>{props.selected.map(x => x.name).join(', ') || props.text}</div>\r\n            {isVisible && !props.disabled && <ul className={classes.list}>{props.inputStrings.map(x => {\r\n                return (\r\n                    <li key={x._id} >\r\n                        <input onChange={() => onSelectHandler(x._id)} id={x.name} type=\"checkbox\" checked={Boolean(props.selected.find(y => y._id === x._id))} />\r\n                        <label htmlFor={x.name}>{x.name}</label>\r\n                    </li>\r\n                )\r\n            })}</ul>}\r\n            {isInvalid && <p className={classes['input-notification']}>At least one city is required!</p>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MultiChoiceSelect;","import React, { ChangeEvent, useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\n\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport useUserInput from '../../../hooks/useUserInput';\r\nimport validators from '../../../validators';\r\nimport IRestaurant from '../../../interfaces/IRestaurant';\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport { restaurantActions } from '../../../store/restaurant';\r\nimport getCities from '../../../utils/getCities';\r\nimport restaurantOptions from '../../../utils/restaurantOptions';\r\n\r\nimport MultiChoiceSelect, { InputStringType } from '../../UI/MultiChoiceSelect/MultiChoiceSelect';\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\nimport classes from './CreateRestaurant.module.css';\r\n\r\ntype CreateRestaurantProps = JSX.IntrinsicElements['section'] & {\r\n    edit: boolean;\r\n}\r\n\r\nconst CreateRestaurant: React.FC<CreateRestaurantProps> = ({ edit }) => {\r\n    const dispatch = useAppDispatch();\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const cities = getCities();\r\n    const [selectedCities, setSelectedCities] = useState<InputStringType[]>([]);\r\n    const [selectedFile, setSelectedFile] = useState<File>();\r\n    const [fileIsValid, setFileIsValid] = useState(true);\r\n    const { isLoading, sendRequest } = useHttp();\r\n    const history = useHistory();\r\n    const {\r\n        value: nameValue,\r\n        isValid: nameIsValid,\r\n        hasError: nameHasError,\r\n        valueChangeHandler: nameChangeHandler,\r\n        inputBlurHandler: nameBlurHandler,\r\n        reset: nameReset,\r\n        setValue: setNameValue\r\n    } = useUserInput(validators.minLength.bind(null, 6));\r\n    const {\r\n        value: mainThemeValue,\r\n        isValid: mainThemeIsValid,\r\n        hasError: mainThemeHasError,\r\n        valueChangeHandler: mainThemeChangeHandler,\r\n        inputBlurHandler: mainThemeBlurHandler,\r\n        reset: mainThemeReset,\r\n        setValue: setMainThemeValue\r\n    } = useUserInput(validators.minLength.bind(null, 6));\r\n    const {\r\n        value: categoriesValue,\r\n        isValid: categoriesIsValid,\r\n        hasError: categoriesHasError,\r\n        valueChangeHandler: categoriesChangeHandler,\r\n        inputBlurHandler: categoriesBlurHandler,\r\n        reset: categoriesReset,\r\n        setValue: setCategoriesValue\r\n    } = useUserInput(validators.minStringCount.bind(null, 1));\r\n    const {\r\n        value: workTimeValue,\r\n        isValid: workTimeIsValid,\r\n        hasError: workTimeHasError,\r\n        valueChangeHandler: workTimeChangeHandler,\r\n        inputBlurHandler: workTimeBlurHandler,\r\n        reset: workTimeReset,\r\n        setValue: setWorkTimeValue\r\n    } = useUserInput(validators.workTime);\r\n\r\n    useEffect(() => {\r\n        if (edit) {\r\n            setNameValue(restaurant!.name);\r\n            setMainThemeValue(restaurant!.mainTheme);\r\n            setCategoriesValue(restaurant!.categories.join(','));\r\n            setWorkTimeValue(`${restaurant!.workDays.join('-')} ${restaurant!.workHours.join('-')}`);\r\n            setSelectedCities(restaurant!.cities);\r\n        }\r\n    }, [edit, restaurant, setNameValue, setMainThemeValue, setCategoriesValue, setWorkTimeValue]);\r\n\r\n    let formIsValid = false;\r\n\r\n    if (nameIsValid && mainThemeIsValid && categoriesIsValid && workTimeIsValid && fileIsValid) {\r\n        formIsValid = true;\r\n    }\r\n\r\n    const fileChangeHandler = (e: ChangeEvent) => {\r\n        const element = e.target as HTMLInputElement;\r\n        if (element.files?.length !== 0) {\r\n            setSelectedFile(element.files![0]);\r\n            setFileIsValid(true);\r\n        }\r\n    }\r\n\r\n    const processResponse = (response: IRestaurant) => {\r\n        nameReset();\r\n        mainThemeReset();\r\n        categoriesReset();\r\n        workTimeReset();\r\n        if (edit) {\r\n            dispatch(restaurantActions.setRestaurant(response));\r\n        }\r\n        history.replace(`/restaurant/${response._id}`);\r\n    };\r\n\r\n    const submitHandler = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!selectedFile && !edit) {\r\n            setFileIsValid(false);\r\n            return;\r\n        }\r\n\r\n        if (!formIsValid) { return; }\r\n\r\n        const formData = new FormData();\r\n        if (selectedFile) {\r\n            formData.append('Restaurant Cover', selectedFile!, selectedFile!.name);\r\n        } else {\r\n            formData.append('Restaurant Cover', JSON.stringify(restaurant!.image));\r\n        }\r\n        formData.append('name', nameValue);\r\n        formData.append('mainTheme', mainThemeValue);\r\n        formData.append('categories', categoriesValue);\r\n        formData.append('workTime', workTimeValue);\r\n        formData.append('cities', JSON.stringify(selectedCities));\r\n\r\n        let options = restaurantOptions.add(formData);\r\n        if (edit) {\r\n            options = restaurantOptions.edit(restaurant._id, formData);\r\n        }\r\n\r\n        sendRequest(options, processResponse);\r\n\r\n    };\r\n\r\n    return (\r\n        <section className={`${classes['create-restaurant']} container`}>\r\n            {!edit && <h2>Lets create together the best restaurant</h2>}\r\n            {edit && <h2>Edit restaurant</h2>}\r\n            <form className={classes['create-restaurant-form']} onSubmit={submitHandler}>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${nameHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"name\"\r\n                        disabled={isLoading}\r\n                        value={nameValue}\r\n                        onChange={nameChangeHandler}\r\n                        onBlur={nameBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Name of the restaurant</span>\r\n                    {nameHasError && <p className={classes['input-notification']}>Name must be at least 6 characters long!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${mainThemeHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"theme\"\r\n                        disabled={isLoading}\r\n                        value={mainThemeValue}\r\n                        onChange={mainThemeChangeHandler}\r\n                        onBlur={mainThemeBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Main theme of the restaurant</span>\r\n                    {mainThemeHasError && <p className={classes['input-notification']}>Main theme must be at least 6 characters long!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${categoriesHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"categories\"\r\n                        disabled={isLoading}\r\n                        value={categoriesValue}\r\n                        onChange={categoriesChangeHandler}\r\n                        onBlur={categoriesBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Categories separated by \",\"</span>\r\n                    {categoriesHasError && <p className={classes['input-notification']}>At least 1 category is required!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${workTimeHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"work-time\"\r\n                        disabled={isLoading}\r\n                        value={workTimeValue}\r\n                        onChange={workTimeChangeHandler}\r\n                        onBlur={workTimeBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Monday-Friday 10:00-20:00</span>\r\n                    {workTimeHasError && <p className={classes['input-notification']}>Please fill working time in the correct format!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <label className={`${classes['file-label']} ${!fileIsValid ? classes['file-label--invalid'] : ''}`} htmlFor=\"image\">\r\n                        {selectedFile ? 'File selected' : 'Upload restaurant cover image'}\r\n                    </label>\r\n                    <input\r\n                        className={classes['file-btn']}\r\n                        id=\"image\"\r\n                        type=\"file\"\r\n                        disabled={isLoading}\r\n                        name=\"image\"\r\n                        onChange={fileChangeHandler}\r\n                    />\r\n                    {!fileIsValid && <p className={classes['input-notification']}>Restaurant cover image is required!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <MultiChoiceSelect\r\n                        text={'Select cities'}\r\n                        inputStrings={cities}\r\n                        setStateHandler={setSelectedCities}\r\n                        selected={selectedCities}\r\n                        disabled={isLoading}\r\n                    />\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <button\r\n                        className={`main-btn create-btn ${classes['create-restaurant-btn']}`}\r\n                        disabled={!formIsValid || isLoading}\r\n                    >\r\n                        {edit ? 'Edit' : 'Create'}\r\n                        {isLoading && <span className={classes['spinner-container']}><Spinner size=\"small\" /></span>}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </section>\r\n    )\r\n};\r\n\r\nexport default CreateRestaurant;","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n\r\nimport classes from './HorizontalNav.module.css';\r\n\r\ntype HorizontalNavProps = JSX.IntrinsicElements['nav'] & {\r\n    links: { url: string; text: string }[];\r\n}\r\n\r\nconst HorizontalNav: React.FC<HorizontalNavProps> = ({ links }) => {\r\n    const history = useHistory();\r\n    const [isSticky, setIsSticky] = useState(false);\r\n    const [leftScroll, setLeftScroll] = useState(false);\r\n    const [rightScroll, setRightScroll] = useState(false);\r\n    const navRef = useRef<HTMLElement>(null);\r\n    const ulRef = useRef<HTMLUListElement>(null);\r\n\r\n    const handleYScroll = useCallback(() => {\r\n        const navBar = navRef.current as HTMLElement;\r\n        const ul = ulRef.current as HTMLUListElement;\r\n        if (navBar && ul) {\r\n            const styles = getComputedStyle(navBar);\r\n            const distance = Number(styles.top.substring(0, styles.top.length - 2));\r\n            setIsSticky(distance === ul.getBoundingClientRect().top && window.scrollY > 0);\r\n        }\r\n    }, []);\r\n\r\n    const onUlScroll = () => {\r\n        setLeftScroll((ulRef.current as HTMLElement).scrollLeft > 0 ? true : false);\r\n    };\r\n\r\n    const init = useCallback(() => {\r\n        const ul = ulRef.current as HTMLElement;\r\n        if (ul.scrollWidth - ul.clientWidth > 0) {\r\n            setRightScroll(true);\r\n            setLeftScroll(false);\r\n            ul.scrollLeft = 0;\r\n        } else {\r\n            setRightScroll(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        init();\r\n        history.listen(() => {\r\n            window.scrollTo({ top: 0 });\r\n        });\r\n        window.addEventListener('resize', init);\r\n        window.addEventListener(\"scroll\", handleYScroll);\r\n        return () => {\r\n            window.removeEventListener(\"scroll\", handleYScroll);\r\n            window.removeEventListener('resize', init);\r\n        };\r\n    }, [handleYScroll, init, history]);\r\n\r\n\r\n    const slideRight = () => {\r\n        const ul = ulRef.current as HTMLElement;\r\n        const nav = navRef.current as HTMLElement;\r\n        ul.scrollLeft = ul.scrollLeft + 100;\r\n\r\n        if (ul.scrollWidth - nav.clientWidth - ul.scrollLeft <= 120) {\r\n            setRightScroll(false);\r\n            ul.scrollLeft = ul.scrollLeft + 9999;\r\n        }\r\n    };\r\n\r\n    const slideLeft = () => {\r\n        const ul = ulRef.current as HTMLElement;\r\n        ul.scrollLeft = ul.scrollLeft - 100;\r\n\r\n        if (ul.scrollLeft < 120) {\r\n            ul.scrollLeft = 0;\r\n        }\r\n\r\n        if (ul.scrollWidth - ul.clientWidth > 0) {\r\n            setRightScroll(true);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <nav ref={navRef} className={`${classes.nav} ${isSticky ? classes['nav--scrolled'] : ''}`}>\r\n            <ul ref={ulRef} onScroll={onUlScroll} className={`container ${classes.list}`}>\r\n                {leftScroll &&\r\n                    <div className={classes['btn-wrapper']}>\r\n                        <button onClick={slideLeft} className={classes['left-arrow']}>&lt;</button>\r\n                    </div>\r\n                }\r\n                {links.map((link) => (\r\n                    <li onClick={() => window.scroll({ top: 0 })} key={uuidv4()}>\r\n                        <NavLink\r\n                            activeClassName={classes.active}\r\n                            className={classes['list-item']}\r\n                            to={link.url}\r\n                            exact\r\n                        >\r\n                            {link.text}\r\n                        </NavLink>\r\n                    </li>\r\n                ))}\r\n                {rightScroll &&\r\n                    <div className={`${classes['btn-wrapper']} ${classes['btn-wrapper--right']}`}>\r\n                        <button onClick={slideRight} className={classes['right-arrow']}>&gt;</button>\r\n                    </div>\r\n                }\r\n            </ul>\r\n        </nav>\r\n    )\r\n};\r\n\r\nexport default HorizontalNav;","import React, { useCallback, useEffect, useState } from 'react';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport { authActions } from '../../../store/auth';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport useUserInput from '../../../hooks/useUserInput';\r\nimport IAuthState from '../../../interfaces/IAuthState';\r\nimport validators from '../../../validators';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './UserData.module.css';\r\n\r\ntype UserDataProps = JSX.IntrinsicElements['section'] & {\r\n    edit: boolean;\r\n}\r\n\r\nconst UserData: React.FC<UserDataProps> = ({ edit }) => {\r\n    const [isEditMode, setIsEditMode] = useState(edit);\r\n    const user = useAppSelector(state => state.auth);\r\n    const dispatch = useAppDispatch();\r\n    const { isLoading, error, sendRequest } = useHttp();\r\n    const {\r\n        value: firstNameValue,\r\n        hasError: firstNameHasError,\r\n        isValid: firstNameIsValid,\r\n        inputBlurHandler: firstNameBlurHandler,\r\n        valueChangeHandler: firstNameChangeHandler,\r\n        setValue: setFirstNameValue,\r\n        reset: firstNameReset\r\n    } = useUserInput(validators.minLength.bind(null, 4));\r\n    const {\r\n        value: lastNameValue,\r\n        hasError: lastNameHasError,\r\n        isValid: lastNameIsValid,\r\n        inputBlurHandler: lastNameBlurHandler,\r\n        valueChangeHandler: lastNameChangeHandler,\r\n        setValue: setLastNameValue,\r\n        reset: lastNameReset\r\n    } = useUserInput(validators.minLength.bind(null, 4));\r\n    const {\r\n        value: emailValue,\r\n        hasError: emailHasError,\r\n        isValid: emailIsValid,\r\n        inputBlurHandler: emailBlurHandler,\r\n        valueChangeHandler: emailChangeHandler,\r\n        setValue: setEmailValue,\r\n        reset: emailReset\r\n    } = useUserInput(validators.isEmail);\r\n    const {\r\n        value: phoneValue,\r\n        hasError: phoneHasError,\r\n        isValid: phoneIsValid,\r\n        inputBlurHandler: phoneBlurHandler,\r\n        valueChangeHandler: phoneChangeHandler,\r\n        setValue: setPhoneValue,\r\n        reset: phoneReset\r\n    } = useUserInput(validators.isPhone);\r\n    const {\r\n        value: cityValue,\r\n        hasError: cityHasError,\r\n        isValid: cityIsValid,\r\n        inputBlurHandler: cityBlurHandler,\r\n        valueChangeHandler: cityChangeHandler,\r\n        setValue: setCityValue,\r\n        reset: cityReset\r\n    } = useUserInput(validators.minLength.bind(null, 4));\r\n    const {\r\n        value: addressValue,\r\n        hasError: addressHasError,\r\n        isValid: addressIsValid,\r\n        inputBlurHandler: addressBlurHandler,\r\n        valueChangeHandler: addressChangeHandler,\r\n        setValue: setAddressValue,\r\n        reset: addressReset\r\n    } = useUserInput(validators.minLength.bind(null, 4));\r\n\r\n    const fillForm = useCallback(() => {\r\n        setFirstNameValue(user.firstName || '');\r\n        setLastNameValue(user.lastName || '');\r\n        setEmailValue(user.email || '');\r\n        setPhoneValue(user.phone?.toString() || '');\r\n        setCityValue(user.city || '');\r\n        setAddressValue(user.address || '');\r\n    }, [setFirstNameValue, setLastNameValue, setEmailValue, setPhoneValue, setCityValue, setAddressValue, user]);\r\n\r\n    useEffect(() => {\r\n        fillForm();\r\n    }, [fillForm]);\r\n\r\n\r\n    const editClickHandler = () => {\r\n        setIsEditMode(true);\r\n    }\r\n\r\n    const cancelClickHandler = () => {\r\n        if (isLoading) { return; }\r\n        setIsEditMode(false);\r\n        firstNameReset();\r\n        lastNameReset();\r\n        phoneReset();\r\n        emailReset();\r\n        cityReset();\r\n        addressReset();\r\n        fillForm();\r\n    }\r\n\r\n    const processResponse = (e: IAuthState) => {\r\n        dispatch(authActions.login(e));\r\n        setIsEditMode(false);\r\n    }\r\n\r\n    const submitHandler = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!formIsValid) { return; }\r\n\r\n        const userData = {\r\n            firstName: firstNameValue,\r\n            lastName: lastNameValue,\r\n            email: emailValue,\r\n            phone: phoneValue,\r\n            city: cityValue,\r\n            address: addressValue\r\n        }\r\n\r\n        sendRequest({\r\n            url: 'http://localhost:3030/api/user/' + user._id,\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(userData)\r\n        }, processResponse);\r\n    }\r\n\r\n    const formIsValid = firstNameIsValid && lastNameIsValid && emailIsValid && phoneIsValid && cityIsValid && addressIsValid;\r\n\r\n    return (\r\n        <section className={`${classes['create-restaurant']} container`}>\r\n            <h2>{(user.firstName && user.lastName) ? `${user.firstName} ${user.lastName}` : user.email}`s profile</h2>\r\n            {error && <div>{error}</div>}\r\n            <form className={classes['create-restaurant-form']} onSubmit={submitHandler}>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${firstNameHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"first-name\"\r\n                        disabled={isLoading || !isEditMode}\r\n                        value={firstNameValue}\r\n                        onChange={firstNameChangeHandler}\r\n                        onBlur={firstNameBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>First name</span>\r\n                    {firstNameHasError && <p className={classes['input-notification']}>First name must be at least 4 characters long!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${lastNameHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"last-name\"\r\n                        disabled={isLoading || !isEditMode}\r\n                        value={lastNameValue}\r\n                        onChange={lastNameChangeHandler}\r\n                        onBlur={lastNameBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Last name</span>\r\n                    {lastNameHasError && <p className={classes['input-notification']}>Last name must be at least 4 characters long!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${emailHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"email\"\r\n                        placeholder=\" \"\r\n                        name=\"email\"\r\n                        disabled={isLoading || !isEditMode}\r\n                        value={emailValue}\r\n                        onChange={emailChangeHandler}\r\n                        onBlur={emailBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Email</span>\r\n                    {emailHasError && <p className={classes['input-notification']}>Please enter a valid email!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${phoneHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"tel\"\r\n                        placeholder=\" \"\r\n                        name=\"phone\"\r\n                        disabled={isLoading || !isEditMode}\r\n                        value={phoneValue}\r\n                        onChange={phoneChangeHandler}\r\n                        onBlur={phoneBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Phone number</span>\r\n                    {phoneHasError && <p className={classes['input-notification']}>Please enter a valid phone number!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${cityHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"city\"\r\n                        disabled={isLoading || !isEditMode}\r\n                        value={cityValue}\r\n                        onChange={cityChangeHandler}\r\n                        onBlur={cityBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>City</span>\r\n                    {cityHasError && <p className={classes['input-notification']}>City must be at least 4 characters long!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${addressHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"address\"\r\n                        disabled={isLoading || !isEditMode}\r\n                        value={addressValue}\r\n                        onChange={addressChangeHandler}\r\n                        onBlur={addressBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Address</span>\r\n                    {addressHasError && <p className={classes['input-notification']}>Address must be at least 4 characters long!</p>}\r\n                </div>\r\n                {!isEditMode &&\r\n                    <div className={`${classes['btn-container']} ${classes.col}`}>\r\n                        <button\r\n                            className={`main-btn create-btn ${classes['btn-container-btn']}`}\r\n                            onClick={editClickHandler}\r\n                            disabled={isLoading}\r\n                        >\r\n                            Edit\r\n                            {isLoading && <span className={classes['spinner-container']}><Spinner size=\"small\" /></span>}\r\n                        </button>\r\n                    </div>}\r\n                {isEditMode &&\r\n                    <div className={`${classes['btn-container']} ${classes.col}`}>\r\n                        <button\r\n                            className={`main-btn ${classes['btn-container-btn']}`}\r\n                            onClick={editClickHandler}\r\n                            disabled={!formIsValid || isLoading}\r\n                        >\r\n                            Save\r\n                            {isLoading && <span className={classes['spinner-container']}><Spinner size=\"small\" /></span>}\r\n                        </button>\r\n                        <button\r\n                            className={`main-btn ${classes['btn-container-btn']} ${classes['btn-container-btn--cancel']}`}\r\n                            onClick={cancelClickHandler}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                    </div>}\r\n            </form>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default UserData;","import IObject from \"../interfaces/IObject\";\r\n\r\nconst constructNewQuery = (query: IObject) => {\r\n    return Object.entries(query)\r\n        .map(([k, v]) => {\r\n            return `${k}=${v}`\r\n        }).join('&');\r\n};\r\n\r\nconst extractQueryObject = (search: string) => {\r\n    if (search.length > 0) {\r\n        const query = search\r\n            .split('?')[1]\r\n            .split('&')\r\n            .reduce((acc: { [key: string]: string; }, curr) => {\r\n                const [queryName, value] = curr.split('=');\r\n                acc[queryName] = value;\r\n                return acc;\r\n            }, {});\r\n        return query;\r\n    }\r\n    return {};\r\n};\r\n\r\nexport {\r\n    constructNewQuery,\r\n    extractQueryObject\r\n}","import { useHistory } from 'react-router-dom';\r\n\r\nimport { constructNewQuery, extractQueryObject } from '../../../utils/queryHelper';\r\n\r\nimport classes from './SortRestaurants.module.css';\r\n\r\nconst SortRestaurants: React.FC = () => {\r\n    const history = useHistory();\r\n    const query = extractQueryObject(history.location.search);\r\n\r\n    const onSortChange = (e: React.FormEvent<HTMLSelectElement>) => {\r\n        query.sort = e.currentTarget.value;\r\n        query.page = '1';\r\n        history.push(`${history.location.pathname}?${constructNewQuery(query)}`)\r\n    }\r\n\r\n    return (\r\n        <div className={classes.sort}>\r\n            <select className={classes['sort-select']} name=\"sort\" id=\"sort\" value={query.sort || 'rating-desc'} onChange={onSortChange}>\r\n                <option value=\"rating-desc\">Rating desc</option>\r\n                <option value=\"rating-asc\">Rating asc</option>\r\n                <option value=\"ratingsCount-desc\">Comments count desc</option>\r\n                <option value=\"ratingsCount-asc\">Comments count asc</option>\r\n            </select>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default SortRestaurants;","import { useHistory } from 'react-router';\r\n\r\nimport { useAppDispatch } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport { modalActions } from '../../../store/modal';\r\nimport restaurantOptions from '../../../utils/restaurantOptions';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './DeleteRestaurantModal.module.css';\r\n\r\ntype DeleteRestaurantModalProps = JSX.IntrinsicElements['section'] & {\r\n    _id: string;\r\n    name: string;\r\n}\r\n\r\nconst DeleteRestaurantModal: React.FC<DeleteRestaurantModalProps> = (props) => {\r\n    const dispatch = useAppDispatch();\r\n    const { sendRequest, isLoading } = useHttp();\r\n    const history = useHistory();\r\n\r\n    const cancelClickHandler = () => {\r\n        dispatch(modalActions.close());\r\n    }\r\n\r\n    const processResponse = () => {\r\n        dispatch(modalActions.close());\r\n        history.replace('/');\r\n    }\r\n\r\n    const deleteClickHandler = () => {\r\n        sendRequest(restaurantOptions.deleteRestaurant(props._id), processResponse);\r\n    }\r\n\r\n    return (\r\n        <section className={classes['delete-restaurant']}>\r\n            {!isLoading && <>\r\n                <h3 className={classes['delete-restaurant-title']}>Confirm you want to delete {props.name}?</h3>\r\n                <button onClick={deleteClickHandler} className={`${classes['delete-restaurant-btn']} ${classes['delete-restaurant-btn--danger']}`}>Delete</button>\r\n                <button onClick={cancelClickHandler} className={classes['delete-restaurant-btn']}>Cancel</button>\r\n            </>}\r\n            {isLoading && <Spinner />}\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default DeleteRestaurantModal;","import React, { useEffect, useState } from \"react\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\n\r\n\r\nimport classes from './ImageSuspense.module.css';\r\n\r\ntype ImageSuspenseProps = {\r\n    url: string;\r\n}\r\n\r\nconst ImageSuspense: React.FC<ImageSuspenseProps> = ({ children, url }) => {\r\n    const [isMounted, setIsMounted] = useState(true);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const cacheImage = async (imageSrc: string) => {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new Image();\r\n            img.src = imageSrc;\r\n            img.onload = () => resolve(null);\r\n            img.onerror = () => reject({ message: 'Failed to load image!' });\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        const loadImage = async () => {\r\n            await cacheImage(url);\r\n            setIsLoading(false);\r\n        }\r\n        if (isMounted) {\r\n            loadImage();\r\n        }\r\n        return () => {\r\n            setIsMounted(false);\r\n        }\r\n    }, [url, isMounted]);\r\n\r\n    return (\r\n        <>\r\n            {isLoading &&\r\n                <div className={classes['loader-container']}>\r\n                    <Spinner size='medium' />\r\n                </div>}\r\n            {!isLoading && children}\r\n        </>\r\n    )\r\n};\r\n\r\nexport default ImageSuspense;","import React from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport { modalActions } from '../../../store/modal';\r\nimport IRestaurant from '../../../interfaces/IRestaurant';\r\n\r\nimport Modal from '../../UI/Modal/Modal';\r\nimport DeleteRestaurantModal from '../DeleteRestaurantModal/DeleteRestaurantModal';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\n\r\nimport classes from './RestaurantCard.module.css';\r\nimport ImageSuspense from '../../UI/ImageSuspense/ImageSuspense';\r\n\r\ntype RestaurantCardProps = JSX.IntrinsicElements['article'] & {\r\n    restaurant: IRestaurant\r\n}\r\n\r\nconst RestaurantCard: React.FC<RestaurantCardProps> = ({ restaurant }) => {\r\n    const modalState = useAppSelector(state => state.modal);\r\n    const user = useAppSelector(state => state.auth);\r\n    const dispatch = useAppDispatch();\r\n    const isOwner = user._id === restaurant.owner;\r\n    const history = useHistory();\r\n\r\n    const dashboardClickHandler = (e: React.MouseEvent<HTMLElement>) => {\r\n        e.preventDefault();\r\n        history.push(`/restaurant/${restaurant._id}/dashboard`);\r\n    }\r\n\r\n    const deleteClickHandler = (e: React.MouseEvent<HTMLElement>) => {\r\n        e.preventDefault();\r\n        dispatch(modalActions.open(`delete-restaurant-${restaurant._id}`));\r\n    }\r\n\r\n    return (\r\n        <article className={classes.restaurant}>\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === `delete-restaurant-${restaurant._id}` &&\r\n                <Modal>\r\n                    <DeleteRestaurantModal _id={restaurant._id} name={restaurant.name} />\r\n                </Modal>\r\n            }\r\n            <NavLink to={`/restaurant/${restaurant._id}`}>\r\n                <article className={classes['restaurant-image-wrapper']}>\r\n                    <ImageSuspense url={restaurant.image.url}>\r\n                        <img className={classes['restaurant-img-wrapper-img']} src={restaurant.image.url} alt={`${restaurant.name} restaurant`} />\r\n                    </ImageSuspense>\r\n                </article>\r\n                <article className={classes['restaurant-title-wrapper']}>\r\n                    <h2 className={classes['restaurant-title']}>{restaurant.name}</h2>\r\n                    <p className={classes['restaurant-score']}>\r\n                        <FontAwesomeIcon icon={['fas', 'star']} className={`${classes['restaurant-score-icon']} ${restaurant.rating === 0 ? classes['restaurant-score-icon--gray'] : ''}`} />\r\n                        {restaurant.rating !== 0 && <span>{restaurant.rating}({restaurant.ratingsCount})</span>}\r\n                    </p>\r\n                </article>\r\n                <article className={classes['restaurant-text-wrapper']}>\r\n                    <p className={classes.description}>{restaurant.mainTheme}, {restaurant.categories[0]}</p>\r\n                    {isOwner && <div>\r\n                        <span onClick={dashboardClickHandler} >\r\n                            <FontAwesomeIcon icon={['fas', 'tools']} className={classes.icon} />\r\n                        </span>\r\n                        <span onClick={deleteClickHandler} >\r\n                            <FontAwesomeIcon icon={['fas', 'trash']} className={classes.icon} />\r\n                        </span>\r\n                    </div>}\r\n                </article>\r\n            </NavLink>\r\n        </article>\r\n    )\r\n};\r\n\r\nexport default RestaurantCard;","import IRestaurant from \"../../../interfaces/IRestaurant\";\r\nimport SortRestaurants from \"../../UI/SortRestaurants/SortRestaurants\";\r\n\r\nimport RestaurantCard from \"../RestaurantCard/RestaurantCard\";\r\n\r\n\r\nimport classes from './RestaurantList.module.css';\r\n\r\n\r\ntype RestaurantListProps = JSX.IntrinsicElements['ul'] & {\r\n    restaurants: IRestaurant[];\r\n}\r\n\r\nconst RestaurantList: React.FC<RestaurantListProps> = ({ restaurants }) => {\r\n    return (\r\n        <>\r\n            <SortRestaurants />\r\n            <ul className={`${classes.list}`}>\r\n                {restaurants.map(x => (\r\n                    <li key={x._id} className={classes['list-item']}>\r\n                        <RestaurantCard restaurant={x} />\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default RestaurantList;","import { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport IObject from '../../../interfaces/IObject';\r\n\r\nimport { constructNewQuery, extractQueryObject } from '../../../utils/queryHelper';\r\n\r\n\r\nimport classes from './Paginator.module.css';\r\n\r\ntype PaginatorProps = JSX.IntrinsicElements['div'] & {\r\n    totalCount: number;\r\n    shownCount: number;\r\n    page: number;\r\n    isLoading: boolean;\r\n}\r\n\r\nconst Paginator: React.FC<PaginatorProps> = ({ totalCount, shownCount, page, isLoading }) => {\r\n    const history = useHistory();\r\n    const [query, setQuery] = useState<IObject>({});\r\n    const lastPage = Math.ceil(totalCount / shownCount);\r\n\r\n    useEffect(() => {\r\n        if (history.location.search) {\r\n            setQuery(extractQueryObject(history.location.search));\r\n        }\r\n    }, [history.location.search]);\r\n\r\n    const navigate = () => {\r\n        const newQuery = constructNewQuery(query);\r\n        history.push(`${history.location.pathname}?${newQuery}`);\r\n    }\r\n\r\n    const nextPageHandler = () => {\r\n        const currentPage = Number(query['page']) || 1;\r\n        query['page'] = (currentPage + 1).toString();\r\n        navigate();\r\n    };\r\n\r\n    const previousPageHandler = () => {\r\n        const currentPage = Number(query['page']) || 1;\r\n        query['page'] = (currentPage - 1).toString();\r\n        navigate();\r\n    };\r\n\r\n    const firstPageHandler = () => {\r\n        query['page'] = '1';\r\n        navigate();\r\n    };\r\n\r\n    const lastPageHandler = () => {\r\n        query['page'] = lastPage.toString();\r\n        navigate();\r\n    }\r\n\r\n    return (\r\n        <div className={classes.paginator}>\r\n            <button className={classes['paginator-btn']} onClick={firstPageHandler} disabled={1 === page || isLoading}>&lt;&lt;</button>\r\n            <button className={classes['paginator-btn']} onClick={previousPageHandler} disabled={1 === page || isLoading}>-</button>\r\n            <span className={classes['paginator-page']}>{page}</span>\r\n            <button className={classes['paginator-btn']} onClick={nextPageHandler} disabled={lastPage === page || isLoading}>+</button>\r\n            <button className={classes['paginator-btn']} onClick={lastPageHandler} disabled={lastPage === page || isLoading}>&gt;&gt;</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Paginator;","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport useHttp from \"../../../hooks/useHttp\";\r\nimport IRestaurant from \"../../../interfaces/IRestaurant\";\r\nimport { constructNewQuery, extractQueryObject } from \"../../../utils/queryHelper\";\r\nimport restaurantOptions from \"../../../utils/restaurantOptions\";\r\n\r\nimport Spinner from \"../../UI/Spinner/Spinner\";\r\nimport RestaurantList from \"../RestaurantList/RestaurantList\";\r\nimport Paginator from \"../../UI/Paginator/Paginator\";\r\n\r\n\r\nimport classes from './MyRestaurants.module.css';\r\n\r\nconst MyRestaurants: React.FC = () => {\r\n    const location = useLocation();\r\n    const [restaurants, setRestaurants] = useState<IRestaurant[]>([]);\r\n    const { sendRequest, isLoading } = useHttp();\r\n    const [totalCount, setTotalCount] = useState(0);\r\n    const [page, setPage] = useState(1);\r\n\r\n    const processResponse = useCallback((res: { restaurants: IRestaurant[], count: number }) => {\r\n        setRestaurants(res.restaurants);\r\n        setTotalCount(res.count);\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        const query = extractQueryObject(location.search);\r\n        setPage(Number(query.page) || 1);\r\n        sendRequest(restaurantOptions.getByOwner(constructNewQuery(query)), processResponse);\r\n    }, [sendRequest, location.search, processResponse]);\r\n\r\n    return (\r\n        <section className=\"container\">\r\n            {!isLoading && restaurants.length > 0 && <RestaurantList restaurants={restaurants} />}\r\n            {!isLoading && restaurants.length === 0 && <h2 className={classes.title}>No restaurants yet!</h2>}\r\n            {isLoading && <Spinner />}\r\n            {!isLoading && totalCount > 16 && <Paginator shownCount={16} totalCount={totalCount} page={page} isLoading={isLoading} />}\r\n        </section>\r\n    )\r\n};\r\n\r\nexport default MyRestaurants;","const { REACT_APP_BASE_URL } = process.env;\r\n\r\nconst add = (orderData: {\r\n    address: string,\r\n    city: string,\r\n    name: string,\r\n    phone: string,\r\n    recipes: { recipe: string, quantity: number }[],\r\n    restaurant: string\r\n}) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/order`,\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(orderData)\r\n    }\r\n};\r\n\r\nconst getOrders = (restaurantId: string, status: string, page: number) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/order/${restaurantId}/${status}?page=${page}`\r\n    }\r\n};\r\n\r\nconst getOrdersByOwner = (page: number) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/order/my-orders?page=${page}`\r\n    }\r\n};\r\n\r\nconst deleteOrder = (orderId: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/order/${orderId}`,\r\n        method: 'DELETE'\r\n    }\r\n};\r\n\r\nconst edit = (orderId: string, status: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/order/${orderId}`,\r\n        method: 'PUT',\r\n        body: JSON.stringify({ status }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n};\r\n\r\nconst getOrdersCountByCategoryAndPeriod = (restaurantId: string, period: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/order/${restaurantId}/categories/count?period=${period}`\r\n    }\r\n};\r\n\r\nconst getSalesByPeriod = (restaurantId: string, period: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/order/${restaurantId}/sales-volumes?period=${period}`\r\n    }\r\n};\r\n\r\nconst orderOptions = {\r\n    add,\r\n    getOrders,\r\n    deleteOrder,\r\n    edit,\r\n    getOrdersCountByCategoryAndPeriod,\r\n    getSalesByPeriod,\r\n    getOrdersByOwner\r\n}\r\n\r\nexport default orderOptions;","const formatDate = (date: Date) => {\r\n    const newDate = new Date(date);\r\n    const day = newDate.getDate();\r\n    const month = newDate.getMonth() + 1;\r\n    const year = newDate.getFullYear();\r\n    return `${day}/${month}/${year}`;\r\n};\r\n\r\nexport default formatDate;","import { useEffect, useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport IOrder from '../../../interfaces/IOrder';\r\nimport { modalActions } from '../../../store/modal';\r\nimport formatDate from '../../../utils/formatDate';\r\nimport orderOptions from '../../../utils/orderOptions';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './OrderModal.module.css';\r\n\r\ntype OrderModalProps = JSX.IntrinsicElements['article'] & {\r\n    order: IOrder;\r\n    onSuccessDelete: () => void;\r\n    onSuccessChangeStatus: () => void;\r\n}\r\n\r\nconst OrderModal: React.FC<OrderModalProps> = ({ order, onSuccessDelete, onSuccessChangeStatus }) => {\r\n    const [promptAction, setPromptAction] = useState('');\r\n    const [isMounted, setIsMounted] = useState(false);\r\n    const { sendRequest, isLoading } = useHttp();\r\n    const dispatch = useAppDispatch();\r\n    const user = useAppSelector(state => state.auth);\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const formattedDate = formatDate(order.date);\r\n    const price = order.items.reduce((acc, curr) => acc + (curr.price * curr.quantity), 0);\r\n    const delivery = price > 10 ? 'Free' : '$3.99';\r\n    const totalPrice = price > 10 ? (price + 3.99).toFixed(2) : price.toFixed(2);\r\n    const isOwner = user._id === restaurant.owner;\r\n\r\n    useEffect(() => {\r\n        setIsMounted(true);\r\n        return () => {\r\n            setIsMounted(false);\r\n            dispatch(modalActions.close())\r\n        };\r\n    }, [dispatch]);\r\n\r\n    const onDeleteClickHandler = () => {\r\n        setPromptAction('delete');\r\n    };\r\n\r\n    const onChangeStatusClickHandler = () => {\r\n        setPromptAction('status');\r\n    };\r\n\r\n    const processResponse = () => {\r\n        if (isMounted) {\r\n            dispatch(modalActions.close());\r\n            if (promptAction === 'delete') {\r\n                onSuccessDelete();\r\n            } else {\r\n                onSuccessChangeStatus();\r\n            }\r\n            setPromptAction('');\r\n        }\r\n    }\r\n\r\n    const deleteSubmitHandler = () => {\r\n        sendRequest(orderOptions.deleteOrder(order._id), processResponse);\r\n    };\r\n\r\n    const changeStatusSubmitHandler = () => {\r\n        const newStatus = order.status === 'pending' ? 'completed' : 'pending';\r\n        sendRequest(orderOptions.edit(order._id, newStatus), processResponse);\r\n    };\r\n\r\n    const cancelClickHandler = () => {\r\n        setPromptAction('');\r\n    };\r\n\r\n    return (\r\n        <article className={classes['modal']}>\r\n            <div>\r\n                <h3 className={classes['order-title']}>\r\n                    Order from:\r\n                    <NavLink to={`/restaurant/${order.restaurant._id}`} className={classes['order-link']}>\r\n                        {order.restaurant.name}\r\n                    </NavLink>\r\n                </h3>\r\n                <p className={classes['order-date']}>{formattedDate}</p>\r\n            </div>\r\n            <ul className={classes['order-list']}>\r\n                {order.items.map(x => (\r\n                    <li key={x.item._id} className={classes['order-list-item']}>\r\n                        <p className={classes['order-list-item-text']}>{x.item.name} ({x.item.weight}g) - {x.price} x {x.quantity}</p>\r\n                        <span>${x.price * x.quantity}</span>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n            <article className={classes['order-summary']}>\r\n                <p>\r\n                    <span>Order:</span>\r\n                    <span>${price.toFixed(2)}</span>\r\n                </p>\r\n                <p>\r\n                    <span>Delivery:</span>\r\n                    <span>{delivery}</span>\r\n                </p>\r\n                <p>\r\n                    <span>Total:</span>\r\n                    <span>${totalPrice}</span>\r\n                </p>\r\n                <p>\r\n                    <span>Status:</span>\r\n                    <span className={order.status === 'pending' ? classes['status-red'] : classes['status']}>{order.status}</span>\r\n                </p>\r\n                <p>\r\n                    <span>Address:</span>\r\n                    <span>{order.city}, {order.address}</span>\r\n                </p>\r\n                <p>\r\n                    <span>Customer:</span>\r\n                    <span>{order.name}</span>\r\n                </p>\r\n                <p>\r\n                    <span>Contact phone:</span>\r\n                    <span>{order.phone.toString().length === 9 ? `+359${order.phone}` : order.phone}</span>\r\n                </p>\r\n            </article>\r\n            {isOwner && !promptAction &&\r\n                <article className={classes['admin-controls']}>\r\n                    <button onClick={onChangeStatusClickHandler} className={classes['admin-controls-control']}>Change status</button>\r\n                    <button onClick={onDeleteClickHandler} className={`${classes['admin-controls-control']} ${classes['admin-controls-control--red']}`}>Delete</button>\r\n                </article>}\r\n            {isOwner && promptAction && !isLoading &&\r\n                <article className={classes['delete']}>\r\n                    <h4 className={classes['delete-title']}>Are you sure?</h4>\r\n                    <button\r\n                        className={`${classes['admin-controls-control--red']} ${classes['admin-controls-control']}`}\r\n                        onClick={promptAction === 'delete' ? deleteSubmitHandler : changeStatusSubmitHandler}\r\n                    >\r\n                        {promptAction === 'delete' ? 'Delete' : 'Change'}\r\n                    </button>\r\n                    <button className={classes['admin-controls-control']} onClick={cancelClickHandler}>Cancel</button>\r\n                </article>}\r\n            {isOwner && promptAction && isLoading && <div className={classes['loader-container']}><Spinner size=\"medium\" /></div>}\r\n        </article>\r\n    );\r\n};\r\n\r\nexport default OrderModal;","import { NavLink } from 'react-router-dom';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport { modalActions } from '../../../store/modal';\r\nimport IOrder from '../../../interfaces/IOrder';\r\nimport formatDate from '../../../utils/formatDate';\r\n\r\nimport Modal from '../../UI/Modal/Modal';\r\nimport OrderModal from '../OrderModal/OrderModal';\r\n\r\n\r\nimport classes from './OrdersListItem.module.css';\r\n\r\ntype OrdersListItemProps = JSX.IntrinsicElements['article'] & {\r\n    order: IOrder;\r\n    onSuccessDelete: () => void;\r\n    onSuccessChangeStatus: () => void;\r\n}\r\n\r\nconst OrdersListItem: React.FC<OrdersListItemProps> = ({ order, onSuccessDelete, onSuccessChangeStatus }) => {\r\n    const dispatch = useAppDispatch();\r\n    const modalState = useAppSelector(state => state.modal);\r\n    const formattedDate = formatDate(order.date);\r\n\r\n    const orderClickHandler = (e: React.MouseEvent) => {\r\n        if ((e.target as HTMLElement).tagName === \"A\") { return; }\r\n        dispatch(modalActions.open(`order-${order._id}`));\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === `order-${order._id}` &&\r\n                <Modal>\r\n                    <OrderModal\r\n                        order={order}\r\n                        onSuccessDelete={onSuccessDelete}\r\n                        onSuccessChangeStatus={onSuccessChangeStatus}\r\n                    />\r\n                </Modal>\r\n            }\r\n            <article onClick={orderClickHandler} className={classes['order']}>\r\n                <div>\r\n                    <h3 className={classes['order-title']}>\r\n                        Order from:\r\n                        <NavLink to={`/restaurant/${order.restaurant._id}`} className={classes['order-link']}>\r\n                            {order.restaurant.name}\r\n                        </NavLink>\r\n                    </h3>\r\n                    <p className={classes['order-date']}>{formattedDate}</p>\r\n                </div>\r\n                <div>\r\n                    <p className={classes['order-price']}>${(order.items.reduce((acc, curr) => acc + (curr.price * curr.quantity), 0)).toFixed(2)}</p>\r\n                </div>\r\n            </article>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default OrdersListItem;","import { useCallback, useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { useAppSelector } from '../../../hooks/reduxHooks';\r\n\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport IOrder from '../../../interfaces/IOrder';\r\nimport orderOptions from '../../../utils/orderOptions';\r\nimport Paginator from '../../UI/Paginator/Paginator';\r\nimport { extractQueryObject } from '../../../utils/queryHelper';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\nimport OrdersListItem from '../OrdersListItem/OrdersListItem';\r\n\r\n\r\nimport classes from './OrdersList.module.css';\r\n\r\ntype OrdersListProps = JSX.IntrinsicElements['ul'] & {\r\n    status: string;\r\n}\r\n\r\nconst OrdersList: React.FC<OrdersListProps> = ({ status }) => {\r\n    const [orders, setOrders] = useState<IOrder[]>([]);\r\n    const [page, setPage] = useState(1);\r\n    const [totalCount, setTotalCount] = useState(0);\r\n    const { sendRequest, isLoading } = useHttp();\r\n    const history = useHistory();\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n\r\n    useEffect(() => {\r\n        setPage(1);\r\n        setTotalCount(0);\r\n        setOrders([]);\r\n    }, [status]);\r\n\r\n    useEffect(() => {\r\n        if (history.location.search) {\r\n            const query = extractQueryObject(history.location.search);\r\n            setPage(Number(query.page) || 1);\r\n        }\r\n    }, [history.location.search]);\r\n\r\n    const processResponse = useCallback((res: { orders: IOrder[], count: number }) => {\r\n        setOrders(res.orders);\r\n        setTotalCount(res.count);\r\n    }, []);\r\n\r\n    const fetchOrders = useCallback(() => {\r\n        let options = orderOptions.getOrders(restaurant._id, status, page);\r\n        if (status === 'my-orders') {\r\n            options = orderOptions.getOrdersByOwner(page);\r\n        }\r\n        sendRequest(options, processResponse);\r\n    }, [sendRequest, restaurant._id, status, processResponse, page]);\r\n\r\n    useEffect(() => {\r\n        fetchOrders();\r\n    }, [fetchOrders]);\r\n\r\n    const onSuccessDelete = () => {\r\n        fetchOrders();\r\n    };\r\n\r\n    const onSuccessChangeStatus = () => {\r\n        fetchOrders();\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <ul className={classes.list}>\r\n                {isLoading && <Spinner />}\r\n                {!isLoading && orders.length > 0 &&\r\n                    orders.map(x => (\r\n                        <li key={x._id} className={classes['list-item']}>\r\n                            <OrdersListItem\r\n                                order={x}\r\n                                onSuccessDelete={onSuccessDelete}\r\n                                onSuccessChangeStatus={onSuccessChangeStatus}\r\n                            />\r\n                        </li>\r\n                    ))}\r\n                {!isLoading && orders.length === 0 &&\r\n                    <h2 className={classes['no-orders-title']}>No orders yet!</h2>}\r\n            </ul>\r\n            {totalCount > 20 && <Paginator totalCount={totalCount} shownCount={20} page={page} isLoading={isLoading} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OrdersList;","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport { useAppSelector } from \"../../../hooks/reduxHooks\";\r\nimport useHttp from \"../../../hooks/useHttp\";\r\nimport IRestaurant from \"../../../interfaces/IRestaurant\";\r\nimport restaurantOptions from \"../../../utils/restaurantOptions\";\r\nimport { constructNewQuery, extractQueryObject } from \"../../../utils/queryHelper\";\r\n\r\nimport Spinner from \"../../UI/Spinner/Spinner\";\r\nimport RestaurantList from \"../RestaurantList/RestaurantList\";\r\nimport Paginator from \"../../UI/Paginator/Paginator\";\r\n\r\nconst FavoriteRestaurants: React.FC = () => {\r\n    const location = useLocation();\r\n    const [restaurants, setRestaurants] = useState<IRestaurant[]>([]);\r\n    const { sendRequest, isLoading } = useHttp();\r\n    const [totalCount, setTotalCount] = useState(0);\r\n    const [page, setPage] = useState(1);\r\n    const user = useAppSelector(state => state.auth);\r\n\r\n    const processResponse = useCallback((res: { restaurants: IRestaurant[], count: number }) => {\r\n        setRestaurants(res.restaurants);\r\n        setTotalCount(res.count);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const query = extractQueryObject(location.search);\r\n        query.favorites = JSON.stringify(user.favorites);\r\n        setPage(Number(query.page) || 1);\r\n        sendRequest(restaurantOptions.getFavorites(constructNewQuery(query)), processResponse);\r\n    }, [sendRequest, user.favorites, processResponse, location.search]);\r\n\r\n    return (\r\n        <div className={'container'}>\r\n            {isLoading && <Spinner />}\r\n            {!isLoading && restaurants.length > 0 && <RestaurantList restaurants={restaurants} />}\r\n            {!isLoading && restaurants.length === 0 && <h2>No favorite restaurants yet!</h2>}\r\n            {!isLoading && totalCount > 16 && <Paginator shownCount={16} totalCount={totalCount} page={page} isLoading={isLoading} />}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default FavoriteRestaurants;","import { Route, Switch } from \"react-router\";\r\n\r\nimport { useAppSelector } from \"../../hooks/reduxHooks\";\r\n\r\nimport CreateRestaurant from \"../../components/restaurant/CreateRestaurant/CreateRestaurant\";\r\nimport HorizontalNav from \"../../components/UI/HorizontalNav/HorizontalNav\";\r\nimport UserData from \"../../components/userProfile/UserData/UserData\";\r\nimport MyRestaurants from \"../../components/restaurant/MyRestaurants/MyRestaurants\";\r\nimport OrdersList from \"../../components/order/OrdersList/OrdersList\";\r\nimport FavoriteRestaurants from \"../../components/restaurant/FavoriteRestaurants/FavoriteRestaurants\";\r\n\r\nconst UserProfile: React.FC = () => {\r\n    const user = useAppSelector(state => state.auth);\r\n\r\n    const links: { url: string; text: string }[] = [\r\n        { url: `/profile/${user._id}`, text: 'Profile' },\r\n        { url: `/profile/${user._id}/create-restaurant`, text: 'Create Restaurant' },\r\n        { url: `/profile/${user._id}/restaurants?sort=rating-desc&page=1`, text: 'My restaurants' },\r\n        { url: `/profile/${user._id}/favorites?sort=rating-desc&page=1`, text: 'Favorite restaurants' },\r\n        { url: `/profile/${user._id}/orders?page=1`, text: 'My orders' },\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            <HorizontalNav links={links} />\r\n            <Switch>\r\n                <Route path=\"/profile/:id\" exact>\r\n                    <UserData edit={false} />\r\n                </Route>\r\n                <Route path=\"/profile/:id/create-restaurant\">\r\n                    <CreateRestaurant edit={false} />\r\n                </Route>\r\n                <Route path=\"/profile/:id/orders\">\r\n                    <OrdersList status={\"my-orders\"} />\r\n                </Route>\r\n                <Route path=\"/profile/:id/restaurants\">\r\n                    <MyRestaurants />\r\n                </Route>\r\n                <Route path=\"/profile/:id/favorites\">\r\n                    <FavoriteRestaurants />\r\n                </Route>\r\n            </Switch>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default UserProfile;","const { REACT_APP_BASE_URL } = process.env;\r\n\r\nconst add = (restaurantId: string, data: FormData) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/recipe/${restaurantId}/add-recipe`,\r\n        method: 'POST',\r\n        body: data\r\n    }\r\n};\r\n\r\nconst edit = (recipeId: string, restaurantId: string, data: FormData) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/recipe/${recipeId}/${restaurantId}`,\r\n        method: 'PUT',\r\n        body: data\r\n    }\r\n};\r\n\r\nconst deleteRecipe = (recipeId: string, restaurantId: string) => {\r\n    return {\r\n        url: `${REACT_APP_BASE_URL}/recipe/${recipeId}/${restaurantId}`,\r\n        method: 'DELETE'\r\n    }\r\n};\r\n\r\nconst recipeOptions = {\r\n    add,\r\n    edit,\r\n    deleteRecipe\r\n}\r\n\r\nexport default recipeOptions;","import React, { ChangeEvent, useEffect, useState } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport { modalActions } from '../../../store/modal';\r\nimport { restaurantActions } from '../../../store/restaurant';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport useUserInput from '../../../hooks/useUserInput';\r\nimport validators from '../../../validators';\r\nimport IRestaurant from '../../../interfaces/IRestaurant';\r\nimport IRecipe from '../../../interfaces/IRecipe';\r\nimport recipeOptions from '../../../utils/recipeOptions';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './AddRecipeModal.module.css';\r\n\r\ntype AddRecipeModalProps = JSX.IntrinsicElements['section'] & {\r\n    recipe?: IRecipe;\r\n}\r\n\r\nconst AddRecipeModal: React.FC<AddRecipeModalProps> = ({ recipe }) => {\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const dispatch = useAppDispatch();\r\n    const { isLoading, sendRequest } = useHttp();\r\n    const [selectedFile, setSelectedFile] = useState<File>();\r\n    const [fileIsValid, setFileIsValid] = useState(true);\r\n    const {\r\n        value: nameValue,\r\n        hasError: nameHasError,\r\n        isValid: nameIsValid,\r\n        inputBlurHandler: nameBlurHandler,\r\n        valueChangeHandler: nameChangeHandler,\r\n        setValue: setNameValue\r\n    } = useUserInput(validators.minLength.bind(null, 5));\r\n    const {\r\n        value: ingredientsValue,\r\n        hasError: ingredientsHasError,\r\n        isValid: ingredientsIsValid,\r\n        inputBlurHandler: ingredientsBlurHandler,\r\n        valueChangeHandler: ingredientsChangeHandler,\r\n        setValue: setIngredientsValue\r\n    } = useUserInput(validators.minStringCount.bind(null, 3));\r\n    const {\r\n        value: priceValue,\r\n        hasError: priceHasError,\r\n        isValid: priceIsValid,\r\n        inputBlurHandler: priceBlurHandler,\r\n        valueChangeHandler: priceChangeHandler,\r\n        setValue: setPriceValue\r\n    } = useUserInput(validators.minLength.bind(null, 1));\r\n    const {\r\n        value: weightValue,\r\n        hasError: weightHasError,\r\n        isValid: weightIsValid,\r\n        inputBlurHandler: weightBlurHandler,\r\n        valueChangeHandler: weightChangeHandler,\r\n        setValue: setWeightValue\r\n    } = useUserInput(validators.minLength.bind(null, 1));\r\n    const {\r\n        value: categoryValue,\r\n        isValid: categoryIsValid,\r\n        hasError: categoryHasError,\r\n        inputBlurHandler: categoryBlurHandler,\r\n        valueChangeHandler: categoryChangeHandler,\r\n        setValue: setCategoryValue\r\n    } = useUserInput(validators.minLength.bind(null, 1));\r\n\r\n    let formIsValid = nameIsValid && ingredientsIsValid && priceIsValid && categoryIsValid && weightIsValid;\r\n\r\n    useEffect(() => {\r\n        if (recipe) {\r\n            setNameValue(recipe.name);\r\n            setIngredientsValue(recipe.ingredients.join(','));\r\n            setPriceValue(recipe.price.toString());\r\n            setWeightValue(recipe.weight.toString());\r\n            setCategoryValue(recipe.category);\r\n        }\r\n    }, [recipe, setNameValue, setIngredientsValue, setPriceValue, setWeightValue, setCategoryValue]);\r\n\r\n    const fileChangeHandler = (e: ChangeEvent) => {\r\n        const element = e.target as HTMLInputElement;\r\n        if (element.files?.length !== 0) {\r\n            setSelectedFile(element.files![0]);\r\n            setFileIsValid(true);\r\n        }\r\n    }\r\n\r\n    const processResponse = (res: IRestaurant) => {\r\n        dispatch(restaurantActions.setRestaurant(res));\r\n        dispatch(modalActions.close());\r\n    }\r\n\r\n    const submitHandler = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!selectedFile && !recipe) {\r\n            setFileIsValid(false);\r\n            return;\r\n        }\r\n\r\n        if (!formIsValid) { return; }\r\n\r\n        const formData = new FormData();\r\n        if (selectedFile) {\r\n            formData.append('Recipe image', selectedFile!, selectedFile!.name);\r\n        } else {\r\n            formData.append('Recipe image', JSON.stringify(recipe!.image));\r\n        }\r\n        formData.append('name', nameValue);\r\n        formData.append('ingredients', ingredientsValue);\r\n        formData.append('price', priceValue);\r\n        formData.append('category', categoryValue);\r\n        formData.append('weight', weightValue);\r\n\r\n        let options = recipeOptions.add(restaurant._id, formData);\r\n\r\n        if (recipe) {\r\n            options = recipeOptions.edit(recipe._id, restaurant._id, formData);\r\n        }\r\n\r\n        sendRequest(options, processResponse)\r\n    }\r\n    return (\r\n        <section className={`${classes['add-recipe']} container`}>\r\n            <h2>Add recipe</h2>\r\n            <form className={classes['create-restaurant-form']} onSubmit={submitHandler}>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${nameHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"name\"\r\n                        disabled={isLoading}\r\n                        value={nameValue}\r\n                        onChange={nameChangeHandler}\r\n                        onBlur={nameBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Recipe name</span>\r\n                    {nameHasError && <p className={classes['input-notification']}>At least 5 characters long!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${ingredientsHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"text\"\r\n                        placeholder=\" \"\r\n                        name=\"name\"\r\n                        disabled={isLoading}\r\n                        value={ingredientsValue}\r\n                        onChange={ingredientsChangeHandler}\r\n                        onBlur={ingredientsBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Ingredients separated by \",\"</span>\r\n                    {ingredientsHasError && <p className={classes['input-notification']}>At least 3!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${weightHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"number\"\r\n                        placeholder=\" \"\r\n                        name=\"name\"\r\n                        disabled={isLoading}\r\n                        value={weightValue}\r\n                        onChange={weightChangeHandler}\r\n                        onBlur={weightBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Weight in grams</span>\r\n                    {weightHasError && <p className={classes['input-notification']}>Weight is required!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={`${classes['create-restaurant-form-input']} ${priceHasError ? classes['input--invalid'] : ''}`}\r\n                        type=\"number\"\r\n                        placeholder=\" \"\r\n                        name=\"name\"\r\n                        disabled={isLoading}\r\n                        value={priceValue}\r\n                        onChange={priceChangeHandler}\r\n                        onBlur={priceBlurHandler}\r\n                    />\r\n                    <span className={classes.placeholder}>Price</span>\r\n                    {priceHasError && <p className={classes['input-notification']}>Price is required!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <select\r\n                        className={`${classes.select} ${categoryHasError ? classes['input--invalid'] : ''}`}\r\n                        value={categoryValue}\r\n                        disabled={isLoading}\r\n                        onChange={categoryChangeHandler}\r\n                        onBlur={categoryBlurHandler}\r\n                    >\r\n                        <option hidden>Select category</option>\r\n                        {restaurant.categories.map(x => <option key={uuidv4()}>{x}</option>)}\r\n                    </select>\r\n                    {categoryHasError && <p className={classes['input-notification']}>Category is required!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <label className={`${classes['file-label']} ${!fileIsValid ? classes['file-label--invalid'] : ''}`} htmlFor=\"image\">\r\n                        {selectedFile ? 'File selected' : 'Upload restaurant cover image'}\r\n                    </label>\r\n                    <input\r\n                        className={classes['file-btn']}\r\n                        id=\"image\"\r\n                        type=\"file\"\r\n                        name=\"image\"\r\n                        disabled={isLoading}\r\n                        onChange={fileChangeHandler}\r\n                    />\r\n                    {!fileIsValid && <p className={classes['input-notification']}>Restaurant cover image is required!</p>}\r\n                </div>\r\n                {!recipe &&\r\n                    <button className={`main-btn create-btn ${classes['btn-flex']}`} disabled={!formIsValid || isLoading}>\r\n                        Add\r\n                        {isLoading && <span className={classes['spinner-container']}><Spinner size=\"small\" /></span>}\r\n                    </button>}\r\n                {recipe &&\r\n                    <button className={`main-btn create-btn ${classes['btn-flex']}`} disabled={!formIsValid || isLoading}>\r\n                        Edit\r\n                        {isLoading && <span className={classes['spinner-container']}><Spinner size=\"small\" /></span>}\r\n                    </button>}\r\n\r\n            </form>\r\n        </section>\r\n    )\r\n};\r\n\r\nexport default AddRecipeModal;","import { useAppDispatch } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport IRestaurant from '../../../interfaces/IRestaurant';\r\nimport { modalActions } from '../../../store/modal';\r\nimport { restaurantActions } from '../../../store/restaurant';\r\nimport recipeOptions from '../../../utils/recipeOptions';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './DeleteRecipeModal.module.css';\r\n\r\ntype DeleteRecipeModalProps = JSX.IntrinsicElements['section'] & {\r\n    _id: string;\r\n    name: string;\r\n    restaurantId: string;\r\n}\r\n\r\nconst DeleteRecipeModal: React.FC<DeleteRecipeModalProps> = ({ _id, name, restaurantId }) => {\r\n    const dispatch = useAppDispatch();\r\n    const { sendRequest, isLoading } = useHttp();\r\n\r\n    const processResponse = (res: IRestaurant) => {\r\n        dispatch(modalActions.close());\r\n        dispatch(restaurantActions.setRestaurant(res));\r\n    };\r\n\r\n    const deleteClickHandler = () => {\r\n        sendRequest(recipeOptions.deleteRecipe(_id, restaurantId), processResponse);\r\n    };\r\n\r\n    const cancelClickHandler = () => {\r\n        dispatch(modalActions.close());\r\n    };\r\n\r\n    return (\r\n        <section className={classes['delete-recipe']}>\r\n            {!isLoading && <>\r\n                <h3 className={classes['delete-recipe-title']}>Confirm you want to delete {name}?</h3>\r\n                <button onClick={deleteClickHandler} className={`${classes['delete-recipe-btn']} ${classes['delete-recipe-btn--danger']}`}>Delete</button>\r\n                <button onClick={cancelClickHandler} className={classes['delete-recipe-btn']}>Cancel</button>\r\n            </>}\r\n            {isLoading && <Spinner size=\"medium\" />}\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default DeleteRecipeModal;","import { modalActions } from '../../../store/modal';\r\nimport { cartActions } from '../../../store/cart';\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport IRecipe from '../../../interfaces/IRecipe';\r\n\r\nimport AddRecipeModal from '../AddRecipeModal/AddRecipeModal';\r\nimport DeleteRecipeModal from '../DeleteRecipeModal/DeleteRecipeModal';\r\nimport Modal from '../../UI/Modal/Modal';\r\nimport ImageSuspense from '../../UI/ImageSuspense/ImageSuspense';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\n\r\nimport classes from './Recipe.module.css';\r\n\r\ntype RecipeProps = JSX.IntrinsicElements['article'] & {\r\n    recipe: IRecipe;\r\n}\r\n\r\nconst Recipe: React.FC<RecipeProps> = ({ recipe }) => {\r\n    const dispatch = useAppDispatch();\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const user = useAppSelector(state => state.auth);\r\n    const modalState = useAppSelector(state => state.modal);\r\n    const isAdmin = restaurant.owner === user._id;\r\n\r\n    const deleteClickHandler = () => {\r\n        dispatch(modalActions.open(`delete-recipe-${recipe._id}`));\r\n    }\r\n\r\n    const editClickHandler = () => {\r\n        dispatch(modalActions.open(`edit-recipe/${recipe._id}`));\r\n    }\r\n\r\n    const addToCartHandler = () => {\r\n        dispatch(cartActions.addToCart({ restaurantId: restaurant._id, recipe }));\r\n    }\r\n\r\n    return (\r\n        <article className={classes.recipe}>\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === `delete-recipe-${recipe._id}` &&\r\n                <Modal>\r\n                    <DeleteRecipeModal\r\n                        _id={recipe._id}\r\n                        name={recipe.name}\r\n                        restaurantId={restaurant._id}\r\n                    />\r\n                </Modal>\r\n            }\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === `edit-recipe/${recipe._id}` &&\r\n                <Modal>\r\n                    <AddRecipeModal recipe={recipe} />\r\n                </Modal>\r\n            }\r\n            <div className={classes['recipe-img-wrapper']}>\r\n                <ImageSuspense url={recipe.image.url}>\r\n                    <img src={recipe.image.url} alt={recipe.name} />\r\n                </ImageSuspense>\r\n            </div>\r\n            <div className={classes['recipe-content']}>\r\n                <h3 className={classes['recipe-content-title']}>{recipe.name} <span className={classes['recipe-content-weight']}>({recipe.weight}g)</span></h3>\r\n                <p className={classes['recipe-content-text']}>{recipe.ingredients.join(', ')}</p>\r\n                <p>${recipe.price}</p>\r\n            </div>\r\n            <div onClick={addToCartHandler} className={classes['recipe-icon-wrapper']}>\r\n                <FontAwesomeIcon icon={['fas', 'plus']} className={classes['recipe-icon']} />\r\n            </div>\r\n            {isAdmin && <div className={classes['recipe-admin-icons-wrapper']}>\r\n                <FontAwesomeIcon icon={['fas', 'edit']} onClick={editClickHandler} className={classes['recipe-icon']} />\r\n                <FontAwesomeIcon icon={['fas', 'trash']} onClick={deleteClickHandler} className={classes['recipe-icon']} />\r\n            </div>}\r\n        </article>\r\n    )\r\n}\r\n\r\nexport default Recipe;","import { memo } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport IRecipe from '../../../interfaces/IRecipe';\r\n\r\nimport Recipe from '../../recipe/Recipe/Recipe';\r\n\r\n\r\nimport classes from './RestaurantCategoryList.module.css';\r\n\r\ntype RestaurantCategoryListProps = JSX.IntrinsicElements['div'] & {\r\n    categoryRecipes: IRecipe[];\r\n}\r\n\r\nconst RestaurantCategoryList: React.FC<RestaurantCategoryListProps> = memo(({ categoryRecipes }) => {\r\n    return (\r\n        <div className={`${classes.category}`}>\r\n            <h2 className={classes['category-title']}>{categoryRecipes[0].category}</h2>\r\n            {categoryRecipes.map(recipe => <Recipe key={uuidv4()} recipe={recipe} />)}\r\n        </div>\r\n    )\r\n});\r\n\r\nexport default RestaurantCategoryList;","import { memo } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport IRecipe from '../../../interfaces/IRecipe';\r\n\r\nimport RestaurantCategoryList from \"../RestaurantCategoryList/RestaurantCategoryList\";\r\n\r\n\r\nimport classes from './RestaurantCategories.module.css';\r\n\r\n\r\ntype RestaurantCategoriesProps = JSX.IntrinsicElements['section'] & {\r\n    categories: string[];\r\n    recipes: IRecipe[];\r\n}\r\n\r\nconst RestaurantCategories: React.FC<RestaurantCategoriesProps> = memo(\r\n    ({ categories, recipes }) => {\r\n        return (\r\n            <section className={'container'}>\r\n                {categories.map(category => {\r\n                    const categoryRecipes = recipes.filter(recipe => recipe.category === category);\r\n\r\n                    if (categoryRecipes.length > 0) {\r\n                        return <RestaurantCategoryList key={uuidv4()} categoryRecipes={categoryRecipes} />;\r\n                    } else {\r\n                        return <div key={uuidv4()}>\r\n                            <h3 className={classes['category-title']}>{category}</h3>\r\n                            <p>No recipes yet!</p>\r\n                        </div>;\r\n                    }\r\n                })}\r\n            </section>\r\n        )\r\n    },\r\n    (prevProps, nextProps) => prevProps.categories === nextProps.categories);\r\n\r\nexport default RestaurantCategories;","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { Chart, registerables } from 'chart.js';\r\n\r\nimport useHttp from '../../../../hooks/useHttp';\r\nimport orderOptions from '../../../../utils/orderOptions';\r\nimport { useAppSelector } from '../../../../hooks/reduxHooks';\r\n\r\n\r\nimport classes from './CategoriesChart.module.css';\r\n\r\nChart.register(...registerables);\r\n\r\nconst CategoriesChart: React.FC = () => {\r\n    const { sendRequest } = useHttp();\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const [period, setPeriod] = useState('week');\r\n    const [dataLabels, setDataLabels] = useState<string[]>([]);\r\n    const [categoriesCount, setCategoriesCount] = useState<number[]>([]);\r\n\r\n    const processResponse = useCallback((res: { category: number }) => {\r\n        const labels: string[] = [];\r\n        const counts: number[] = [];\r\n        Object.entries(res).forEach(([k, v]) => {\r\n            labels.push(k);\r\n            counts.push(v);\r\n        });\r\n        setDataLabels(labels);\r\n        setCategoriesCount(counts);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!restaurant._id) { return };\r\n        sendRequest(orderOptions.getOrdersCountByCategoryAndPeriod(restaurant._id, period), processResponse);\r\n    }, [sendRequest, restaurant._id, processResponse, period]);\r\n\r\n\r\n    useEffect(() => {\r\n        if (dataLabels.length === 0) { return; }\r\n        const myChart = new Chart(\r\n            canvasRef.current!,\r\n            {\r\n                type: 'pie',\r\n                data: {\r\n                    labels: dataLabels,\r\n                    datasets: [{\r\n                        label: 'Categories',\r\n                        data: categoriesCount,\r\n                        backgroundColor: [\r\n                            'rgba(255, 99, 132, 0.2)',\r\n                            'rgba(54, 162, 235, 0.2)',\r\n                            'rgba(255, 206, 86, 0.2)',\r\n                            'rgba(75, 192, 192, 0.2)',\r\n                            'rgba(153, 102, 255, 0.2)',\r\n                            'rgba(255, 159, 64, 0.2)',\r\n                            'rgba(255, 99, 71, 0.2)',\r\n                            'rgba(238, 130, 238, 0.2)',\r\n                            'rgba(255, 0, 0, 0.2)',\r\n                            'rgba(0, 0, 255, 0.2)',\r\n                            'rgba(255, 99, 71, 0.2)'\r\n                        ],\r\n                        borderColor: [\r\n                            'rgba(255, 99, 132, 1)',\r\n                            'rgba(54, 162, 235, 1)',\r\n                            'rgba(255, 206, 86, 1)',\r\n                            'rgba(75, 192, 192, 1)',\r\n                            'rgba(153, 102, 255, 1)',\r\n                            'rgba(255, 159, 64, 1)',\r\n                            'rgb(255, 99, 71, 1)',\r\n                            'rgb(238, 130, 238, 1)',\r\n                            'rgb(255, 0, 0, 1)',\r\n                            'rgb(0, 0, 255, 1)',\r\n                            'rgba(255, 99, 71, 1)'\r\n                        ],\r\n                        borderWidth: 1\r\n                    }]\r\n                },\r\n                options: {\r\n                    plugins: {\r\n                        legend: {\r\n                            display: false\r\n                        },\r\n                        title: {\r\n                            display: true,\r\n                            text: 'Orders by category'\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        );\r\n        return () => {\r\n            myChart.destroy();\r\n        }\r\n    }, [categoriesCount, dataLabels]);\r\n\r\n    const selectChangeHandler = (e: React.ChangeEvent) => {\r\n        const period = (e.target as HTMLSelectElement).selectedOptions[0].value\r\n        setPeriod(period);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.chart}>\r\n            <h2 className={classes['chart-title']}>Categories share:</h2>\r\n            <select onChange={selectChangeHandler} className={classes['chart-select']}>\r\n                <option value=\"week\">Week</option>\r\n                <option value=\"month\">Month</option>\r\n            </select>\r\n            {dataLabels.length > 0 && <canvas ref={canvasRef} className={classes['canvas']}></canvas>}\r\n            {dataLabels.length === 0 && <div className={classes['no-data']}>No data for selected period</div>}\r\n        </div >\r\n    )\r\n};\r\n\r\nexport default CategoriesChart;","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { Chart, registerables } from 'chart.js';\r\n\r\nimport useHttp from '../../../../hooks/useHttp';\r\nimport orderOptions from '../../../../utils/orderOptions';\r\nimport { useAppSelector } from '../../../../hooks/reduxHooks';\r\n\r\n\r\nimport classes from './SalesChart.module.css';\r\n\r\nChart.register(...registerables);\r\n\r\nconst SalesChart: React.FC = () => {\r\n    const { sendRequest } = useHttp();\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const [period, setPeriod] = useState('week');\r\n    const [dataLabels, setDataLabels] = useState<string[]>([]);\r\n    const [categoriesCount, setCategoriesCount] = useState<number[]>([]);\r\n\r\n    const processResponse = useCallback((res: { category: number }) => {\r\n        const labels: string[] = [];\r\n        const counts: number[] = [];\r\n        Object.entries(res).forEach(([k, v]) => {\r\n            labels.push(k);\r\n            counts.push(v);\r\n        });\r\n        setDataLabels(labels);\r\n        setCategoriesCount(counts);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!restaurant._id) { return };\r\n        sendRequest(orderOptions.getSalesByPeriod(restaurant._id, period), processResponse);\r\n    }, [sendRequest, restaurant._id, processResponse, period]);\r\n\r\n\r\n    useEffect(() => {\r\n        if (dataLabels.length === 0) { return; }\r\n        const myChart = new Chart(\r\n            canvasRef.current!,\r\n            {\r\n                type: 'bar',\r\n                data: {\r\n                    labels: dataLabels,\r\n                    datasets: [{\r\n                        label: 'Sales',\r\n                        data: categoriesCount,\r\n                        backgroundColor: [\r\n                            'rgba(255, 99, 132, 0.2)',\r\n                            'rgba(54, 162, 235, 0.2)',\r\n                            'rgba(255, 206, 86, 0.2)',\r\n                            'rgba(75, 192, 192, 0.2)',\r\n                            'rgba(153, 102, 255, 0.2)',\r\n                            'rgba(255, 159, 64, 0.2)',\r\n                            'rgba(255, 99, 71, 0.2)',\r\n                            'rgba(238, 130, 238, 0.2)',\r\n                            'rgba(255, 0, 0, 0.2)',\r\n                            'rgba(0, 0, 255, 0.2)',\r\n                            'rgba(255, 99, 71, 0.2)'\r\n                        ],\r\n                        borderColor: [\r\n                            'rgba(255, 99, 132, 1)',\r\n                            'rgba(54, 162, 235, 1)',\r\n                            'rgba(255, 206, 86, 1)',\r\n                            'rgba(75, 192, 192, 1)',\r\n                            'rgba(153, 102, 255, 1)',\r\n                            'rgba(255, 159, 64, 1)',\r\n                            'rgb(255, 99, 71, 1)',\r\n                            'rgb(238, 130, 238, 1)',\r\n                            'rgb(255, 0, 0, 1)',\r\n                            'rgb(0, 0, 255, 1)',\r\n                            'rgba(255, 99, 71, 1)'\r\n                        ],\r\n                        borderWidth: 1\r\n                    }]\r\n                },\r\n                options: {\r\n                    plugins: {\r\n                        legend: {\r\n                            display: false\r\n                        },\r\n                        title: {\r\n                            display: true,\r\n                            text: 'Orders by category'\r\n                        },\r\n                    },\r\n                }\r\n            }\r\n        );\r\n        return () => {\r\n            myChart.destroy();\r\n        }\r\n    }, [categoriesCount, dataLabels]);\r\n\r\n    const selectChangeHandler = (e: React.ChangeEvent) => {\r\n        const period = (e.target as HTMLSelectElement).selectedOptions[0].value\r\n        setPeriod(period);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.chart}>\r\n            <h2 className={classes['chart-title']}>Sales:</h2>\r\n            <select onChange={selectChangeHandler} className={classes['chart-select']}>\r\n                <option value=\"week\">Week</option>\r\n                <option value=\"month\">Month</option>\r\n            </select>\r\n            {dataLabels.length > 0 && <canvas ref={canvasRef} className={classes['canvas']}></canvas>}\r\n            {dataLabels.length === 0 && <div className={classes['no-data']}>No data for selected period</div>}\r\n        </div >\r\n    )\r\n};\r\n\r\nexport default SalesChart;","import CategoriesChart from './CategoriesChart/CategoriesChart';\r\nimport SalesChart from './SalesChart/SalesChart';\r\n\r\n\r\nimport classes from './Statistics.module.css';\r\n\r\n\r\nconst Statistics: React.FC = () => {\r\n    return (\r\n        <div className={`${classes.statistics} container`}>\r\n            <SalesChart />\r\n            <CategoriesChart />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Statistics;","import { Redirect, Route, Switch } from \"react-router\";\r\n\r\nimport { useAppSelector } from \"../../../hooks/reduxHooks\";\r\n\r\nimport OrdersList from \"../../order/OrdersList/OrdersList\";\r\nimport HorizontalNav from \"../../UI/HorizontalNav/HorizontalNav\"\r\nimport Statistics from \"../Statistics/Statistics\";\r\n\r\nconst RestaurantDashboard: React.FC = () => {\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const links: { url: string; text: string }[] = [\r\n        { url: `/restaurant/${restaurant._id}/dashboard/statistics`, text: 'Statistics' },\r\n        { url: `/restaurant/${restaurant._id}/dashboard/active-orders?page=1`, text: 'Active orders' },\r\n        { url: `/restaurant/${restaurant._id}/dashboard/completed-orders?page=1`, text: 'Completed orders' },\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            <HorizontalNav links={links} />\r\n            <Switch>\r\n                <Route path=\"/restaurant/:id/dashboard/\" exact>\r\n                    <Redirect to={`/restaurant/${restaurant._id}/dashboard/statistics`} />\r\n                </Route>\r\n                <Route path=\"/restaurant/:id/dashboard/statistics\">\r\n                    <Statistics />\r\n                </Route>\r\n                <Route path=\"/restaurant/:id/dashboard/active-orders\">\r\n                    <OrdersList status={'active'} />\r\n                </Route>\r\n                <Route path=\"/restaurant/:id/dashboard/completed-orders\">\r\n                    <OrdersList status={'completed'} />\r\n                </Route>\r\n            </Switch>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default RestaurantDashboard;","import React, { useCallback, useEffect } from 'react';\r\n\r\nimport { useAppSelector } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport useUserInput from '../../../hooks/useUserInput';\r\nimport IComment from '../../../interfaces/IComment';\r\nimport IRestaurant from '../../../interfaces/IRestaurant';\r\nimport restaurantOptions from '../../../utils/restaurantOptions';\r\nimport validators from '../../../validators';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './AddCommentForm.module.css';\r\n\r\ntype AddCommentFormProps = JSX.IntrinsicElements['form'] & {\r\n    setFormIsLoading: React.Dispatch<React.SetStateAction<boolean>>;\r\n    cancelClickHandler: () => void;\r\n    addCommentSubmitHandler: (res: { comments: IComment[], restaurant: IRestaurant }) => void;\r\n}\r\n\r\nconst AddCommentForm: React.FC<AddCommentFormProps> = ({ cancelClickHandler, addCommentSubmitHandler, setFormIsLoading }) => {\r\n    const user = useAppSelector(state => state.auth);\r\n    const { isLoading, setError, sendRequest } = useHttp();\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const {\r\n        value: nameValue,\r\n        hasError: nameHasError,\r\n        isValid: nameIsValid,\r\n        valueChangeHandler: nameChangeHandler,\r\n        inputBlurHandler: nameBlurHandler,\r\n        setValue: setNameValue\r\n    } = useUserInput(validators.minLength.bind(null, 6));\r\n    const {\r\n        value: commentValue,\r\n        hasError: commentHasError,\r\n        isValid: commentIsValid,\r\n        valueChangeHandler: commentChangeHandler,\r\n        inputBlurHandler: commentBlurHandler\r\n    } = useUserInput(validators.minLength.bind(null, 10));\r\n\r\n    const formIsValid = nameIsValid && commentIsValid;\r\n\r\n    useEffect(() => {\r\n        if (user.firstName && user.lastName) {\r\n            setNameValue(`${user.firstName} ${user.lastName}`);\r\n        }\r\n    }, [setNameValue, user]);\r\n\r\n    const processResponse = useCallback((res: { comments: IComment[], restaurant: IRestaurant }) => {\r\n        addCommentSubmitHandler(res);\r\n        setFormIsLoading(false);\r\n    }, [addCommentSubmitHandler, setFormIsLoading]);\r\n\r\n    const submitHandler = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.target as HTMLFormElement);\r\n        const rating = formData.get('rating');\r\n\r\n        if (rating === null) {\r\n            setError('Rating is required!');\r\n            return;\r\n        }\r\n\r\n        if (!formIsValid) { return; }\r\n\r\n        setFormIsLoading(true);\r\n        sendRequest(restaurantOptions.addComment(restaurant._id, nameValue, commentValue, rating as string), processResponse);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {isLoading && <div className={classes['background']}><Spinner /></div>}\r\n            {!isLoading && <form className={classes.form} onSubmit={submitHandler}>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={nameHasError ? classes['input-invalid'] : ''}\r\n                        placeholder=\" \"\r\n                        type=\"name\"\r\n                        name=\"name\"\r\n                        id=\"name\"\r\n                        disabled={isLoading}\r\n                        value={nameValue}\r\n                        onChange={nameChangeHandler}\r\n                        onBlur={nameBlurHandler}\r\n                    />\r\n                    <label htmlFor=\"name\" className={classes.placeholder}>Name:</label>\r\n                    {nameHasError && <p className={classes['input-notification']}>At least 6 characters long!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <textarea\r\n                        className={classes['textarea']}\r\n                        placeholder=\" \"\r\n                        name=\"comment\"\r\n                        id=\"comment\"\r\n                        rows={3}\r\n                        disabled={isLoading}\r\n                        value={commentValue}\r\n                        onChange={commentChangeHandler}\r\n                        onBlur={commentBlurHandler}\r\n                    />\r\n                    <label htmlFor=\"comment\" className={classes.placeholder}>Comment:</label>\r\n                    {commentHasError && <p className={classes['input-notification']}>At least 10 characters long!</p>}\r\n                </div>\r\n                <div className={classes.controls}>\r\n                    <div className={classes.rating}>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"1\" />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"2\" />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"3\" />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"4\" />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"5\" />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                    </div>\r\n                    <div className={classes['controls-btns']}>\r\n                        <button className={classes['controls-btn']} disabled={!formIsValid || isLoading}>Add</button>\r\n                        <button onClick={cancelClickHandler} className={`${classes['controls-btn']} ${classes['controls-btn--danger']}`} type=\"button\">Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </form>}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default AddCommentForm;","import React, { Dispatch, SetStateAction, useEffect } from 'react';\r\n\r\nimport { useAppSelector } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport useUserInput from '../../../hooks/useUserInput';\r\nimport IComment from '../../../interfaces/IComment';\r\nimport IRestaurant from '../../../interfaces/IRestaurant';\r\nimport restaurantOptions from '../../../utils/restaurantOptions';\r\nimport validators from '../../../validators';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './EditCommentForm.module.css';\r\n\r\ntype EditCommentFormProps = JSX.IntrinsicElements['form'] & {\r\n    comment: IComment;\r\n    setIsEditMode: Dispatch<SetStateAction<boolean>>;\r\n    editCommentHandler: (res: { comment: IComment, restaurant: IRestaurant }) => void;\r\n}\r\n\r\nconst EditCommentForm: React.FC<EditCommentFormProps> = ({ comment, setIsEditMode, editCommentHandler }) => {\r\n    const { isLoading, setError, sendRequest } = useHttp();\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const {\r\n        value: nameValue,\r\n        hasError: nameHasError,\r\n        valueChangeHandler: nameChangeHandler,\r\n        inputBlurHandler: nameBlurHandler,\r\n        setValue: setNameValue\r\n    } = useUserInput(validators.minLength.bind(null, 6));\r\n    const {\r\n        value: commentValue,\r\n        hasError: commentHasError,\r\n        valueChangeHandler: commentChangeHandler,\r\n        inputBlurHandler: commentBlurHandler,\r\n        setValue: setCommentValue\r\n    } = useUserInput(validators.minLength.bind(null, 10));\r\n\r\n    const formIsValid = !nameHasError && !commentHasError;\r\n\r\n    useEffect(() => {\r\n        setNameValue(comment.name);\r\n        setCommentValue(comment.comment);\r\n    }, [setNameValue, setCommentValue, comment]);\r\n\r\n    const cancelClickHandler = () => {\r\n        setIsEditMode(false);\r\n    };\r\n\r\n    const processResponse = (res: { comment: IComment, restaurant: IRestaurant }) => {\r\n        setIsEditMode(false);\r\n        editCommentHandler(res);\r\n    }\r\n\r\n    const submitHandler = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.target as HTMLFormElement);\r\n        const rating = formData.get('rating');\r\n\r\n        if (rating === null) {\r\n            setError('Rating is required!');\r\n            return;\r\n        }\r\n\r\n        if (!formIsValid) { return; }\r\n\r\n        sendRequest(\r\n            restaurantOptions.editComment(restaurant._id, comment._id, nameValue, commentValue, rating as string),\r\n            processResponse\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {isLoading && <div className={classes['background']}><Spinner /></div>}\r\n            {!isLoading && <form className={classes.form} onSubmit={submitHandler}>\r\n                <div className={classes.col}>\r\n                    <input\r\n                        className={nameHasError ? classes['input-invalid'] : ''}\r\n                        placeholder=\" \"\r\n                        type=\"name\"\r\n                        name=\"name\"\r\n                        id=\"name\"\r\n                        disabled={isLoading}\r\n                        value={nameValue}\r\n                        onChange={nameChangeHandler}\r\n                        onBlur={nameBlurHandler}\r\n                    />\r\n                    <label htmlFor=\"name\" className={classes.placeholder}>Name:</label>\r\n                    {nameHasError && <p className={classes['input-notification']}>At least 6 characters long!</p>}\r\n                </div>\r\n                <div className={classes.col}>\r\n                    <textarea\r\n                        className={classes['textarea']}\r\n                        placeholder=\" \"\r\n                        name=\"comment\"\r\n                        id=\"comment\"\r\n                        rows={3}\r\n                        value={commentValue}\r\n                        onChange={commentChangeHandler}\r\n                        onBlur={commentBlurHandler}\r\n                    />\r\n                    <label htmlFor=\"comment\" className={classes.placeholder}>Comment:</label>\r\n                    {commentHasError && <p className={classes['input-notification']}>At least 10 characters long!</p>}\r\n                </div>\r\n                <div className={classes.controls}>\r\n                    <div className={classes.rating}>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"1\" defaultChecked={comment.rating === 1} />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"2\" defaultChecked={comment.rating === 2} />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"3\" defaultChecked={comment.rating === 3} />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"4\" defaultChecked={comment.rating === 4} />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                        <label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"5\" defaultChecked={comment.rating === 5} />\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                            <span className={classes.icon}>&#9733;</span>\r\n                        </label>\r\n                    </div>\r\n                    <div className={classes['controls-btns']}>\r\n                        <button className={classes['controls-btn']}>Edit</button>\r\n                        <button onClick={cancelClickHandler} className={`${classes['controls-btn']} ${classes['controls-btn--danger']}`} type=\"button\">Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </form>}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default EditCommentForm;","import { useEffect, useState } from 'react';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport IComment from '../../../interfaces/IComment';\r\nimport IRestaurant from '../../../interfaces/IRestaurant';\r\nimport { notificationActions } from '../../../store/notification';\r\nimport formatDate from '../../../utils/formatDate';\r\nimport restaurantOptions from '../../../utils/restaurantOptions';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\nimport EditCommentForm from '../EditCommentForm/EditCommentForm';\r\n\r\n\r\nimport classes from './Comment.module.css';\r\n\r\ntype CommentProps = JSX.IntrinsicElements['article'] & {\r\n    commentObj: IComment;\r\n    editCommentHandler: (res: { comment: IComment, restaurant: IRestaurant }) => void;\r\n    deleteCommentHandler: (res: { restaurant: IRestaurant; commentId: string }) => void;\r\n}\r\n\r\nconst Comment: React.FC<CommentProps> = ({ commentObj, editCommentHandler, deleteCommentHandler }) => {\r\n    const dispatch = useAppDispatch();\r\n    const [isEditMode, setIsEditMode] = useState(false);\r\n    const [isDeleteMode, setIsDeleteMode] = useState(false);\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const { sendRequest, isLoading } = useHttp();\r\n    const { name, comment, rating, date, owner } = commentObj;\r\n    const user = useAppSelector(state => state.auth);\r\n    const formattedDate = formatDate(date);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(notificationActions.close());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const editClickHandler = () => {\r\n        setIsEditMode(true);\r\n    };\r\n\r\n    const deleteClickHandler = () => {\r\n        setIsDeleteMode(true);\r\n    };\r\n\r\n    const cancelDeleteClickHandler = () => {\r\n        setIsDeleteMode(false);\r\n    };\r\n\r\n    const deleteSubmitHandler = () => {\r\n        sendRequest(\r\n            restaurantOptions.deleteComment(restaurant._id, commentObj._id),\r\n            (res: IRestaurant) => deleteCommentHandler({ restaurant: res, commentId: commentObj._id })\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!isEditMode && !isDeleteMode && <article className={classes.comment}>\r\n                <div className={classes['comment-header']}>\r\n                    <h4 className={classes['comment-header-title']}>\r\n                        {name}\r\n                        {user._id === owner ? <button onClick={editClickHandler} className={classes['comment-edit-btn']}>Edit</button> : null}\r\n                        {user._id === owner ? <button onClick={deleteClickHandler} className={`${classes['comment-delete-btn']} ${classes['comment-delete-btn--red']}`}>Delete</button> : null}\r\n                    </h4>\r\n                    <div className={classes.rating}>\r\n                        <label>\r\n                            <span className={`${classes.icon} ${rating >= 1 ? '' : classes['icon--gray']}`}></span>\r\n                            <span className={`${classes.icon} ${rating >= 2 ? '' : classes['icon--gray']}`}></span>\r\n                            <span className={`${classes.icon} ${rating >= 3 ? '' : classes['icon--gray']}`}></span>\r\n                            <span className={`${classes.icon} ${rating >= 4 ? '' : classes['icon--gray']}`}></span>\r\n                            <span className={`${classes.icon} ${rating >= 5 ? '' : classes['icon--gray']}`}></span>\r\n                        </label >\r\n                    </div >\r\n                </div >\r\n                <p className={classes['comment-date']}>{formattedDate}</p>\r\n                <p className={classes['comment-text']}>{comment}</p>\r\n            </article>}\r\n            {isEditMode && !isDeleteMode &&\r\n                <EditCommentForm setIsEditMode={setIsEditMode} comment={commentObj} editCommentHandler={editCommentHandler} />}\r\n            {!isEditMode && isDeleteMode && !isLoading &&\r\n                <article className={`${classes.comment} ${classes.delete}`}>\r\n                    <h4 className={classes['delete-title']}>Are you sure?</h4>\r\n                    <button\r\n                        className={`${classes['comment-delete-btn']} ${classes['comment-delete-btn--red']}`}\r\n                        onClick={deleteSubmitHandler}\r\n                    >\r\n                        Delete\r\n                    </button>\r\n                    <button className={classes['comment-edit-btn']} onClick={cancelDeleteClickHandler}>Cancel</button>\r\n                </article>}\r\n            {isLoading && <div className={classes['background']}><Spinner size='medium' /></div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Comment;","import { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport IComment from '../../../interfaces/IComment';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport { restaurantActions } from '../../../store/restaurant';\r\nimport ICommentsResponse from '../../../interfaces/ICommentsResponse';\r\nimport IRestaurant from '../../../interfaces/IRestaurant';\r\nimport { authActions } from '../../../store/auth';\r\nimport restaurantOptions from '../../../utils/restaurantOptions';\r\n\r\nimport AddCommentForm from '../AddCommentForm/AddCommentForm';\r\nimport Comment from '../Comment/Comment';\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './CommentsModal.module.css';\r\n\r\nconst CommentsModal: React.FC = () => {\r\n    const [comments, setComments] = useState<(IComment | null)[]>([]);\r\n    const [totalCommentsCount, setTotalCommentsCount] = useState(0);\r\n    const [page, setPage] = useState(1);\r\n    const [showAddComment, setShowAddComment] = useState(false);\r\n    const [formIsLoading, setFormIsLoading] = useState(false);\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const user = useAppSelector(state => state.auth);\r\n    const { sendRequest, isLoading } = useHttp();\r\n    const dispatch = useAppDispatch();\r\n    const resId = restaurant._id;\r\n\r\n    const processResponse = useCallback((res: ICommentsResponse) => {\r\n        setComments(oldState => oldState.concat(res.comments));\r\n        setTotalCommentsCount(res.ratingsCount);\r\n        if (res.tokenExpired) {\r\n            dispatch(authActions.logout());\r\n        }\r\n    }, [setComments, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (page === 0) { return; }\r\n        sendRequest(restaurantOptions.getComments(resId, page), processResponse);\r\n    }, [resId, page, processResponse, sendRequest]);\r\n\r\n    const observer = useRef<IntersectionObserver>();\r\n    const lastCommentElementRef = useCallback(node => {\r\n        if (isLoading || formIsLoading) { return; }\r\n        if (observer.current) { observer.current.disconnect(); }\r\n        observer.current = new IntersectionObserver(entries => {\r\n            if (entries[0].isIntersecting && totalCommentsCount > comments.length) {\r\n                setPage(oldPage => oldPage + 1)\r\n            }\r\n        });\r\n        if (node) { observer.current.observe(node); }\r\n    }, [isLoading, totalCommentsCount, comments, formIsLoading]);\r\n\r\n    const addCommentClickHandler = () => setShowAddComment(true);\r\n\r\n    const cancelClickHandler = () => setShowAddComment(false);\r\n\r\n    const addCommentSubmitHandler = useCallback((res: { comments: IComment[], restaurant: IRestaurant }) => {\r\n        setShowAddComment(false);\r\n        setComments([]);\r\n        setPage(0);\r\n        setPage(1);\r\n        setTotalCommentsCount(res.comments.length);\r\n        dispatch(restaurantActions.updateRating({ rating: res.restaurant.rating, ratingsCount: res.restaurant.ratingsCount }));\r\n    }, [dispatch]);\r\n\r\n    const editCommentHandler = (res: { comment: IComment, restaurant: IRestaurant }) => {\r\n        const newComments = comments.map(x => {\r\n            if (x?._id === res.comment._id) { return res.comment; }\r\n            return x;\r\n        });\r\n        setComments(newComments);\r\n        dispatch(restaurantActions.updateRating({ rating: res.restaurant.rating, ratingsCount: res.restaurant.ratingsCount }));\r\n    };\r\n\r\n    const deleteCommentHandler = (res: { restaurant: IRestaurant; commentId: string }) => {\r\n        let newComments = comments.map(x => {\r\n            if (x?._id === res.commentId) { return null; }\r\n            return x;\r\n        });\r\n        if (res.restaurant.ratingsCount <= 10 && comments.length >= 10) {\r\n            newComments = [];\r\n            setPage(0);\r\n            setPage(1);\r\n        }\r\n        setComments(newComments);\r\n        dispatch(restaurantActions.updateRating({ rating: res.restaurant.rating, ratingsCount: res.restaurant.ratingsCount }));\r\n    };\r\n\r\n    return (\r\n        <section className={classes.comments}>\r\n            <h3 className={classes['comments-title']}>Comments</h3>\r\n            <article className={classes['comments-score']}>\r\n                <h4 className={classes['comments-score-title']}>Average score:</h4>\r\n                <div>\r\n                    <FontAwesomeIcon\r\n                        icon={['fas', 'star']}\r\n                        className={restaurant.rating !== 0 ? classes['comments-score-icon'] : classes['comments-score-icon--gray']}\r\n                    />\r\n                    {restaurant.rating !== 0 && <span>{restaurant.rating} from {restaurant.ratingsCount} comments</span>}\r\n                    {restaurant.rating === 0 && <span>No comments yet!</span>}\r\n                </div>\r\n            </article>\r\n            {!showAddComment && user.email && <button onClick={addCommentClickHandler} className={classes['comments-btn']}>Add comment</button>}\r\n            {showAddComment && <AddCommentForm cancelClickHandler={cancelClickHandler} setFormIsLoading={setFormIsLoading} addCommentSubmitHandler={addCommentSubmitHandler} />}\r\n            <ul className={classes['comments-list']}>\r\n                {comments.map((x, i) => {\r\n                    if (x === null) { return null };\r\n                    if (comments.length === i + 1) {\r\n                        return (\r\n                            <li ref={lastCommentElementRef} key={x?._id} className={classes['comments-list-item']}>\r\n                                <Comment commentObj={x} editCommentHandler={editCommentHandler} deleteCommentHandler={deleteCommentHandler} />\r\n                            </li>\r\n                        )\r\n                    } else {\r\n                        return (\r\n                            <li key={x._id} className={classes['comments-list-item']}>\r\n                                <Comment commentObj={x} editCommentHandler={editCommentHandler} deleteCommentHandler={deleteCommentHandler} />\r\n                            </li>\r\n                        );\r\n                    }\r\n                })}\r\n                {isLoading && <Spinner size=\"medium\" />}\r\n            </ul>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default CommentsModal;","import { useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { useAppDispatch, useAppSelector } from \"../../../hooks/reduxHooks\";\r\nimport { authActions } from '../../../store/auth';\r\nimport { modalActions } from \"../../../store/modal\";\r\nimport IAuthState from \"../../../interfaces/IAuthState\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport DeleteRestaurantModal from \"../DeleteRestaurantModal/DeleteRestaurantModal\";\r\nimport Modal from \"../../UI/Modal/Modal\";\r\nimport AddRecipeModal from \"../../recipe/AddRecipeModal/AddRecipeModal\";\r\nimport CommentsModal from \"../../comment/CommentsModal/CommentsModal\";\r\nimport ImageSuspense from \"../../UI/ImageSuspense/ImageSuspense\";\r\n\r\n\r\nimport classes from './RestaurantHeader.module.css';\r\n\r\ntype RestaurantHeaderProps = JSX.IntrinsicElements['section'] & {\r\n    user: IAuthState;\r\n}\r\n\r\nconst RestaurantHeader: React.FC<RestaurantHeaderProps> = ({ user }) => {\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const dispatch = useAppDispatch();\r\n    const userIsOwner = user._id === restaurant.owner;\r\n    const restaurantIsInFavorites = user.favorites.includes(restaurant._id);\r\n    const modalState = useAppSelector(state => state.modal);\r\n\r\n    const addToFavoritesHandler = () => {\r\n        dispatch(authActions.addToFavorites({ _id: restaurant._id }));\r\n    }\r\n\r\n    const removeFromFavoritesHandler = () => {\r\n        dispatch(authActions.removeFromFavorites({ _id: restaurant._id }));\r\n    }\r\n\r\n    const deleteClickHandler = () => {\r\n        dispatch(modalActions.open(`delete-restaurant-${restaurant._id}`));\r\n    }\r\n\r\n    const addRecipeClickHandler = () => {\r\n        dispatch(modalActions.open('add-recipe'));\r\n    }\r\n\r\n    const commentClickHandler = () => {\r\n        dispatch(modalActions.open('comment'));\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(modalActions.close())\r\n        }\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <section>\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === `delete-restaurant-${restaurant._id}` &&\r\n                <Modal>\r\n                    <DeleteRestaurantModal _id={restaurant._id} name={restaurant.name} />\r\n                </Modal>\r\n            }\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === 'add-recipe' &&\r\n                <Modal>\r\n                    <AddRecipeModal />\r\n                </Modal>\r\n            }\r\n            {modalState.isOpen &&\r\n                modalState.overlayName === 'comment' &&\r\n                <Modal>\r\n                    <CommentsModal />\r\n                </Modal>\r\n            }\r\n            <ImageSuspense url={restaurant.image.url}>\r\n                <img className={classes['restaurant-img']} src={restaurant.image.url} alt={`${restaurant.name} restaurant`} />\r\n            </ImageSuspense>\r\n            <article className={`${classes['restaurant-content']} container`}>\r\n                <article className={classes['restaurant-content-title-wrapper']}>\r\n                    <NavLink to={`/restaurant/${restaurant._id}`} className={classes['restaurant-content-title']}>{restaurant.name}</NavLink>\r\n                    <h4 className={classes['restaurant-content-subtitle']}>{restaurant.mainTheme}, {restaurant.categories[0]}</h4>\r\n                    <p className={classes.scoring}>\r\n                        <FontAwesomeIcon icon={['fas', 'star']} size=\"lg\" className={restaurant.rating !== 0 ? classes['icon--blue'] : classes['icon--gray']} />\r\n                        {restaurant.rating !== 0 && <span>{restaurant.rating}({restaurant.ratingsCount})</span>}\r\n                    </p>\r\n                </article>\r\n                <p className={classes.icons}>\r\n                    {userIsOwner &&\r\n                        <NavLink to={`/restaurant/${restaurant._id}/edit`}>\r\n                            <FontAwesomeIcon\r\n                                className={classes.icon}\r\n                                icon={['fas', 'edit']}\r\n                            />\r\n                        </NavLink>}\r\n                    {userIsOwner &&\r\n                        <span className={classes['icon--after']}>\r\n                            <FontAwesomeIcon\r\n                                className={classes.icon}\r\n                                onClick={addRecipeClickHandler}\r\n                                icon={['fas', 'hamburger']}\r\n                            />\r\n                        </span>}\r\n                    {userIsOwner &&\r\n                        <NavLink to={`/restaurant/${restaurant._id}/dashboard`}>\r\n                            <FontAwesomeIcon\r\n                                className={classes.icon}\r\n                                icon={['fas', 'tools']}\r\n                            />\r\n                        </NavLink>}\r\n                    {userIsOwner &&\r\n                        <FontAwesomeIcon\r\n                            className={classes.icon}\r\n                            onClick={deleteClickHandler}\r\n                            icon={['fas', 'trash']}\r\n                        />}\r\n                    {!restaurantIsInFavorites &&\r\n                        <FontAwesomeIcon\r\n                            className={`${classes.icon} ${classes['icon--red']}`}\r\n                            onClick={addToFavoritesHandler}\r\n                            icon={['far', 'heart']}\r\n                        />}\r\n                    {restaurantIsInFavorites &&\r\n                        <FontAwesomeIcon\r\n                            className={`${classes.icon} ${classes['icon--red']}`}\r\n                            onClick={removeFromFavoritesHandler}\r\n                            icon={['fas', 'heart']}\r\n                        />}\r\n                    <FontAwesomeIcon\r\n                        className={`${classes.icon} ${classes['icon--blue']}`}\r\n                        onClick={commentClickHandler}\r\n                        icon={['far', 'comment']}\r\n                    />\r\n                </p >\r\n            </article>\r\n        </section>\r\n    )\r\n};\r\n\r\nexport default RestaurantHeader;","const isOpen = (workHours: string[]) => {\r\n    const workHoursStartHours = Number(workHours[0].split(':')[0]);\r\n    const workHoursStartMinutes = Number(workHours[0].split(':')[1]);\r\n    const workHoursEndHours = Number(workHours[1].split(':')[0]);\r\n    const workHoursEndMinutes = Number(workHours[1].split(':')[1]);\r\n    const workHoursStart = new Date().setHours(workHoursStartHours, workHoursStartMinutes, 0, 0);\r\n    const workHoursEnd = new Date().setHours(workHoursEndHours, workHoursEndMinutes, 0, 0);\r\n    const time = Date.now();\r\n    return workHoursStart < time && time < workHoursEnd;\r\n};\r\n\r\nexport default isOpen;","import React, { useEffect, useRef } from 'react';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport { cartActions } from '../../../store/cart';\r\nimport { checkoutActions } from '../../../store/checkout';\r\nimport { notificationActions } from '../../../store/notification';\r\nimport useHttp from '../../../hooks/useHttp';\r\nimport useUserInput from '../../../hooks/useUserInput';\r\nimport IRecipe from '../../../interfaces/IRecipe';\r\nimport validators from '../../../validators';\r\nimport orderOptions from '../../../utils/orderOptions';\r\nimport isOpen from '../../../utils/isOpen';\r\n\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\n\r\nimport classes from './CheckoutForm.module.css';\r\n\r\ntype CheckoutFormProps = JSX.IntrinsicElements['form'] & {\r\n    cartRecipes: { recipe: IRecipe; quantity: number; }[];\r\n}\r\n\r\nconst CheckoutForm: React.FC<CheckoutFormProps> = ({ cartRecipes }) => {\r\n    const dispatch = useAppDispatch();\r\n    const user = useAppSelector(state => state.auth);\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const checkoutState = useAppSelector(state => state.checkout);\r\n    const { isLoading, sendRequest } = useHttp();\r\n    const {\r\n        value: addressValue,\r\n        hasError: addressHasError,\r\n        valueChangeHandler: addressChangeHandler,\r\n        inputBlurHandler: addressBlurHandler,\r\n        isValid: addressIsValid,\r\n        setValue: setAddressValue\r\n    } = useUserInput(validators.minLength.bind(null, 6));\r\n    const {\r\n        value: cityValue,\r\n        hasError: cityHasError,\r\n        valueChangeHandler: cityChangeHandler,\r\n        inputBlurHandler: cityBlurHandler,\r\n        isValid: cityIsValid,\r\n        setValue: setCityValue\r\n    } = useUserInput(validators.minLength.bind(null, 4));\r\n    const {\r\n        value: nameValue,\r\n        hasError: nameHasError,\r\n        valueChangeHandler: nameChangeHandler,\r\n        inputBlurHandler: nameBlurHandler,\r\n        isValid: nameIsValid,\r\n        setValue: setNameValue\r\n    } = useUserInput(validators.minLength.bind(null, 6));\r\n    const {\r\n        value: phoneValue,\r\n        hasError: phoneHasError,\r\n        valueChangeHandler: phoneChangeHandler,\r\n        inputBlurHandler: phoneBlurHandler,\r\n        isValid: phoneIsValid,\r\n        setValue: setPhoneValue\r\n    } = useUserInput(validators.isPhone);\r\n\r\n    const nameRef = useRef<null | string>(null);\r\n    const addressRef = useRef<null | string>(null);\r\n    const cityRef = useRef<null | string>(null);\r\n    const phoneRef = useRef<null | string>(null);\r\n    nameRef.current = nameValue;\r\n    addressRef.current = addressValue;\r\n    cityRef.current = cityValue;\r\n    phoneRef.current = phoneValue;\r\n\r\n    useEffect(() => {\r\n        setAddressValue(checkoutState.address || user.address || '');\r\n        setCityValue(checkoutState.city || user.city || '');\r\n        setPhoneValue(checkoutState.phone?.toString() || user.phone?.toString() || '');\r\n        if (user.firstName && user.lastName) {\r\n            setNameValue(checkoutState.name || `${user.firstName} ${user.lastName}`);\r\n        } else {\r\n            setNameValue(checkoutState.name || '');\r\n        }\r\n        return () => {\r\n            dispatch(checkoutActions.save({ name: nameRef.current, phone: phoneRef.current, city: cityRef.current, address: addressRef.current }));\r\n        }\r\n    }, [\r\n        setAddressValue,\r\n        setCityValue,\r\n        setPhoneValue,\r\n        setNameValue,\r\n        user,\r\n        checkoutState,\r\n        dispatch\r\n    ]);\r\n\r\n    const formIsValid = addressIsValid && cityIsValid && nameIsValid && phoneIsValid;\r\n\r\n    const submitHandler = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!formIsValid) { return; }\r\n\r\n        const restaurantIsOpen = isOpen(restaurant.workHours);\r\n\r\n        if (!restaurantIsOpen) {\r\n            dispatch(notificationActions.show({ type: 'error', text: `Unable to checkout. Restaurant working hours: ${restaurant.workHours.join('-')}` }))\r\n            return;\r\n        }\r\n\r\n        const hasCity = restaurant.cities.some(x => x.name.toLocaleLowerCase() === cityValue.toLocaleLowerCase());\r\n\r\n        if (!hasCity) {\r\n            const citiesString = restaurant.cities.map(x => x.name).join(', ');\r\n            dispatch(notificationActions.show({ type: 'error', text: `Unable to checkout. Restaurant delivers in these cities: ${citiesString}.` }));\r\n            return;\r\n        }\r\n\r\n        const processResponse = () => {\r\n            nameRef.current = null;\r\n            addressRef.current = null;\r\n            cityRef.current = null;\r\n            phoneRef.current = null;\r\n            dispatch(cartActions.clearCartOrder({ restaurantId: restaurant._id }));\r\n            dispatch(notificationActions.show({ type: 'success', text: 'Successful order!'}));\r\n            setTimeout(() => {\r\n                dispatch(notificationActions.close());\r\n            }, 3000);\r\n        }\r\n\r\n        const orderData = {\r\n            address: addressValue,\r\n            city: cityValue,\r\n            name: nameValue,\r\n            phone: phoneValue,\r\n            recipes: cartRecipes.map(x => {\r\n                return { recipe: x.recipe._id, quantity: x.quantity }\r\n            }),\r\n            restaurant: restaurant._id\r\n        }\r\n\r\n        sendRequest(orderOptions.add(orderData), processResponse);\r\n    }\r\n\r\n\r\n    return (\r\n        <form onSubmit={submitHandler} className={classes.form}>\r\n            <h2 className={classes['form-title']}>Checkout</h2>\r\n            <div className={classes.col}>\r\n                <input\r\n                    className={addressHasError ? classes['input-invalid'] : ''}\r\n                    placeholder=\" \"\r\n                    type=\"text\"\r\n                    name=\"address\"\r\n                    id=\"address\"\r\n                    disabled={isLoading}\r\n                    value={addressValue}\r\n                    onChange={addressChangeHandler}\r\n                    onBlur={addressBlurHandler}\r\n                />\r\n                <span className={classes.placeholder}>Address</span>\r\n                {addressHasError && <p className={classes['input-notification']}>Address must be at least 6 characters long!</p>}\r\n            </div>\r\n            <div className={classes.col}>\r\n                <input\r\n                    className={cityHasError ? classes['input-invalid'] : ''}\r\n                    placeholder=\" \"\r\n                    type=\"text\"\r\n                    name=\"city\"\r\n                    id=\"city\"\r\n                    disabled={isLoading}\r\n                    value={cityValue}\r\n                    onChange={cityChangeHandler}\r\n                    onBlur={cityBlurHandler}\r\n                />\r\n                <span className={classes.placeholder}>City</span>\r\n                {cityHasError && <p className={classes['input-notification']}>City must be at least 4 characters long!</p>}\r\n            </div>\r\n            <div className={classes.col}>\r\n                <input\r\n                    className={nameHasError ? classes['input-invalid'] : ''}\r\n                    placeholder=\" \"\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    id=\"name\"\r\n                    disabled={isLoading}\r\n                    value={nameValue}\r\n                    onChange={nameChangeHandler}\r\n                    onBlur={nameBlurHandler}\r\n                />\r\n                <span className={classes.placeholder}>First and last name</span>\r\n                {nameHasError && <p className={classes['input-notification']}>Names must be at least 6 characters long!</p>}\r\n            </div>\r\n            <div className={classes.col}>\r\n                <input\r\n                    className={phoneHasError ? classes['input-invalid'] : ''}\r\n                    placeholder=\" \"\r\n                    type=\"tel\"\r\n                    name=\"phone\"\r\n                    id=\"phone\"\r\n                    disabled={isLoading}\r\n                    value={phoneValue}\r\n                    onChange={phoneChangeHandler}\r\n                    onBlur={phoneBlurHandler}\r\n                />\r\n                <span className={classes.placeholder}>Phone number</span>\r\n                {phoneHasError && <p className={classes['input-notification']}>Please enter a valid phone number!</p>}\r\n            </div>\r\n            <button\r\n                className={`main-btn ${classes['main-btn']}`}\r\n                disabled={!formIsValid || isLoading}\r\n            >\r\n                Order\r\n                {isLoading && <span className={classes['spinner-container']}><Spinner size=\"small\" /></span>}\r\n            </button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default CheckoutForm;","import { useAppDispatch } from '../../../hooks/reduxHooks';\r\nimport { cartActions } from '../../../store/cart';\r\nimport IRecipe from '../../../interfaces/IRecipe';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\n\r\nimport classes from './ShoppingCartListItem.module.css';\r\n\r\ntype ShoppingCartListItemProps = JSX.IntrinsicElements['li'] & {\r\n    recipe: IRecipe;\r\n    quantity: number;\r\n    restaurantId: string;\r\n}\r\n\r\nconst ShoppingCartListItem: React.FC<ShoppingCartListItemProps> = ({ recipe, quantity, restaurantId }) => {\r\n    const dispatch = useAppDispatch();\r\n    const addToCartClickHandler = () => {\r\n        dispatch(cartActions.addToCart({ restaurantId, recipe }));\r\n    }\r\n\r\n    const removeFromCartClickHandler = () => {\r\n        dispatch(cartActions.removeFromCart({ restaurantId, recipe }));\r\n    }\r\n    return (\r\n        <li className={classes['cart-item']}>\r\n            <div className={classes['cart-item-text']}>{recipe.name} ({recipe.weight}g) <span>x {quantity}</span></div>\r\n            <div className={classes['cart-item-controls']}>\r\n                <div className={classes['cart-item-icons']}>\r\n                    <FontAwesomeIcon className={classes['icon--red']} icon={['fas', 'minus']} onClick={removeFromCartClickHandler} />\r\n                    <span>${recipe.price}</span>\r\n                    <FontAwesomeIcon className={classes['icon--green']} icon={['fas', 'plus']} onClick={addToCartClickHandler} />\r\n                    <span>${(recipe.price * quantity).toFixed(2)}</span>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default ShoppingCartListItem","import { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/reduxHooks';\r\nimport usePreventScrolling from '../../../hooks/usePreventScrolling';\r\nimport { modalActions } from '../../../store/modal';\r\nimport { notificationActions } from '../../../store/notification';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Backdrop } from '../../UI/Modal/Modal';\r\nimport CheckoutForm from '../CheckoutForm/CheckoutForm';\r\nimport ShoppingCartListItem from '../ShoppingCartListItem/ShoppingCartListItem';\r\n\r\n\r\nimport classes from './ShoppingCart.module.css';\r\n\r\nconst ShoppingCart: React.FC = () => {\r\n    const [isTouched, setIsTouched] = useState(false);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const { restaurants } = useAppSelector(state => state.cart);\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const dispatch = useAppDispatch();\r\n    const notificationState = useAppSelector(state => state.notification);\r\n    const cartRecipes = restaurants.find(x => x.restaurantId === restaurant._id)?.recipes;\r\n    const totalPrice = Number(cartRecipes?.reduce((acc, curr) => acc += curr.quantity * curr.recipe.price, 0).toFixed(2));\r\n    const totalQuantity = cartRecipes?.reduce((acc, curr) => acc += curr.quantity, 0);\r\n    usePreventScrolling(isOpen);\r\n\r\n    const headerClickHandler = () => {\r\n        setIsTouched(true);\r\n        setIsOpen(oldState => {\r\n            dispatch(modalActions.close());\r\n            return !oldState;\r\n        });\r\n    }\r\n\r\n    const backDropClickHandler = () => {\r\n        setIsOpen(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (notificationState.type === 'error') {\r\n                dispatch(notificationActions.close());\r\n            }\r\n        }\r\n    }, [dispatch, notificationState.type])\r\n\r\n    return (\r\n        <>\r\n            {isOpen && ReactDOM.createPortal(\r\n                <div onClick={backDropClickHandler}>\r\n                    <Backdrop closeHandler={backDropClickHandler} />\r\n                </div>,\r\n                document.getElementById('backdrop-root')!\r\n            )}\r\n            <section className={`${classes.cart}\r\n            ${classes['show-header']} ${isTouched && isOpen ? classes.expanding : ''}\r\n            ${isTouched && !isOpen ? classes.shrinking : ''}\r\n            ${!isOpen ? classes['scroll-disabled'] : ''}`}>\r\n                <article onClick={headerClickHandler} className={classes['cart-header']}>\r\n                    <article className={classes['cart-header-img-wrapper']}>\r\n                        <FontAwesomeIcon className={classes['cart-header-img-wrapper-icon']} icon={['fas', 'shopping-cart']} />\r\n                        <div className={classes['cart-header-img-quantity']}>{totalQuantity}</div>\r\n                    </article>\r\n                    <div className={classes['cart-header-text']}>\r\n                        <p >Cart(<span>${totalPrice}</span>)</p>\r\n                        {!isOpen && <FontAwesomeIcon icon={['fas', 'chevron-up']} />}\r\n                        {isOpen && <FontAwesomeIcon icon={['fas', 'chevron-down']} />}\r\n                    </div>\r\n                </article>\r\n                <section className={classes['cart-content']}>\r\n                    <article className={classes['cart-content-recipes']}>\r\n                        <ul className={classes['cart-content-recipes-list']}>\r\n                            {cartRecipes?.map(x => (\r\n                                <ShoppingCartListItem\r\n                                    key={x.recipe._id}\r\n                                    recipe={x.recipe}\r\n                                    quantity={x.quantity}\r\n                                    restaurantId={restaurant._id}\r\n                                />\r\n                            ))}\r\n                        </ul>\r\n                        <article className={classes['cart-content-summary']}>\r\n                            <p>\r\n                                <span>Order:</span>\r\n                                <span>${totalPrice}</span>\r\n                            </p>\r\n                            <p>\r\n                                <span>Delivery:</span>\r\n                                <span>{totalPrice > 10 ? 'Free' : '$3.99'}</span>\r\n                            </p>\r\n                            <p>\r\n                                <span>Total:</span>\r\n                                <span>${totalPrice > 10 ? totalPrice : (totalPrice + 3.99).toFixed(2)}</span>\r\n                            </p>\r\n                        </article>\r\n                    </article>\r\n                    <article className={classes['cart-content-checkout']}>\r\n                        <CheckoutForm cartRecipes={cartRecipes!} />\r\n                    </article>\r\n                </section>\r\n            </section>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ShoppingCart;","import { Redirect } from 'react-router';\r\n\r\nimport { useAppSelector } from '../hooks/reduxHooks';\r\nimport IRestaurant from '../interfaces/IRestaurant';\r\n\r\nimport Spinner from '../components/UI/Spinner/Spinner';\r\n\r\ntype IsOwnerProps = {\r\n    children: JSX.Element;\r\n    restaurant: IRestaurant;\r\n}\r\n\r\nconst IsOwner = ({ children, restaurant }: IsOwnerProps) => {\r\n    const user = useAppSelector(state => state.auth);\r\n    const { isInitializing } = useAppSelector(state => state.app);\r\n\r\n    if (isInitializing) {\r\n        return <Spinner />\r\n    } else if (!isInitializing && restaurant.owner === user._id) {\r\n        return children;\r\n    } else {\r\n        return <Redirect to=\"/\" />\r\n    }\r\n};\r\n\r\nexport default IsOwner;","import { useCallback, useEffect } from \"react\";\r\nimport { Route, Switch, useParams } from \"react-router\";\r\n\r\nimport { useAppDispatch, useAppSelector } from \"../../hooks/reduxHooks\";\r\nimport useHttp from \"../../hooks/useHttp\";\r\nimport { restaurantActions } from \"../../store/restaurant\";\r\nimport IRestaurant from \"../../interfaces/IRestaurant\";\r\nimport restaurantOptions from \"../../utils/restaurantOptions\";\r\n\r\nimport CreateRestaurant from \"../../components/restaurant/CreateRestaurant/CreateRestaurant\";\r\nimport RestaurantCategories from \"../../components/restaurant/RestaurantCategories/RestaurantCategories\";\r\nimport RestaurantDashboard from \"../../components/restaurant/RestaurantDashboard/RestaurantDashboard\";\r\nimport RestaurantHeader from \"../../components/restaurant/RestaurantHeader/RestaurantHeader\";\r\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\r\nimport ShoppingCart from \"../../components/shoppingCart/ShoppingCart/ShoppingCart\";\r\nimport IsOwner from \"../../guards/IsOwner\";\r\n\r\n\r\nconst RestaurantDetails: React.FC = () => {\r\n    const dispatch = useAppDispatch();\r\n    const restaurant = useAppSelector(state => state.restaurant);\r\n    const { isLoading, sendRequest } = useHttp();\r\n    const { id } = useParams<{ id: string }>();\r\n    const user = useAppSelector(state => state.auth);\r\n    const { restaurants } = useAppSelector(state => state.cart);\r\n    const restaurantIsInCart = restaurants.find(x => x.restaurantId === restaurant._id);\r\n\r\n    const processResponse = useCallback((res: IRestaurant) => {\r\n        dispatch(restaurantActions.setRestaurant(res));\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        sendRequest(restaurantOptions.getById(id), processResponse);\r\n        return () => {\r\n            dispatch(restaurantActions.clearRestaurant());\r\n        };\r\n    }, [id, sendRequest, processResponse, dispatch]);\r\n\r\n    return (\r\n        <>\r\n            {isLoading && <Spinner />}\r\n            {restaurant._id && !isLoading && <RestaurantHeader user={user} />}\r\n            <Switch>\r\n                <Route path=\"/restaurant/:id/dashboard\">\r\n                    {!isLoading && restaurant._id &&\r\n                        <IsOwner restaurant={restaurant} >\r\n                            <RestaurantDashboard />\r\n                        </IsOwner>}\r\n                </Route>\r\n                <Route path=\"/restaurant/:id/edit\">\r\n                    {restaurant._id && restaurant._id &&\r\n                        <IsOwner restaurant={restaurant} >\r\n                            <CreateRestaurant edit={true} />\r\n                        </IsOwner>}\r\n                </Route>\r\n                <Route path=\"/\">\r\n                    {restaurant._id &&\r\n                        !isLoading &&\r\n                        <RestaurantCategories categories={restaurant.categories} recipes={restaurant.recipes} />}\r\n                    {restaurant._id &&\r\n                        !isLoading &&\r\n                        restaurantIsInCart &&\r\n                        restaurantIsInCart.recipes.length > 0 &&\r\n                        <ShoppingCart />}\r\n                </Route>\r\n            </Switch>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default RestaurantDetails;","import { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport useHttp from \"../../hooks/useHttp\";\r\nimport IRestaurant from \"../../interfaces/IRestaurant\";\r\nimport restaurantOptions from \"../../utils/restaurantOptions\";\r\nimport { extractQueryObject, constructNewQuery } from '../../utils/queryHelper';\r\n\r\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\r\nimport RestaurantList from \"../../components/restaurant/RestaurantList/RestaurantList\";\r\nimport Paginator from \"../../components/UI/Paginator/Paginator\";\r\n\r\nconst City: React.FC = () => {\r\n    const history = useHistory();\r\n    const [restaurants, setRestaurants] = useState<IRestaurant[]>([]);\r\n    const [page, setPage] = useState(1);\r\n    const [totalCount, setTotalCount] = useState(0);\r\n    const { cityName } = useParams<{ cityName: string }>();\r\n    const { sendRequest, isLoading } = useHttp();\r\n\r\n    useEffect(() => {\r\n        const query = extractQueryObject(history.location.search);\r\n        setPage(Number(query.page) || 1);\r\n        sendRequest(\r\n            restaurantOptions.getByCity(cityName, constructNewQuery(query)),\r\n            (res: { restaurants: IRestaurant[], count: number }) => {\r\n                setRestaurants(res.restaurants);\r\n                setTotalCount(res.count);\r\n            }\r\n        );\r\n    }, [sendRequest, cityName, history.location.search]);\r\n\r\n    return (\r\n        <section className={'container'}>\r\n            {isLoading && <Spinner />}\r\n            {!isLoading && restaurants.length > 0 && <RestaurantList restaurants={restaurants} />}\r\n            {!isLoading && totalCount > 16 && <Paginator shownCount={16} totalCount={totalCount} page={page} isLoading={isLoading} />}\r\n            {!isLoading && restaurants.length === 0 && <h2>No restaurants yet!</h2>}\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default City;","import { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport useHttp from \"../../hooks/useHttp\";\r\nimport IRestaurant from \"../../interfaces/IRestaurant\";\r\nimport restaurantOptions from \"../../utils/restaurantOptions\";\r\nimport { constructNewQuery, extractQueryObject } from \"../../utils/queryHelper\";\r\n\r\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\r\nimport RestaurantList from \"../../components/restaurant/RestaurantList/RestaurantList\";\r\nimport Paginator from \"../../components/UI/Paginator/Paginator\";\r\n\r\nconst MainTheme: React.FC = () => {\r\n    const history = useHistory();\r\n    const [restaurants, setRestaurants] = useState<IRestaurant[]>([]);\r\n    const [page, setPage] = useState(1);\r\n    const [totalCount, setTotalCount] = useState(0);\r\n    const { mainTheme } = useParams<{ mainTheme: string }>();\r\n    const { sendRequest, isLoading } = useHttp();\r\n\r\n    useEffect(() => {\r\n        const query = extractQueryObject(history.location.search);\r\n        setPage(Number(query.page) || 1);\r\n        sendRequest(\r\n            restaurantOptions.getByTheme(mainTheme, constructNewQuery(query)),\r\n            (res: { restaurants: IRestaurant[], count: number }) => {\r\n                setRestaurants(res.restaurants);\r\n                setTotalCount(res.count);\r\n            }\r\n        );\r\n    }, [sendRequest, mainTheme, history.location.search]);\r\n\r\n    return (\r\n        <section className={'container'}>\r\n            {isLoading && <Spinner />}\r\n            {!isLoading && restaurants.length > 0 && <RestaurantList restaurants={restaurants} />}\r\n            {!isLoading && totalCount > 16 && <Paginator shownCount={16} totalCount={totalCount} page={page} isLoading={isLoading} />}\r\n            {!isLoading && restaurants.length === 0 && <h2>No restaurants yet!</h2>}\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default MainTheme;","import { useParams, Redirect } from 'react-router';\r\n\r\nimport { useAppSelector } from '../hooks/reduxHooks';\r\n\r\nimport Spinner from '../components/UI/Spinner/Spinner';\r\n\r\nconst UserProfileGuard = ({ children }: { children: JSX.Element }) => {\r\n    const { id } = useParams<{ id: string }>();\r\n    const user = useAppSelector(state => state.auth);\r\n    const { isInitializing } = useAppSelector(state => state.app);\r\n\r\n    if (isInitializing) {\r\n        return <Spinner />\r\n    } else if (!isInitializing && id === user._id) {\r\n        return children;\r\n    } else {\r\n        return <Redirect to=\"/\" />\r\n    }\r\n};\r\n\r\nexport default UserProfileGuard;","import { useEffect } from 'react';\nimport { Route, Switch } from 'react-router';\nimport './App.css';\n\nimport { useAppDispatch } from './hooks/reduxHooks';\nimport { authActions } from './store/auth';\nimport { cartActions } from './store/cart';\nimport useHttp from './hooks/useHttp';\nimport loadFontAwesome from './utils/loadFontAwesome';\nimport IAuthState from './interfaces/IAuthState';\nimport { appActions } from './store/app';\n\nimport Layout from './components/layout/Layout/Layout';\nimport Home from './pages/Home/Home';\nimport UserProfile from './pages/UserProfile/UserProfile';\nimport RestaurantDetails from './pages/RestaurantDetails/RestaurantDetails';\nimport City from './pages/City/City';\nimport MainTheme from './pages/MainTheme/MainTheme';\nimport UserProfileGuard from './guards/UserProfileGuard';\nimport FavoriteRestaurants from './components/restaurant/FavoriteRestaurants/FavoriteRestaurants';\nimport userOptions from './utils/userOptions';\n\nloadFontAwesome();\n\nfunction App() {\n\tconst { sendRequest } = useHttp();\n\tconst dispatch = useAppDispatch();\n\n\tuseEffect(() => {\n\t\tdispatch(authActions.autoLoadFavorites());\n\t\tdispatch(cartActions.autoLoadCart());\n\t\tsendRequest(userOptions.verify(), (res: IAuthState) => {\n\t\t\tdispatch(authActions.login(res));\n\t\t\tdispatch(appActions.initDone());\n\t\t});\n\t}, [dispatch, sendRequest]);\n\t\n\treturn (\n\t\t<Layout>\n\t\t\t<Switch>\n\t\t\t\t<Route path='/' exact>\n\t\t\t\t\t<Home />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/profile/:id'>\n\t\t\t\t\t<UserProfileGuard>\n\t\t\t\t\t\t<UserProfile />\n\t\t\t\t\t</UserProfileGuard>\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/restaurant/:id'>\n\t\t\t\t\t<RestaurantDetails />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/city/:cityName' >\n\t\t\t\t\t<City />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/main-theme/:mainTheme'>\n\t\t\t\t\t<MainTheme />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/favorites'>\n\t\t\t\t\t<FavoriteRestaurants />\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</Layout>\n\t);\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from \"@reduxjs/toolkit\";\r\n\r\nimport auth from \"./auth\";\r\nimport modal from './modal';\r\nimport restaurant from \"./restaurant\";\r\nimport cart from \"./cart\";\r\nimport checkout from \"./checkout\";\r\nimport notification from \"./notification\";\r\nimport app from './app';\r\n\r\nconst store = configureStore({\r\n    reducer: {\r\n        auth,\r\n        modal,\r\n        restaurant,\r\n        cart,\r\n        checkout,\r\n        notification,\r\n        app\r\n    }\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}